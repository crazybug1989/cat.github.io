window.__require=function t(e,o,n){function a(r,c){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!c&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var d=o[r]={exports:{}};e[r][0].call(d.exports,function(t){return a(e[r][1][t]||t)},d,d.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({UIGame:[function(t,e,o){"use strict";cc._RF.push(e,"63ccboLuRxDA4D75FFsDDZ4","UIGame");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r},r=this&&this.__generator||function(t,e){var o,n,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(t){return function(e){return s([t,e])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,n=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(c){i=[6,c],n=0}finally{o=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../../framework/data/data"),s=t("../../../../framework/db/const/dbConsts"),p=t("../../../../framework/db/db"),d=t("../../../../framework/plugin/notice/noticeConstants"),l=t("../../../../framework/plugin/notice/noticeMgr"),u=t("../../../../framework/plugin/platform/platform"),h=t("../../../../framework/plugin/sound/soundMgr"),f=t("../../../../framework/plugin/utils/utilBundle"),m=t("../../ui/UISideBar"),g=cc._decorator,b=g.ccclass,y=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameNode=null,e.photoNode=null,e.tabContentNode=null,e.tabItemPrefab=null,e.partContentNode=null,e.partPrefab=null,e.gameTopNode=null,e.gameTabNode=null,e.sideBar=null,e.btnExitViewNode=null,e.btnViewNode=null,e.btnCrashNode=null,e.btnScreenCutNode=null,e.btnSavePhotoNode=null,e.tabMap={},e.partBtnMap={},e.partBtnCache=[],e.selectGroupId="",e.createGenerator=null,e.viewState=0,e}return a(e,t),e.prototype.onLoad=function(){var t=function(t){var o=cc.instantiate(e.tabItemPrefab);e.tabContentNode.addChild(o),f.utilBundle.instance.loadBundleRes("game",cc.SpriteFrame,"textures/tab/"+p.db.game.partGroup[t].backGroundRes).then(function(t){o.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=t}),f.utilBundle.instance.loadBundleRes("game",cc.SpriteFrame,"textures/tab/"+p.db.game.partGroup[t].checkMarkRes).then(function(t){o.getChildByName("checkmark").getComponent(cc.Sprite).spriteFrame=t}),o.name=t,""===e.selectGroupId&&(e.selectGroupId=t),e.tabMap[t]=o.getComponent(cc.Toggle)},e=this;for(var o in p.db.game.partGroup)t(o);this.viewState=2,this.btnViewNode.active=!0,this.btnCrashNode.active=!0,this.btnExitViewNode.active=!1,this.btnScreenCutNode.active=!1,this.btnSavePhotoNode.active=!1,this.gameNode.active=!0,this.photoNode.active=!1},e.prototype.onEnable=function(){this.tabMap[this.selectGroupId].isChecked=!0,this.showPartGroup(this.selectGroupId),l.noticeMgr.instance.on(d.NEName.UPDATE_SIDEBAR_STATE,this.onUpdateSideBarStateHandler,this),l.noticeMgr.instance.on(d.NEName.SHOW_PHOTO,this.onShowPhotoHandler,this),l.noticeMgr.instance.on(d.NEName.UPDATE_PART_ITEM,this.onUpdatePartItemHandler,this)},e.prototype.onDisable=function(){l.noticeMgr.instance.off(d.NEName.UPDATE_SIDEBAR_STATE,this.onUpdateSideBarStateHandler,this),l.noticeMgr.instance.off(d.NEName.SHOW_PHOTO,this.onShowPhotoHandler,this),l.noticeMgr.instance.off(d.NEName.UPDATE_PART_ITEM,this.onUpdatePartItemHandler,this)},e.prototype.onUpdateSideBarStateHandler=function(t){switch(t.state){case 0:this.btnCrashNode.active=!1;break;case 1:this.btnCrashNode.active=!0}},e.prototype.onShowPhotoHandler=function(){this.showPhoto()},e.prototype.onUpdatePartItemHandler=function(t){p.db.game.part[t.id].groupId===this.selectGroupId&&(this.partBtnMap[t.id]?this.updatePartItem(t.id):this.createItem(t.id))},e.prototype.genInitItems=function(t){var e,o,n,a,i;return r(this,function(r){switch(r.label){case 0:for(o in e=[],p.db.game.part)e.push(o);n=0,r.label=1;case 1:return n<e.length?(a=e[n],(i=p.db.game.part[a]).groupId!==t?[3,3]:i.unlockType!==s.PartUnlockType.SUIT&&i.unlockType!==s.PartUnlockType.OTHER||c.data.instance.part.isUnlock(a)?[4,this.createItem(a)]:[3,3]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})},e.prototype.createItem=function(t){var e=null;e=this.partBtnCache.length>0?this.partBtnCache.shift():cc.instantiate(this.partPrefab).getComponent(cc.Button),this.partContentNode.addChild(e.node),f.utilBundle.instance.loadBundleRes("game",cc.SpriteFrame,"textures/icon/"+p.db.game.part[t].iconRes).then(function(t){e.node.getChildByName("image").getComponent(cc.Sprite).spriteFrame=t}),e.node.name=t,e.node.zIndex=p.db.game.part[t].weight,this.partBtnMap[t]=e,this.updatePartItem(t)},e.prototype.exeFrameSchedule=function(){var t=this.createGenerator.next();t&&!t.done||(this.createGenerator=null,this.unschedule(this.exeFrameSchedule))},e.prototype.updatePartItem=function(t){this.partBtnMap[t]&&(c.data.instance.part.isUnlock(t)||p.db.game.part[t].unlockType!==s.PartUnlockType.VIDEO?this.partBtnMap[t].node.getChildByName("ad").active=!1:this.partBtnMap[t].node.getChildByName("ad").active=!0)},e.prototype.showPartGroup=function(t){for(var e in this.partBtnMap)this.partBtnMap[e].node.getChildByName("image").getComponent(cc.Sprite).spriteFrame=null,this.partBtnCache.push(this.partBtnMap[e]);this.partBtnMap={},this.partContentNode.removeAllChildren(),this.createGenerator&&(this.createGenerator.return(null),this.unschedule(this.exeFrameSchedule)),this.createGenerator=this.genInitItems(t),this.schedule(this.exeFrameSchedule)},e.prototype.showPhoto=function(){this.gameNode.active=!1,this.photoNode.active=!0},e.prototype.tabToggleClick=function(t){t.node.name!==this.selectGroupId&&(this.selectGroupId=t.node.name,this.showPartGroup(this.selectGroupId))},e.prototype.btnPartClick=function(t){h.soundMgr.instance.playEffect("button_normal");var e=p.db.game.part[t.target.name];e.unlockType!==s.PartUnlockType.VIDEO||c.data.instance.part.isUnlock(e.id)?l.noticeMgr.instance.emit(d.NEName.SET_CAT_PART,{partId:t.target.name}):u.platform.instance.showToast("\u5e7f\u544a\u672a\u80fd\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")},e.prototype.btnExitViewClick=function(){var t=this;h.soundMgr.instance.playEffect("button_normal"),1!==this.viewState&&(this.viewState=1,this.gameTopNode.active=!0,this.scheduleOnce(function(){t.viewState=2},.3),l.noticeMgr.instance.emit(d.NEName.VIEW_CAT,{state:2}),this.gameTabNode.active=!0,this.btnViewNode.active=!0,this.btnExitViewNode.active=!1,this.btnScreenCutNode.active=!1)},e.prototype.btnViewClick=function(){var t=this;h.soundMgr.instance.playEffect("button_normal"),1!==this.viewState&&(this.viewState=1,this.gameTopNode.active=!1,this.sideBar.hideContent(),this.scheduleOnce(function(){t.viewState=0},.3),l.noticeMgr.instance.emit(d.NEName.VIEW_CAT,{state:0}),this.gameTabNode.active=!1,this.btnViewNode.active=!1,this.btnExitViewNode.active=!0,this.btnScreenCutNode.active=u.platform.instance.screenShotOpen())},e.prototype.btnCrushClick=function(){h.soundMgr.instance.playEffect("button_normal"),l.noticeMgr.instance.emit(d.NEName.CLEAR_CAT_GROUP,{groupId:this.selectGroupId})},e.prototype.btnPhotoSaveClick=function(){h.soundMgr.instance.playEffect("button_normal"),this.showPhoto()},e.prototype.btnScreenCutClick=function(){h.soundMgr.instance.playEffect("button_normal"),u.platform.instance.screenShot(function(){u.platform.instance.showToast("\u622a\u5c4f\u6210\u529f\uff0c\u524d\u5f80\u76f8\u518c\u67e5\u770b")})},e.prototype.btnPhotoExitClick=function(){h.soundMgr.instance.playEffect("button_normal"),this.gameNode.active=!0,this.photoNode.active=!1},i([y(cc.Node)],e.prototype,"gameNode",void 0),i([y(cc.Node)],e.prototype,"photoNode",void 0),i([y(cc.Node)],e.prototype,"tabContentNode",void 0),i([y(cc.Node)],e.prototype,"tabItemPrefab",void 0),i([y(cc.Node)],e.prototype,"partContentNode",void 0),i([y(cc.Node)],e.prototype,"partPrefab",void 0),i([y(cc.Node)],e.prototype,"gameTopNode",void 0),i([y(cc.Node)],e.prototype,"gameTabNode",void 0),i([y(m.default)],e.prototype,"sideBar",void 0),i([y(cc.Node)],e.prototype,"btnExitViewNode",void 0),i([y(cc.Node)],e.prototype,"btnViewNode",void 0),i([y(cc.Node)],e.prototype,"btnCrashNode",void 0),i([y(cc.Node)],e.prototype,"btnScreenCutNode",void 0),i([y(cc.Node)],e.prototype,"btnSavePhotoNode",void 0),i([b],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../../framework/data/data":void 0,"../../../../framework/db/const/dbConsts":void 0,"../../../../framework/db/db":void 0,"../../../../framework/plugin/notice/noticeConstants":void 0,"../../../../framework/plugin/notice/noticeMgr":void 0,"../../../../framework/plugin/platform/platform":void 0,"../../../../framework/plugin/sound/soundMgr":void 0,"../../../../framework/plugin/utils/utilBundle":void 0,"../../ui/UISideBar":"UISideBar"}],UIMenu:[function(t,e,o){"use strict";cc._RF.push(e,"55e50vJRRBGiJjqluBWHySb","UIMenu");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../framework/data/cat/catData"),c=t("../../../framework/data/data"),s=t("../../../framework/plugin/dialog/dialogMgr"),p=t("../../../framework/plugin/notice/noticeConstants"),d=t("../../../framework/plugin/notice/noticeMgr"),l=t("../../../framework/plugin/platform/platform"),u=t("../../../framework/plugin/sound/soundMgr"),h=cc._decorator,f=h.ccclass,m=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.btnSignInClick=function(){u.soundMgr.instance.playEffect("button_normal"),s.dialogMgr.instance.show("signInDialog")},e.prototype.btnExportClick=function(){u.soundMgr.instance.playEffect("button_normal"),c.data.instance.photo.addPhoto(r.catData.instance.format()),d.noticeMgr.instance.emit(p.NEName.SHOW_PHOTO),l.platform.instance.showToast("\u4fdd\u5b58\u5230\u76f8\u518c\u6210\u529f")},e.prototype.btnSettingClick=function(){u.soundMgr.instance.playEffect("button_normal"),s.dialogMgr.instance.show("settingDialog")},e.prototype.btnPhotoClick=function(){u.soundMgr.instance.playEffect("button_normal"),d.noticeMgr.instance.emit(p.NEName.SHOW_PHOTO)},e.prototype.btnMoreClick=function(){u.soundMgr.instance.playEffect("button_normal"),s.dialogMgr.instance.show("moreDialog")},i([f],e)}(cc.Component));o.default=m,cc._RF.pop()},{"../../../framework/data/cat/catData":void 0,"../../../framework/data/data":void 0,"../../../framework/plugin/dialog/dialogMgr":void 0,"../../../framework/plugin/notice/noticeConstants":void 0,"../../../framework/plugin/notice/noticeMgr":void 0,"../../../framework/plugin/platform/platform":void 0,"../../../framework/plugin/sound/soundMgr":void 0}],UISideBar:[function(t,e,o){"use strict";cc._RF.push(e,"9af02zk9QFIMp7PHW689dxV","UISideBar");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../framework/plugin/notice/noticeConstants"),c=t("../../../framework/plugin/notice/noticeMgr"),s=t("../../../framework/plugin/sound/soundMgr"),p=cc._decorator,d=p.ccclass,l=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sideBarAnimationNode=null,e.bottomRunning=!1,e.bottomState=0,e}return a(e,t),e.prototype.onLoad=function(){this.bottomState=1,this.node.y=450,this.sideBarAnimationNode.active=!1},e.prototype.showContent=function(){var t=this;this.bottomRunning||(this.bottomRunning=!0,this.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,450)),cc.callFunc(function(){t.bottomRunning=!1,t.bottomState=1}))),this.sideBarAnimationNode.active=!0,this.sideBarAnimationNode.scale=.52,this.sideBarAnimationNode.runAction(cc.sequence(cc.scaleTo(.1,1),cc.scaleTo(.1,.52),cc.callFunc(function(){t.sideBarAnimationNode.active=!1}))),c.noticeMgr.instance.emit(r.NEName.UPDATE_SIDEBAR_STATE,{state:1}))},e.prototype.hideContent=function(){var t=this;this.bottomRunning||(this.bottomRunning=!0,this.node.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,0)),cc.callFunc(function(){t.bottomRunning=!1,t.bottomState=0}))),this.sideBarAnimationNode.active=!0,this.sideBarAnimationNode.scale=.52,this.sideBarAnimationNode.runAction(cc.sequence(cc.scaleTo(.1,1),cc.scaleTo(.1,.52),cc.callFunc(function(){t.sideBarAnimationNode.active=!1}))),c.noticeMgr.instance.emit(r.NEName.UPDATE_SIDEBAR_STATE,{state:0}))},e.prototype.btnSideBarClick=function(){switch(s.soundMgr.instance.playEffect("button_cat"),this.bottomState){case 0:this.showContent();break;case 1:this.hideContent()}},i([l(cc.Node)],e.prototype,"sideBarAnimationNode",void 0),i([d],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../framework/plugin/notice/noticeConstants":void 0,"../../../framework/plugin/notice/noticeMgr":void 0,"../../../framework/plugin/sound/soundMgr":void 0}],game:[function(t,e,o){"use strict";cc._RF.push(e,"615c0s3fehCEqOp6uODk7yp","game");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../cat/script/prefab/cat"),c=t("../../../framework/data/cat/catData"),s=t("../../../framework/data/data"),p=t("../../../framework/db/const/dbConsts"),d=t("../../../framework/db/db"),l=t("../../../framework/plugin/dialog/dialogMgr"),u=t("../../../framework/plugin/notice/noticeConstants"),h=t("../../../framework/plugin/notice/noticeMgr"),f=t("../../../framework/plugin/sound/soundMgr"),m=t("../prefab/ui/UIGame"),g=cc._decorator,b=g.ccclass,y=g.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uiNode=null,e.uiPrefab=null,e.catNode=null,e.catPrefab=null,e.cat=null,e.uiGame=null,e}return a(e,t),e.prototype.onLoad=function(){c.catData.instance.init(),this.cat=cc.instantiate(this.catPrefab).getComponent(r.default),this.cat.initWithData(c.catData.instance.format()),this.catNode.addChild(this.cat.node),this.uiGame=cc.instantiate(this.uiPrefab).getComponent(m.default),this.uiNode.addChild(this.uiGame.node),f.soundMgr.instance.playBackGround("bgm"),s.data.instance.signIn.todayIsReceived||l.dialogMgr.instance.show("signInDialog")},e.prototype.onEnable=function(){h.noticeMgr.instance.on(u.NEName.SET_CAT_PART,this.onSetCatPartHandler,this),h.noticeMgr.instance.on(u.NEName.VIEW_CAT,this.onViewCatHandler,this),h.noticeMgr.instance.on(u.NEName.UPDATE_SIDEBAR_STATE,this.onUpdateSideBarStateHandler,this),h.noticeMgr.instance.on(u.NEName.CLEAR_CAT_GROUP,this.onClearCatGroupHandler,this),h.noticeMgr.instance.on(u.NEName.REFRESH_CAT_VIEW,this.onRefreshCatViewHandler,this),h.noticeMgr.instance.on(u.NEName.ADD_CAT_SUB_PART,this.onAddCatSubPartHandler,this),h.noticeMgr.instance.on(u.NEName.REMOVE_CAT_SUB_PART,this.onRemoveCatSubPartHandler,this)},e.prototype.onDisable=function(){h.noticeMgr.instance.off(u.NEName.SET_CAT_PART,this.onSetCatPartHandler,this),h.noticeMgr.instance.off(u.NEName.VIEW_CAT,this.onViewCatHandler,this),h.noticeMgr.instance.off(u.NEName.UPDATE_SIDEBAR_STATE,this.onUpdateSideBarStateHandler,this),h.noticeMgr.instance.off(u.NEName.CLEAR_CAT_GROUP,this.onClearCatGroupHandler,this),h.noticeMgr.instance.off(u.NEName.REFRESH_CAT_VIEW,this.onRefreshCatViewHandler,this),h.noticeMgr.instance.off(u.NEName.ADD_CAT_SUB_PART,this.onAddCatSubPartHandler,this),h.noticeMgr.instance.off(u.NEName.REMOVE_CAT_SUB_PART,this.onRemoveCatSubPartHandler,this)},e.prototype.onSetCatPartHandler=function(t){var e=d.db.game.part[t.partId];switch(e.actionType){case p.PartActionType.DIALOG:l.dialogMgr.instance.show(e.resources[0],e.resources[1]);break;case p.PartActionType.EXCHANGE:c.catData.instance.addPart(t.partId)}},e.prototype.onViewCatHandler=function(t){switch(t.state){case 0:this.cat.playAnimation();break;case 2:this.cat.stopAnimation()}},e.prototype.onUpdateSideBarStateHandler=function(t){switch(t.state){case 0:this.cat.viewState();break;case 1:this.cat.makeState()}},e.prototype.onClearCatGroupHandler=function(t){c.catData.instance.removeGroup(t.groupId)},e.prototype.onRefreshCatViewHandler=function(){this.cat.initWithData(c.catData.instance.format())},e.prototype.onAddCatSubPartHandler=function(t){this.cat.addSubPart(t.id)},e.prototype.onRemoveCatSubPartHandler=function(t){this.cat.removeSubPart(t.id)},i([y(cc.Node)],e.prototype,"uiNode",void 0),i([y(cc.Prefab)],e.prototype,"uiPrefab",void 0),i([y(cc.Node)],e.prototype,"catNode",void 0),i([y(cc.Prefab)],e.prototype,"catPrefab",void 0),i([b],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../cat/script/prefab/cat":void 0,"../../../framework/data/cat/catData":void 0,"../../../framework/data/data":void 0,"../../../framework/db/const/dbConsts":void 0,"../../../framework/db/db":void 0,"../../../framework/plugin/dialog/dialogMgr":void 0,"../../../framework/plugin/notice/noticeConstants":void 0,"../../../framework/plugin/notice/noticeMgr":void 0,"../../../framework/plugin/sound/soundMgr":void 0,"../prefab/ui/UIGame":"UIGame"}],photoItem:[function(t,e,o){"use strict";cc._RF.push(e,"7301f3QwW9FKJpfTNG/TfMF","photoItem");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.PhotoItemEvent=void 0;var r,c=t("../../../../cat/script/prefab/cat"),s=t("../../../../framework/data/data"),p=t("../../../../framework/plugin/component/eventComponent");(function(t){t.DELETE="DELETE",t.IMPORT="IMPORT"})(r=o.PhotoItemEvent||(o.PhotoItemEvent={}));var d=cc._decorator,l=d.ccclass,u=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.emptyNode=null,e.contentNode=null,e.catPrefab=null,e.actionNode=null,e.photoId="",e.cat=null,e}return a(e,t),e.prototype.init=function(t){this.photoId="",this.cat||(this.cat=cc.instantiate(this.catPrefab).getComponent(c.default),this.cat.node.scale=.3,this.contentNode.addChild(this.cat.node)),""!==t&&s.data.instance.photo.data[t]?(this.photoId=t,this.emptyNode.active=!1,this.actionNode.active=!0,this.cat.node.opacity=255,this.cat.initWithData(s.data.instance.photo.data[t])):(this.emptyNode.active=!0,this.actionNode.active=!1,this.cat.node.opacity=0)},e.prototype.btnDeleteClick=function(){this.runHandler(r.DELETE,{id:this.photoId})},e.prototype.btnImportClick=function(){this.runHandler(r.IMPORT,{id:this.photoId})},i([u(cc.Node)],e.prototype,"emptyNode",void 0),i([u(cc.Node)],e.prototype,"contentNode",void 0),i([u(cc.Prefab)],e.prototype,"catPrefab",void 0),i([u(cc.Node)],e.prototype,"actionNode",void 0),i([l],e)}(p.eventComponent);o.default=h,cc._RF.pop()},{"../../../../cat/script/prefab/cat":void 0,"../../../../framework/data/data":void 0,"../../../../framework/plugin/component/eventComponent":void 0}],photo:[function(t,e,o){"use strict";cc._RF.push(e,"ede35mXXiZPMJgBEG2mHI6y","photo");var n,a=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var a,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(r=(i<3?a(r):i>3?a(e,o,r):a(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../../framework/data/cat/catData"),c=t("../../../../framework/data/data"),s=t("../../../../framework/plugin/dialog/dialogMgr"),p=t("../../../../framework/plugin/platform/platform"),d=t("./photoItem"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentNode=null,e.itemPrefab=null,e.pageLabel=null,e.btnPrev=null,e.btnNext=null,e.items=[],e.pageIndex=0,e}return a(e,t),e.prototype.onLoad=function(){for(var t=0;t<3;t++){var e=cc.instantiate(this.itemPrefab).getComponent(d.default);e.addHandler(d.PhotoItemEvent.DELETE,this.onPhotoItemDeleteHandler,this),e.addHandler(d.PhotoItemEvent.IMPORT,this.onPhotoItemImportHandler,this),e.node.setPosition(cc.v2(124+236*t,-5)),this.contentNode.addChild(e.node),this.items.push(e)}},e.prototype.onEnable=function(){this.updateView()},e.prototype.onPhotoItemDeleteHandler=function(t){var e=this,o=t.id;s.dialogMgr.instance.show("msgDialog",{okLabel:"\u5220\u9664",label:"\u662f\u5426\u786e\u8ba4\u5220\u9664\u8be5\u7167\u7247\uff1f",okHandler:function(){c.data.instance.photo.removePhoto(o),e.updateView(),p.platform.instance.showToast("\u5220\u9664\u6210\u529f")}})},e.prototype.onPhotoItemImportHandler=function(t){var e=t.id;s.dialogMgr.instance.show("msgDialog",{okLabel:"\u5bfc\u5165",label:"\u5bfc\u5165\u6570\u636e\u4f1a\u8986\u76d6\u73b0\u6709\u88c5\u626e\uff0c\u662f\u5426\u5bfc\u5165\u6570\u636e\uff1f",okHandler:function(){r.catData.instance.replaceWithData(c.data.instance.photo.data[e]),p.platform.instance.showToast("\u5bfc\u5165\u6210\u529f")}})},e.prototype.updateView=function(){var t=Object.keys(c.data.instance.photo.data),e=Math.ceil(t.length/3);(this.pageIndex>=e||this.pageIndex<0)&&(this.pageIndex=e-1),this.pageLabel.string="\u76f8 \u518c\uff08"+(this.pageIndex+1)+"/"+e+"\uff09",this.btnPrev.interactable=this.pageIndex>0,this.btnNext.interactable=this.pageIndex<e-1;for(var o=0;o<this.items.length;o++){var n="";3*this.pageIndex+o<t.length&&(n=t[3*this.pageIndex+o]),""===n?this.items[o].init(""):this.items[o].init(n)}},e.prototype.btnPrevPageClick=function(){this.pageIndex<=0||(this.pageIndex-=1,this.updateView())},e.prototype.btnNextPageClick=function(){var t=Object.keys(c.data.instance.photo.data);this.pageIndex>=Math.ceil(t.length/3)-1||(this.pageIndex+=1,this.updateView())},i([h(cc.Node)],e.prototype,"contentNode",void 0),i([h(cc.Node)],e.prototype,"itemPrefab",void 0),i([h(cc.Label)],e.prototype,"pageLabel",void 0),i([h(cc.Button)],e.prototype,"btnPrev",void 0),i([h(cc.Button)],e.prototype,"btnNext",void 0),i([u],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../framework/data/cat/catData":void 0,"../../../../framework/data/data":void 0,"../../../../framework/plugin/dialog/dialogMgr":void 0,"../../../../framework/plugin/platform/platform":void 0,"./photoItem":"photoItem"}]},{},["photo","photoItem","UIGame","game","UIMenu","UISideBar"]);