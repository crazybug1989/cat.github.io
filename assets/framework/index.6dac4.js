window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({GuideCompleteButton:[function(t,e,o){"use strict";cc._RF.push(e,"d9e777xbMtHE5E7/h2ONTk9","GuideCompleteButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../data/guide/guideTriggle"),s=t("../../../db/const/dbConsts"),c=cc._decorator,d=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=new cc.Component.EventHandler;t.target=this.node,t.component="GuideCompleteButton",t.handler="customClickEvent",t.customEventData="",console.log(this.node.name),this.node.getComponent(cc.Button).clickEvents.splice(0,0,t)},e.prototype.customClickEvent=function(){a.guideTriggle.instance.testComplete(s.GuideCompleteConditionType.RECT_TOUCH)},r([d],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../data/guide/guideTriggle":"guideTriggle","../../../db/const/dbConsts":"dbConsts"}],GuideCompleteTouch:[function(t,e,o){"use strict";cc._RF.push(e,"c2776Dg53BO1phJUk4+vQ7r","GuideCompleteTouch");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../data/guide/guideTriggle"),s=t("../../../db/const/dbConsts"),c=cc._decorator,d=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTouchStart=!1,e}return i(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchStart,this),this.node._touchListener.setSwallowTouches(!1)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onTouchStart=function(){this.isTouchStart=!0},e.prototype.onTouchMove=function(){},e.prototype.onTouchEnd=function(){this.isTouchStart&&a.guideTriggle.instance.testComplete(s.GuideCompleteConditionType.RECT_TOUCH),this.isTouchStart=!1},e.prototype.onTouchCancel=function(){this.isTouchStart=!1},r([d],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../data/guide/guideTriggle":"guideTriggle","../../../db/const/dbConsts":"dbConsts"}],IPlatform:[function(t,e,o){"use strict";cc._RF.push(e,"34168ub6qFJxae+x9lUHU+Q","IPlatform"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],UIBackGround:[function(t,e,o){"use strict";cc._RF.push(e,"abebaU6+6tA6o+/LRpllktv","UIBackGround");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){var t=cc.winSize.width/this.node.width,e=cc.winSize.height/this.node.height;this.node.scale=Math.max(t,e)},r([s],e)}(cc.Component));o.default=c,cc._RF.pop()},{}],achivData:[function(t,e,o){"use strict";cc._RF.push(e,"69998KdxJRAf6IaUujhu7tI","achivData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.achivData=void 0;var r=t("../../../db/db"),a=t("../../../db/game/dbGameUtils"),s=t("../../../plugin/notice/noticeConstants"),c=t("../../../plugin/notice/noticeMgr"),d=t("../../condition/condition"),p=t("../../const/dataConsts"),u=t("../../core/baseData"),l=t("../../data"),h=function(t){function e(){var e=t.call(this)||this;return e.data={},e.storageKey="achivTask",e}return i(e,t),e.prototype.onReadLater=function(){this.isNewData&&this.initTask()},e.prototype.initTask=function(){for(var t in r.db.game.achivTask){var e=r.db.game.achivTask[t].condition.type;this.data[e]||(d.condition.instance.classMap[e]?(this.data[e]={index:0,state:p.TaskState.INCOMPLETE,condition:new d.condition.instance.classMap[e]},this.resetTask(e)):console.error("\u6210\u5c31\u4efb\u52a1\u6761\u4ef6\u6ca1\u6709\u5173\u8054\u8868 -> "+e))}},e.prototype.resetTask=function(t){var e=a.dbGameUtils.achivTask.data[t];if(this.data[t].index!==e.length){var o=this.data[t].condition.getProgress();this.data[t].condition.initTask(e[this.data[t].index].condition.params),this.data[t].condition.setProgress(o),this.data[t].state=this.data[t].condition.finish()?p.TaskState.COMPLETE:p.TaskState.INCOMPLETE}else this.data[t].index=e.length-1},e.prototype.modifyCondtionValue=function(t,e){this.data[t]&&this.data[t].state!==p.TaskState.OVER&&(this.data[t].condition.modifyConditionValue(e),this.data[t].condition.finish()&&this.data[t].state===p.TaskState.INCOMPLETE?(this.data[t].state=p.TaskState.COMPLETE,c.noticeMgr.instance.emit(s.NEName.ACHIV_TASK_STATE_UPDATE,{type:t})):this.data[t].condition.finish()||this.data[t].state!==p.TaskState.COMPLETE||(this.data[t].state=p.TaskState.INCOMPLETE,c.noticeMgr.instance.emit(s.NEName.ACHIV_TASK_STATE_UPDATE,{type:t})))},e.prototype.getProgress=function(t){return[this.data[t].condition.getProgress(),this.data[t].condition.getCompleteProgress()]},e.prototype.receive=function(t,e){void 0===e&&(e=1),this.data[t].state===p.TaskState.COMPLETE&&(this.data[t].state=p.TaskState.OVER,l.data.instance.inven.addItems(a.dbGameUtils.achivTask.data[t][this.data[t].index].rewards,e),this.data[t].index+=1,this.resetTask(t),c.noticeMgr.instance.emit(s.NEName.ACHIV_TASK_RECEIVED,{type:t,multi:e}))},e.prototype.formatData=function(){var t={data:{}};for(var e in this.data)t.data[e]={},t.data[e].index=this.data[e].index,t.data[e].state=this.data[e].state,t.data[e].condition=this.data[e].condition.formatData();return t},e.prototype.parseData=function(t){this.initTask();var e=this.readProperty(t,"data",{});for(var o in e)this.data[o].index=e[o].index,this.data[o].state=e[o].state,this.data[o].condition.parseData(e[o].condition)},e}(u.baseData);o.achivData=h,cc._RF.pop()},{"../../../db/db":"db","../../../db/game/dbGameUtils":"dbGameUtils","../../../plugin/notice/noticeConstants":"noticeConstants","../../../plugin/notice/noticeMgr":"noticeMgr","../../condition/condition":"condition","../../const/dataConsts":"dataConsts","../../core/baseData":"baseData","../../data":"data"}],actionData:[function(t,e,o){"use strict";cc._RF.push(e,"b1df7SkX6RNNYM1B0Q8c3OV","actionData"),Object.defineProperty(o,"__esModule",{value:!0}),o.actionData=void 0;o.actionData=function(){this.id=0,this.frameCount=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.scaleX=0,this.scaleY=0,this.collideRect=[],this.interval=0,this.frames={}},cc._RF.pop()},{}],advertBase:[function(t,e,o){"use strict";cc._RF.push(e,"e177aoS9HZMObT5wZSA12kx","advertBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.advertBase=void 0;var n=function(){function t(){this.IDMap={}}return t.prototype.init=function(){},t.prototype.showBanner=function(){return""},t.prototype.hideBanner=function(){},t.prototype.showVideo=function(t){t.closeCallBack&&t.closeCallBack(!0)},t.prototype.showInstl=function(){},t.prototype.showGrid=function(){return""},t.prototype.hideGrid=function(){},t.prototype.findCustom=function(){},t.prototype.showCustom=function(){return""},t.prototype.hideCustom=function(){},t}();o.advertBase=n,cc._RF.pop()},{}],advertConstants:[function(t,e,o){"use strict";cc._RF.push(e,"95906rf8HpPBr6UyrAQqzA0","advertConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.AdvertID=void 0,o.AdvertID||(o.AdvertID={}),cc._RF.pop()},{}],advertOppoCustomComponent:[function(t,e,o){"use strict";cc._RF.push(e,"a491eQOXy5ILK3FlBo+fcGt","advertOppoCustomComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../../../db/db"),c=t("../../advert");(function(t){t[t.ICON=0]="ICON",t[t.BANNER=1]="BANNER"})(a||(a={}));var d=cc._decorator,p=d.ccclass,u=(d.requireComponent,d.property),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentNode=null,e.image=null,e.imageType=a.ICON,e.advertCode="",e.initShow=!1,e.showDelay=0,e.resize=!1,e.resizeDelay=1,e.resizeSize=cc.Size.ZERO,e.refresh=!1,e.refreshInterval=60,e.useCache=!1,e.resizeCallBack=null,e.showCallBack=null,e.loadBeginTime=0,e}return i(e,t),e.prototype.onEnable=function(){this.contentNode.active=!1,s.db.switch.data.native_switch.state&&(this.loadBeginTime=Date.now(),this.onUpdateCustomAd(),this.showDelay=s.db.switch.data.master_switch.state,this.initShow&&this.show(),this.refresh&&this.schedule(this.onUpdateCustomAd,this.refreshInterval))},e.prototype.onDisable=function(){console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a1"),c.advert.instance.hideCustom(this.advertCode),this.refresh&&this.unschedule(this.onUpdateCustomAd)},e.prototype.show=function(){var t=this;this.resize&&this.scheduleOnce(function(){t.node.setContentSize(t.resizeSize),t.resizeCallBack&&t.resizeCallBack()},this.resizeDelay)},e.prototype.showCustomAd=function(){""!==this.advertCode?c.advert.instance.showCustom({code:this.advertCode,type:this.imageType,sprite:this.image,useCache:this.useCache,clickCallBack:this.customClickHandler.bind(this),loadedCallBack:this.customLoadedHandler.bind(this)}):console.error("\u539f\u751f\u5e7f\u544a\u672a\u8bbe\u7f6e\u5e7f\u544aID")},e.prototype.onUpdateCustomAd=function(){this.showCustomAd()},e.prototype.customClickHandler=function(){},e.prototype.showCustomAdNode=function(){this.contentNode.active=!0,this.showCallBack&&this.showCallBack()},e.prototype.customLoadedHandler=function(){var t=this,e=this.showDelay-(Date.now()-this.loadBeginTime)/1e3;e>0?this.scheduleOnce(function(){t.showCustomAdNode()},e):this.showCustomAdNode()},e.prototype.btnReportClick=function(){var t=c.advert.instance.findCustom(this.advertCode);t&&t.reportAdClick({adId:t.adId})},e.prototype.btnCloseClick=function(){this.contentNode.active=!1,console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a2"),c.advert.instance.hideCustom(this.advertCode)},r([u(cc.Node)],e.prototype,"contentNode",void 0),r([u(cc.Sprite)],e.prototype,"image",void 0),r([u({type:cc.Enum(a)})],e.prototype,"imageType",void 0),r([u],e.prototype,"advertCode",void 0),r([u],e.prototype,"initShow",void 0),r([u({visible:function(){return this.initShow}})],e.prototype,"showDelay",void 0),r([u({visible:function(){return this.initShow}})],e.prototype,"resize",void 0),r([u({visible:function(){return this.resize}})],e.prototype,"resizeDelay",void 0),r([u({visible:function(){return this.resize}})],e.prototype,"resizeSize",void 0),r([u],e.prototype,"refresh",void 0),r([u({visible:function(){return this.refresh}})],e.prototype,"refreshInterval",void 0),r([u],e.prototype,"useCache",void 0),r([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../db/db":"db","../../advert":"advert"}],advertOppo:[function(t,e,o){"use strict";cc._RF.push(e,"78e0buks45DCqHKigZTBrsw","advertOppo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertOppo=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adBannerMap={},e.adVideo=null,e.videoCloseHandler=null,e.adCustomMap={},e.adCustomCache=null,e.adGridMap={},e.bannerIdIndex=0,e.customIdIndex=0,e.gridIdIndex=0,e}return i(e,t),e.prototype.init=function(){},e.prototype.showBanner=function(t,e){var o="BANNER_"+this.bannerIdIndex++,n=qg.createBannerAd({adUnitId:t,style:{left:0,top:0,width:300,height:0}});this.adBannerMap[o]=n,n.onLoad(function(){console.log("BANNER\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.onError(function(t){console.error("BANNER\u5e7f\u544a\u5f02\u5e38",t)}),n.show().then(function(){console.log("BANNER\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("BANNER\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)});var i=qg.getSystemInfoSync();return n.onResize(function(t){if(console.log("BANNER\u5bbd\u5ea6\uff1a"+t.width+", BANNER\u9ad8\u5ea6\uff1a"+t.height),e){var o=i.pixelRatio*i.windowWidth,r=i.pixelRatio*i.windowHeight/cc.winSize.height,a=(o-r*cc.winSize.width)/2,s=((cc.winSize.width/2+e.position.x)*r+a)/i.pixelRatio,c=(cc.winSize.height/2-e.position.y)*r/i.pixelRatio;n.style.width=e.width||300,n.style.left=s,n.style.top=c}else n.style.left=(i.screenWidth-t.width)/2,n.style.top=i.screenHeight-t.height+1}),o},e.prototype.hideBanner=function(t){this.adBannerMap[t]&&(this.adBannerMap[t].hide(),this.adBannerMap[t].destroy(),delete this.adBannerMap[t])},e.prototype.showVideo=function(t){var e=this;this.videoCloseHandler=t.closeCallBack,this.adVideo?this.adVideo=qg.createRewardedVideoAd({posId:this.IDMap[t.adId]}):(this.adVideo=qg.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}),this.adVideo.onError(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),this.adVideo.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed",t.isEnded),e.videoCloseHandler&&e.videoCloseHandler(t.isEnded)}),this.adVideo.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")})),this.adVideo.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.adVideo.load().then(function(){return e.adVideo.show()})})},e.prototype.showInstl=function(){},e.prototype.showGrid=function(t,e){var o=this;if(!(qg.getSystemInfoSync().platformVersionCode<1076)){var n="GRID_"+this.gridIdIndex++,i=null;switch(e.type){case 0:i=qg.createGameBannerAd({adUnitId:t}),this.adGridMap[n]=i,i.onLoad(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),i.show().then(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.log("\u4e92\u63a8\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t.errCode,t.errMsg)});break;case 1:i=qg.createGamePortalAd({adUnitId:t}),this.adGridMap[n]=i,i.onLoad(function(){console.log("\u4e92\u63a8\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),i.show().then(function(){console.log("show success")}).catch(function(t){console.log("show fail with:"+t.errCode+","+t.errMsg)})}),i.onClose(function(){e.closeCallBack&&e.closeCallBack(),o.hideGrid(n)})}return n}console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u7248\u672c\u53f7\u4f4e\u4e8e1076\uff0c\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.hideGrid=function(t){this.adGridMap[t]&&(this.adGridMap[t].destroy(),delete this.adGridMap[t])},e.prototype.loadCustomSprite=function(t,e,o,n){var i=this,r="";switch(t){case 0:r=o.icon;break;case 1:r=o.imgUrlList.length>0?o.imgUrlList[0]:""}console.log("\u539f\u751f\u663e\u793a",t,r),""!==r&&cc.assetManager.loadRemote(r,function(t,o){t?console.error("\u539f\u751f\u5e7f\u544aICON\u52a0\u8f7d\u5931\u8d25",i.adCustomCache.icon,t):(console.log("\u539f\u751f\u8d44\u6e90\u52a0\u8f7d\u6210\u529f",o instanceof cc.Texture2D),e.spriteFrame=new cc.SpriteFrame(o),n&&n())})},e.prototype.showCustom=function(t){var e=this;this.adCustomMap[t.code]&&(console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a3"),this.hideCustom(t.code));var o=qg.createNativeAd({adUnitId:t.code});return this.adCustomMap[t.code]=o,o.onLoad(function(n){if(console.log("\u539f\u751f\u5e7f\u544aEND",Date.now(),n.adList.length),0!==n.adList.length){console.log("\u539f\u751f\u5e7f\u544a\u6570\u636e",n.adList[0].icon),e.adCustomCache=n.adList.pop(),o.reportAdShow({adId:e.adCustomCache.adId});var i=t.sprite;e.loadCustomSprite(t.type,i,e.adCustomCache,t.loadedCallBack),i.node.targetOff(e),i.node.on(cc.Node.EventType.TOUCH_END,function(){o.reportAdClick({adId:e.adCustomCache.adId}),t.clickCallBack&&t.clickCallBack()},e)}}),o.onError(function(t){console.error("\u539f\u751f\u5e7f\u544a\u5f02\u5e38",t.code,t.errMsg)}),console.log("\u539f\u751f\u5e7f\u544aBEGIN",Date.now()),o.load(),this.adCustomCache&&t.useCache&&this.loadCustomSprite(t.type,t.sprite,this.adCustomCache,t.loadedCallBack),""},e.prototype.hideCustom=function(t){console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a",t),this.adCustomMap[t]&&(this.adCustomMap[t].destroy(),delete this.adCustomMap[t])},e}(t("./advertBase").advertBase);o.advertOppo=r,cc._RF.pop()},{"./advertBase":"advertBase"}],advertQQ:[function(t,e,o){"use strict";cc._RF.push(e,"907ecd6y0dG86fXAtta+E5h","advertQQ");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertQQ=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adVideo=null,e.videoCloseHandler=null,e.adBannerMap={},e.adGridMap={},e.adCustomMap={},e.bannerIdIndex=0,e.customIdIndex=0,e.gridIdIndex=0,e}return i(e,t),e.prototype.init=function(){},e.prototype.showBanner=function(t,e){var o=qq.getSystemInfoSync(),n="BANNER_"+this.bannerIdIndex++,i=qq.createBannerAd({adUnitId:t,style:{left:0,top:0,width:300,height:0}});return this.adBannerMap[n]=i,i.onError(function(t){console.error("BANNER\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),i.onResize(function(t){console.log("BANNER Resize\u89e6\u53d1",t.width,t.height),e?(i.style.width=e.width,i.style.left=e.left,i.style.top=e.top):(i.style.width=300,i.style.left=(o.screenWidth-t.width)/2,i.style.top=o.screenHeight-t.height+1)}),i.show().then(function(){console.log("BANNER\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("BANNER\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)}),n},e.prototype.hideBanner=function(t){this.adBannerMap[t]&&(this.adBannerMap[t].hide(),this.adBannerMap[t].destroy(),delete this.adBannerMap[t])},e.prototype.showVideo=function(t){var e=this;this.videoCloseHandler=t.closeCallBack,this.adVideo?this.adVideo=qq.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}):(this.adVideo=qq.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}),this.adVideo.onError(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),this.adVideo.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed",t.isEnded),e.videoCloseHandler&&e.videoCloseHandler(t.isEnded)}),this.adVideo.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")})),this.adVideo.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.adVideo.load().then(function(){return e.adVideo.show()})})},e.prototype.showInstl=function(t){var e=qq.createInterstitialAd({adUnitId:t});e.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.onError(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),e.onClose(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed")}),e.show().catch(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.load().then(function(){return e.show()})})},e.prototype.showGrid=function(t,e){var o="GRID_"+this.gridIdIndex++,n=qq.createAppBox({adUnitId:t,adIntervals:30,style:{left:0,top:0,width:300,height:0},adTheme:"white",gridCount:5});this.adGridMap[o]=n,n.onError(function(t){console.error("\u683c\u5b50\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),n.onLoad(function(){console.log("\u683c\u5b50\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.load().then(function(){n.show().then(function(){console.log("\u683c\u5b50\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.log("\u683c\u5b50\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)})});var i=qq.getSystemInfoSync();return n.onResize(function(t){console.log("\u683c\u5b50\u5e7f\u544aResize\u63a5\u53e3",t),e?(n.style.left=e.left,n.style.top=e.top,n.style.width=e.width):(n.style.left=(i.screenWidth-t.width)/2,n.style.top=i.screenHeight-t.height+1)}),o},e.prototype.hideGrid=function(){},e.prototype.showCustom=function(t){var e="CUSTOM_"+this.customIdIndex++,o=qq.createBlockAd({adUnitId:t.code,size:1,orientation:"landscape",style:{left:0,top:0}});this.adCustomMap[e]=o,o.onError(function(t){console.error("\u539f\u751f\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),o.onLoad(function(){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),o.show().then(function(){console.log("\u539f\u751f\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u539f\u751f\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)});var n=qq.getSystemInfoSync();return o.onResize(function(e){console.log("\u539f\u751f\u5e7f\u544aResize\u63a5\u53e3",e),t.style?(o.style.left=t.style.left,o.style.top=t.style.top):(o.style.left=(n.screenWidth-e.width)/2,o.style.top=n.screenHeight-e.height+1)}),e},e.prototype.hideCustom=function(t){this.adCustomMap[t]&&(this.adCustomMap[t].hide(),this.adCustomMap[t].destroy(),delete this.adBannerMap[t])},e}(t("./advertBase").advertBase);o.advertQQ=r,cc._RF.pop()},{"./advertBase":"advertBase"}],advertTT:[function(t,e,o){"use strict";cc._RF.push(e,"fe625Pv5iNG1bwEpXAB3fik","advertTT");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertTT=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adVideo=null,e.videoCloseHandler=null,e.adBannerMap={},e.adGridMap={},e.adCustomMap={},e.bannerIdIndex=0,e.customIdIndex=0,e.gridIdIndex=0,e}return i(e,t),e.prototype.init=function(){},e.prototype.showBanner=function(t,e){var o=tt.getSystemInfoSync(),n="BANNER_"+this.bannerIdIndex++,i=tt.createBannerAd({adUnitId:t,adIntervals:30,style:{left:0,top:0,width:0}});return this.adBannerMap[n]=i,i.onError(function(t){console.error("BANNER\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),i.onResize(function(t){console.log("BANNER Resize\u89e6\u53d1",t.width,t.height),e?(i.style.width=e.width,i.style.left=e.left,i.style.top=e.top):(i.style.width=300,i.style.left=(o.screenWidth-t.width)/2,i.style.top=o.screenHeight-t.height+1)}),i.show().then(function(){console.log("BANNER\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("BANNER\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)}),n},e.prototype.hideBanner=function(t){this.adBannerMap[t]&&(this.adBannerMap[t].hide(),this.adBannerMap[t].destroy(),delete this.adBannerMap[t])},e.prototype.showVideo=function(t){var e=this;this.videoCloseHandler=t.closeCallBack,this.adVideo?this.adVideo=tt.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}):(this.adVideo=tt.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}),this.adVideo.onError(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),this.adVideo.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed",t.isEnded),e.videoCloseHandler&&e.videoCloseHandler(t.isEnded)}),this.adVideo.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")})),this.adVideo.load(),this.adVideo.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.adVideo.load().then(function(){return e.adVideo.show()})})},e.prototype.showInstl=function(t){var e=tt.createInterstitialAd({adUnitId:t});e.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.onError(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),e.onClose(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed")}),e.load.then(function(){e.show().catch(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)})})},e.prototype.showGrid=function(){return""},e.prototype.hideGrid=function(){},e.prototype.showCustom=function(){return""},e.prototype.hideCustom=function(){},e}(t("./advertBase").advertBase);o.advertTT=r,cc._RF.pop()},{"./advertBase":"advertBase"}],advertVivoCustomComponent:[function(t,e,o){"use strict";cc._RF.push(e,"850d4BAzCRDS6qm7RTJPEQ+","advertVivoCustomComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a,s=t("../../../../db/db"),c=t("../../advert");(function(t){t[t.ICON=0]="ICON",t[t.BANNER=1]="BANNER",t[t.INSERT=2]="INSERT"})(a||(a={}));var d=cc._decorator,p=d.ccclass,u=(d.requireComponent,d.property),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.contentNode=null,e.image=null,e.linkNodes=[],e.imageType=a.ICON,e.advertCode="",e.showDelay=0,e.mustShow=!1,e.resize=!1,e.resizeDelay=1,e.resizeSize=cc.Size.ZERO,e.refresh=!1,e.refreshInterval=60,e.resizeCallBack=null,e.showCallBack=null,e.loadBeginTime=0,e}return i(e,t),e.prototype.onEnable=function(){this.hideView(),this.showDelay=s.db.toggle.data.insert_switch.time,this.showCustomAd(),this.refresh&&this.schedule(this.onUpdateCustomAd,this.refreshInterval)},e.prototype.onDisable=function(){console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a1"),""!==this.advertCode&&(c.advert.instance.hideCustom(this.advertCode),this.advertCode=""),this.unscheduleAllCallbacks()},e.prototype.showView=function(){this.contentNode.active=!0;for(var t=0;t<this.linkNodes.length;t++)this.linkNodes[t].active=!0},e.prototype.hideView=function(){this.contentNode.active=!1;for(var t=0;t<this.linkNodes.length;t++)this.linkNodes[t].active=!1},e.prototype.showCustomAd=function(){var t=this,e=c.advert.instance.showCustom({code:this.advertCode,type:this.imageType,sprite:this.image,clickCallBack:this.customClickHandler.bind(this)});""!==e?(this.scheduleOnce(function(){t.showView(),t.resize&&t.scheduleOnce(function(){t.node.setContentSize(t.resizeSize),t.resizeCallBack&&t.resizeCallBack()},t.resizeDelay)},this.showDelay),this.advertCode=e,this.showCallBack&&this.showCallBack()):this.mustShow&&this.scheduleOnce(function(){t.showCustomAd()},2)},e.prototype.onUpdateCustomAd=function(){this.showCustomAd()},e.prototype.customClickHandler=function(){},e.prototype.btnReportClick=function(){console.log("\u5f00\u59cb\u4e0a\u62a5");var t=c.advert.instance.findCustom(this.advertCode);console.log("\u67e5\u627e\u539f\u751f\u5bf9\u8c61",t),t&&t.ad.reportAdClick({adId:t.data.adId.toString()})},e.prototype.btnCloseClick=function(){this.hideView(),console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a2"),c.advert.instance.hideCustom(this.advertCode)},r([u(cc.Node)],e.prototype,"contentNode",void 0),r([u(cc.Sprite)],e.prototype,"image",void 0),r([u(cc.Node)],e.prototype,"linkNodes",void 0),r([u({type:cc.Enum(a)})],e.prototype,"imageType",void 0),r([u],e.prototype,"advertCode",void 0),r([u],e.prototype,"showDelay",void 0),r([u],e.prototype,"mustShow",void 0),r([u],e.prototype,"resize",void 0),r([u({visible:function(){return this.resize}})],e.prototype,"resizeDelay",void 0),r([u({visible:function(){return this.resize}})],e.prototype,"resizeSize",void 0),r([u],e.prototype,"refresh",void 0),r([u({visible:function(){return this.refresh}})],e.prototype,"refreshInterval",void 0),r([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../db/db":"db","../../advert":"advert"}],advertVivo:[function(t,e,o){"use strict";cc._RF.push(e,"82bd6SBNlBLq6clqCDiWHb4","advertVivo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertVivo=void 0;var r=t("../platform/platform"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adBannerMap={},e.adVideo=null,e.videoCloseHandler=null,e.adCustomMap={},e.adInstl=null,e.bannerIdIndex=0,e.lastCustomInsertShowTime=0,e.gridIdIndex=0,e}return i(e,t),e.prototype.init=function(){var t=this;this.preloadCustom("4c250517b33a47b7b4ba55f8fc0a0893"),setTimeout(function(){t.preloadCustom("4f4216505e194d9d95224aa09039a2f9")},1e3),setTimeout(function(){t.preloadCustom("7d69f86b79e044b383d8d9054d1e6b21")},4e3)},e.prototype.showBanner=function(t,e){var o="BANNER_"+this.bannerIdIndex++,n=qg.createBannerAd({posId:t,adIntervals:30,style:{left:0,top:0}});this.adBannerMap[o]=n,n.onLoad(function(){console.log("BANNER\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.onError(function(t){console.error("BANNER\u5e7f\u544a\u5f02\u5e38",t)}),n.show().then(function(){console.log("BANNER\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("BANNER\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)});var i=qg.getSystemInfoSync();return n.onSize(function(t){console.log("BANNER\u5bbd\u5ea6\uff1a"+t.width+", BANNER\u9ad8\u5ea6\uff1a"+t.height),e?(n.style.left=e.left,n.style.top=e.top,n.style.width=e.width):(n.style.left=(i.screenWidth-t.width)/2,n.style.top=i.screenHeight-t.height+1)}),o},e.prototype.hideBanner=function(t){this.adBannerMap[t]&&(this.adBannerMap[t].hide(),this.adBannerMap[t].destroy(),delete this.adBannerMap[t])},e.prototype.showVideo=function(t){var e=this;this.videoCloseHandler=t.closeCallBack,this.adVideo?(this.adVideo=qg.createRewardedVideoAd({posId:this.IDMap[t.adId]}),this.adVideo.load()):this.adVideo=qg.createRewardedVideoAd({posId:this.IDMap[t.adId]}),this.adVideo.onError(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg),r.platform.instance.showToast("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}),this.adVideo.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed",t.isEnded),e.videoCloseHandler&&e.videoCloseHandler(t.isEnded)}),this.adVideo.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),e.adVideo.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)})})},e.prototype.showInstl=function(t){this.adInstl=qg.createInterstitialAd({posId:t}),this.adInstl.onError(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",t)}),this.adInstl.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5b8c\u6210")}),this.adInstl.show().then(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5b8c\u6210")}).catch(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u5c55\u793a\u5931\u8d25",JSON.stringify(t))})},e.prototype.showGrid=function(){return""},e.prototype.hideGrid=function(){},e.prototype.preloadCustom=function(t){var e=this;if(!this.adCustomMap[t]||1!==this.adCustomMap[t].state&&2!==this.adCustomMap[t].state){var o=qg.createNativeAd({posId:t});this.adCustomMap[t]={ad:o,state:0,data:null},o.onLoad(function(o){console.log("\u539f\u751f\u5e7f\u544aEND",Date.now(),o.adList.length),0!==o.adList.length&&(e.adCustomMap[t].state=1,e.adCustomMap[t].data=o.adList.pop())}),o.onError(function(o){e.adCustomMap[t].state=-1,console.error("\u539f\u751f\u5e7f\u544a\u5f02\u5e38",t,o.code,o.errMsg)}),console.log("\u539f\u751f\u5e7f\u544aBEGIN",Date.now()),o.load()}},e.prototype.findCustom=function(t){return this.adCustomMap[t]?this.adCustomMap[t]:null},e.prototype.loadCustomSprite=function(t,e,o,n){var i="";switch(t){case 0:i=o.icon;break;case 1:i=o.imgUrlList.length>0?o.imgUrlList[0]:"";break;case 2:i=o.imgUrlList.length>0?o.imgUrlList[0]:"",this.lastCustomInsertShowTime=Date.now()}console.log("\u539f\u751f\u663e\u793a",t,i),""!==i&&cc.assetManager.loadRemote(i,function(t,i){t?console.error("\u539f\u751f\u5e7f\u544aICON\u52a0\u8f7d\u5931\u8d25",o.icon,t):(console.log("\u539f\u751f\u8d44\u6e90\u52a0\u8f7d\u6210\u529f"),e.spriteFrame=new cc.SpriteFrame(i),n&&n())})},e.prototype.findReadyCustomAd=function(){for(var t in this.adCustomMap)if(1===this.adCustomMap[t].state)return t;return""},e.prototype.showCustom=function(t){var e=this;if(2===t.type&&Date.now()-this.lastCustomInsertShowTime<3e4)return"";""===t.code&&(t.code=this.findReadyCustomAd());var o=function(t){-1===n.adCustomMap[t].state&&setTimeout(function(){e.preloadCustom(t)},2e3)},n=this;for(var i in this.adCustomMap)o(i);if(console.log("showCustom",t.code),""!==t.code){this.adCustomMap[t.code].state=2;var r=this.adCustomMap[t.code].ad,a=this.adCustomMap[t.code].data;r.reportAdShow({adId:a.adId.toString()});var s=t.sprite;this.loadCustomSprite(t.type,s,a,t.loadedCallBack),s.node.targetOff(this),s.node.on(cc.Node.EventType.TOUCH_END,function(){r.reportAdClick({adId:a.adId}),t.clickCallBack&&t.clickCallBack()},this)}return t.code},e.prototype.hideCustom=function(t){console.log("\u91ca\u653e\u539f\u751f\u5e7f\u544a",t),this.adCustomMap[t]&&(delete this.adCustomMap[t],this.preloadCustom(t))},e}(t("./advertBase").advertBase);o.advertVivo=a,cc._RF.pop()},{"../platform/platform":"platform","./advertBase":"advertBase"}],advertWeb:[function(t,e,o){"use strict";cc._RF.push(e,"16862iDg2pMf69uXRHt2sR6","advertWeb");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertWeb=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.showVideo=function(t){t.closeCallBack&&t.closeCallBack(!0)},e.prototype.showGrid=function(t,e){return e.closeCallBack&&e.closeCallBack(),""},e.prototype.hideGrid=function(){},e}(t("./advertBase").advertBase);o.advertWeb=r,cc._RF.pop()},{"./advertBase":"advertBase"}],advertWxBannerComponent:[function(t,e,o){"use strict";cc._RF.push(e,"3d536bqZ2RCDLbzrYNEL5rk","advertWxBannerComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../advert"),s=cc._decorator,c=s.ccclass,d=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerId="",e}return i(e,t),e.prototype.onEnable=function(){var t=this;this.scheduleOnce(function(){t.bannerId=a.advert.instance.showBanner("adunit-ff5c4fd6265568f1",{position:t.node.getPosition().sub(cc.v2(t.node.width*t.node.anchorX,t.node.height*t.node.anchorY)),width:t.node.width})})},e.prototype.onDisable=function(){""!==this.bannerId&&a.advert.instance.hideBanner(this.bannerId)},r([c],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../advert":"advert"}],advertWxCustomComponent:[function(t,e,o){"use strict";cc._RF.push(e,"96d539c7iFEwaQnNnCHNi5P","advertWxCustomComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../advert"),s=cc._decorator,c=s.ccclass,d=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customId="",e}return i(e,t),e.prototype.onEnable=function(){var t=this.node.parent.convertToWorldSpaceAR(this.node.position),e=cc.find("Canvas").convertToNodeSpaceAR(t);this.customId=a.advert.instance.showCustom({code:"adunit-e19eb77f28c4c91d",x:e.x,y:e.y})},e.prototype.onDisable=function(){""!==this.customId&&a.advert.instance.hideCustom(this.customId)},r([c],e)}(cc.Component));o.default=d,cc._RF.pop()},{"../../advert":"advert"}],advertWx:[function(t,e,o){"use strict";cc._RF.push(e,"be436xxyKZGA7aAswCZlO/D","advertWx");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.advertWx=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.adVideo=null,e.videoCloseHandler=null,e.adBannerMap={},e.adGridMap={},e.adCustomMap={},e.bannerIdIndex=0,e.customIdIndex=0,e.gridIdIndex=0,e}return i(e,t),e.prototype.init=function(){},e.prototype.showBanner=function(t,e){var o=wx.getSystemInfoSync(),n="BANNER_"+this.bannerIdIndex++,i=wx.createBannerAd({adUnitId:t,adIntervals:30,style:{left:0,top:0,width:300,height:0}});return this.adBannerMap[n]=i,i.onError(function(t){console.error("BANNER\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),i.onResize(function(t){if(console.log("BANNER Resize\u89e6\u53d1",t.width,t.height),e){var n=o.pixelRatio*o.windowWidth,r=o.pixelRatio*o.windowHeight/cc.winSize.height,a=(n-r*cc.winSize.width)/2,s=((cc.winSize.width/2+e.position.x)*r+a)/o.pixelRatio,c=(cc.winSize.height/2-e.position.y)*r/o.pixelRatio;i.style.width=e.width||300,i.style.left=s,i.style.top=c}else i.style.width=300,i.style.left=(o.screenWidth-t.width)/2,i.style.top=o.screenHeight-t.height+1}),i.show().then(function(){console.log("BANNER\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("BANNER\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)}),n},e.prototype.hideBanner=function(t){this.adBannerMap[t]&&(this.adBannerMap[t].hide(),this.adBannerMap[t].destroy(),delete this.adBannerMap[t])},e.prototype.showVideo=function(t){var e=this;this.videoCloseHandler=t.closeCallBack,this.adVideo?this.adVideo=wx.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}):(this.adVideo=wx.createRewardedVideoAd({adUnitId:this.IDMap[t.adId]}),this.adVideo.onError(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg),e.videoCloseHandler&&e.videoCloseHandler(!1)}),this.adVideo.onClose(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed",t.isEnded),e.videoCloseHandler&&e.videoCloseHandler(t.isEnded)}),this.adVideo.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")})),this.adVideo.show().then(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.adVideo.load().then(function(){return e.adVideo.show()})})},e.prototype.showInstl=function(t){var e=wx.createInterstitialAd({adUnitId:t});e.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),e.onError(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),e.onClose(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed")}),e.show().catch(function(t){console.error("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t),e.load().then(function(){return e.show()})})},e.prototype.showGrid=function(t,e){var o="GRID_"+this.gridIdIndex++,n=wx.createGridAd({adUnitId:t,adIntervals:30,style:{left:0,top:0,width:300,height:0},adTheme:"white",gridCount:5});this.adGridMap[o]=n,n.onError(function(t){console.error("\u683c\u5b50\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),n.onLoad(function(){console.log("\u683c\u5b50\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),n.show().then(function(){console.log("\u683c\u5b50\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.log("\u683c\u5b50\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)});var i=wx.getSystemInfoSync();return n.onResize(function(t){console.log("\u683c\u5b50\u5e7f\u544aResize\u63a5\u53e3",t),e?(n.style.left=e.left,n.style.top=e.top,n.style.width=e.width):(n.style.left=(i.screenWidth-t.width)/2,n.style.top=i.screenHeight-t.height+1)}),o},e.prototype.hideGrid=function(t){this.adGridMap[t]&&(this.adGridMap[t].hide(),this.adGridMap[t].destroy(),delete this.adGridMap[t])},e.prototype.showCustom=function(t){var e=wx.getSystemInfoSync(),o=e.pixelRatio*e.windowWidth,n=e.pixelRatio*e.windowHeight/cc.winSize.height,i=(o-n*cc.winSize.width)/2,r=((cc.winSize.width/2+t.x)*n+i)/e.pixelRatio,a=(cc.winSize.height/2-t.y)*n/e.pixelRatio;console.log("custom pos ",r,a);var s="CUSTOM_"+this.customIdIndex++,c=wx.createCustomAd({adUnitId:t.code,adIntervals:30,style:{left:r,top:a,fixed:t.fixed}});return this.adCustomMap[s]=c,c.onError(function(t){console.error("\u539f\u751f\u5e7f\u544a\u5f02\u5e38",t.errCode,t.errMsg)}),c.onLoad(function(){console.log("\u539f\u751f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),c.onClose(function(){console.log("\u539f\u751f\u5e7f\u544a\u5173\u95ed")}),c.show().then(function(){console.log("\u539f\u751f\u5e7f\u544a\u663e\u793a")}).catch(function(t){console.error("\u539f\u751f\u5e7f\u544a\u663e\u793a\u5f02\u5e38",t)}),s},e.prototype.hideCustom=function(t){this.adCustomMap[t]&&(this.adCustomMap[t].hide(),this.adCustomMap[t].destroy(),delete this.adCustomMap[t])},e}(t("./advertBase").advertBase);o.advertWx=r,cc._RF.pop()},{"./advertBase":"advertBase"}],advert:[function(t,e,o){"use strict";cc._RF.push(e,"77a29RXVDtMz4ECNeqGWJdP","advert"),Object.defineProperty(o,"__esModule",{value:!0}),o.advert=void 0;var n=t("../../../../const/consts"),i=t("./advertOppo"),r=t("./advertQQ"),a=t("./advertTT"),s=t("./advertVivo"),c=t("./advertWeb"),d=t("./advertWx"),p=function(){function t(){this.ad=null}return t.prototype.init=function(){this.ad.init()},t.prototype.showBanner=function(t,e){return this.ad.showBanner(t,e)},t.prototype.hideBanner=function(t){this.ad.hideBanner(t)},t.prototype.showVideo=function(t){this.ad.showVideo(t)},t.prototype.showInstl=function(t){this.ad.showInstl(t)},t.prototype.showGrid=function(t,e){return this.ad.showGrid(t,e)},t.prototype.hideGrid=function(t){this.ad.hideGrid(t)},t.prototype.findCustom=function(t){return this.ad.findCustom(t)},t.prototype.showCustom=function(t){return this.ad.showCustom(t)},t.prototype.hideCustom=function(t){this.ad.hideCustom(t)},t.prototype.bind=function(){switch(n.consts.PLATFORM){case n.PlatformType.WECHAT_GAME:this.ad=new d.advertWx;break;case n.PlatformType.QQ:this.ad=new r.advertQQ;break;case n.PlatformType.OPPO:this.ad=new i.advertOppo;break;case n.PlatformType.VIVO:this.ad=new s.advertVivo;break;case n.PlatformType.TT:this.ad=new a.advertTT;break;case n.PlatformType.MOBILE_BROWSER:case n.PlatformType.DESKTOP_BROWSER:this.ad=new c.advertWeb}},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.bind()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.advert=p,cc._RF.pop()},{"../../../../const/consts":void 0,"./advertOppo":"advertOppo","./advertQQ":"advertQQ","./advertTT":"advertTT","./advertVivo":"advertVivo","./advertWeb":"advertWeb","./advertWx":"advertWx"}],animate:[function(t,e,o){"use strict";cc._RF.push(e,"42d23X6JF1Ozo0F4tZWOnSc","animate");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../component/eventComponent"),s=t("./animationLoader"),c=cc._decorator,d=c.ccclass,p=c.menu,u=c.requireComponent,l=c.property,h=c.executionOrder,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.framePerSeconed=60,e.data=null,e.sprite=null,e.isRunning=!1,e.ratio=1,e.loop=!1,e.curActionIds=[],e.actionIndex=0,e.frameIndex=0,e.defaultSpriteFrame=null,e.urlMatchString="",e.urlReplaceString="",e.completeBackToFront=!1,e.framePlayTimes=0,e.curTime=0,e.isGray=!1,e.frameEventHandlers={},e.keyFrameEventHandler=null,e.completeFrameEventHandler=null,e}return i(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite),this.sprite.type=cc.Sprite.Type.SIMPLE,this.sprite.sizeMode=cc.Sprite.SizeMode.RAW,this.sprite.trim=!1,this.schedule(this.updateFrame.bind(this),1/this.framePerSeconed)},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},e.prototype.setAnimationId=function(t){if(!t)return this.data=null,void(this.sprite.spriteFrame=null);this.data=s.animationLoader.instance.getAnimationData(t)},e.prototype.addFrameEventHandler=function(t,e,o){this.frameEventHandlers[t]={handler:e,target:o}},e.prototype.removeFrameEventHandler=function(t){this.frameEventHandlers[t]&&delete this.frameEventHandlers[t]},e.prototype.clearFrameEventHandler=function(){this.frameEventHandlers={}},e.prototype.setKeyFrameEventHandler=function(t,e){this.keyFrameEventHandler={handler:t,target:e}},e.prototype.setCompleteEventHandler=function(t,e){this.completeFrameEventHandler={handler:t,target:e}},e.prototype.runAnimationHandler=function(t,e){t.target?t.handler.call(t.target,e):t.handler(e)},e.prototype.runActionByID=function(t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o=!1),this.isRunning=!0,this.loop=e,this.completeBackToFront=o,this.curActionIds=t,this.frameIndex=0,this.actionIndex=0,this.data){var n=this.data.actionDataMap[this.curActionIds[this.actionIndex]];n&&this.showFrame(n,this.frameIndex)}},e.prototype.runAction=function(t,e,o,n){if(void 0===o&&(o=!0),void 0===n&&(n=!1),this.data){for(var i=[],r=0;r<t.length;r++)i.push(this.data.actionSearchMap[t[r]][e]);this.runActionByID(i,o,n)}},e.prototype.clearAction=function(){this.isRunning=!1,this.loop=!1,this.curActionIds=[],this.actionIndex=0,this.frameIndex=0,this.curTime=0,this.urlMatchString="",this.urlReplaceString="",this.sprite.spriteFrame=null},e.prototype.stopAction=function(){this.isRunning=!1},e.prototype.resumeAction=function(){this.isRunning=!0},e.prototype.showFrame=function(t,e){var o=t.frames[e],n=this.data.url+"/"+t.id+"_"+e,i=t.angle,r=t.offsetX,a=t.offsetY,c=t.scaleX,d=t.scaleY;o&&(n=o.url,i=o.angle,r=o.offsetX,a=o.offsetY,c=o.scaleX,d=o.scaleY),""!==this.urlMatchString&&""!==this.urlReplaceString&&(n=n.replace(new RegExp(this.urlMatchString,"g"),this.urlReplaceString));var p=s.animationLoader.instance.getAniamtionRes(n);p||(p=this.defaultSpriteFrame),this.sprite?(this.sprite.spriteFrame=p,this.sprite.node.angle=i,this.sprite.node.x=r,this.sprite.node.y=a,this.sprite.node.scaleX=c,this.sprite.node.scaleY=d):console.log("aniamtion sprite is null")},e.prototype.updateFrame=function(t){if(this.isRunning&&this.data){var e=this.data.actionDataMap[this.curActionIds[this.actionIndex]];if(e){var o=e.frames[this.frameIndex],n=0,i=0;if(o&&o.duration?(n=o.duration,i=o.playTimes):(n=e.interval,i=1),this.curTime+=1e3*t,!(this.curTime<n/this.ratio||(this.curTime-=n/this.ratio,this.keyFrameEventHandler&&e.frames[this.frameIndex].isKey&&this.runAnimationHandler(this.keyFrameEventHandler,{data:{index:this.frameIndex,playTimes:this.framePlayTimes}}),this.frameEventHandlers[this.frameIndex]&&this.runAnimationHandler(this.frameEventHandlers[this.frameIndex],{data:{index:this.frameIndex}}),this.framePlayTimes++,this.framePlayTimes<i))){if(this.frameIndex===e.frameCount-1){if(this.actionIndex===this.curActionIds.length-1)if(this.completeFrameEventHandler&&this.runAnimationHandler(this.completeFrameEventHandler),this.loop)this.actionIndex=-1;else{if(this.stopAction(),!this.completeBackToFront)return;this.actionIndex=-1}this.frameIndex=-1,this.actionIndex++}this.frameIndex++,this.keyFrameEventHandler&&e.frames[this.frameIndex].isKey&&this.runAnimationHandler(this.keyFrameEventHandler,{data:{index:this.frameIndex,playTimes:0,data:e.frames[this.frameIndex]}}),this.frameEventHandlers[this.frameIndex]&&this.runAnimationHandler(this.frameEventHandlers[this.frameIndex],{data:{index:this.frameIndex}}),this.frameEventHandlers[-1]&&this.runAnimationHandler(this.frameEventHandlers[-1],{data:{data:e.frames[this.frameIndex]}}),this.framePlayTimes=0,this.showFrame(e,this.frameIndex)}}}},r([l],e.prototype,"framePerSeconed",void 0),r([d,u(cc.Sprite),h(-1),p("\u63d2\u4ef6\u7ec4\u4ef6/animate (\u5e27\u52a8\u753b\u7ec4\u4ef6)")],e)}(a.eventComponent);o.default=f,cc._RF.pop()},{"../component/eventComponent":"eventComponent","./animationLoader":"animationLoader"}],animationData:[function(t,e,o){"use strict";cc._RF.push(e,"cde0aUFJ8lI77o+cy4IzWa5","animationData"),Object.defineProperty(o,"__esModule",{value:!0}),o.animationData=void 0;o.animationData=function(){this.id="",this.url="",this.actionSearchMap={},this.actionDataMap={}},cc._RF.pop()},{}],animationLoader:[function(t,e,o){"use strict";cc._RF.push(e,"4faffjF/TpKlbP2EeO7nw9c","animationLoader"),Object.defineProperty(o,"__esModule",{value:!0}),o.animationLoader=void 0;var n=t("./actionData"),i=t("./animationData"),r=t("./frameData"),a=function(){function t(){this.data={},this.res={}}return t.prototype.loadAnimation=function(t,e){var o=this;cc.loader.loadRes(t,cc.JsonAsset,function(t,n){o.loadAnimationData(n.json),e()})},t.prototype.loadData=function(t){for(var e=0;e<t.data.length;e++)this.data[t.data[e].id]=this.loadAnimationData(t.data[e])},t.prototype.loadAnimationData=function(t){var e=new i.animationData;e.id=t.id,e.url=t.url;for(var o=t.groupCount,a=t.actionNames,s=0,c=0,d=0;d<t.actions.length;d++){s=Math.floor(d/o),c=d%o,e.actionSearchMap[a[s]]||(e.actionSearchMap[a[s]]={});var p=new n.actionData;p.id=t.actions[d].id,p.frameCount=t.actions[d].frameCount||t.actions[d].frames.length,p.angle=t.actions[d].angle||0,p.offsetX=t.actions[d].offsetX||0,p.offsetY=t.actions[d].offsetY||0,p.scaleX=t.actions[d].scaleX||1,p.scaleY=t.actions[d].scaleY||1,p.collideRect=t.actions[d].collideRect||null,p.interval=t.actions[d].interval||100,e.actionSearchMap[a[s]][c]=p.id,e.actionDataMap[p.id]=p;for(var u=0;u<t.actions[d].frames.length;u++){var l=new r.frameData;l.index=t.actions[d].frames[u].index,l.url=e.url+"/"+t.actions[d].frames[u].url,l.angle=t.actions[d].frames[u].angle,l.offsetX=t.actions[d].frames[u].offsetX,l.offsetY=t.actions[d].frames[u].offsetY,l.scaleX=t.actions[d].frames[u].scaleX,l.scaleY=t.actions[d].frames[u].scaleY,l.isKey=t.actions[d].frames[u].isKey,l.playTimes=t.actions[d].frames[u].playTimes,l.duration=t.actions[d].frames[u].duration,l.collideRect=t.actions[d].frames[u].collideRect||null,l.params=t.actions[d].frames[u].params||null,p.frames[l.url]=l}}return this.data[e.id]=e,e},t.prototype.getAnimationData=function(t){return this.data[t]},t.prototype.getAniamtionRes=function(t){var e=this;return this.res[t]||cc.assetManager.getBundle("npc").load(t,cc.SpriteFrame,function(o,n){e.res[t]=n}),this.res[t]},t.instance=new t,t}();o.animationLoader=a,cc._RF.pop()},{"./actionData":"actionData","./animationData":"animationData","./frameData":"frameData"}],audioButton:[function(t,e,o){"use strict";cc._RF.push(e,"71b94efcydEFJrSv9m6eKRo","audioButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../sound/soundMgr"),s=cc._decorator,c=s.ccclass,d=s.requireComponent,p=s.menu,u=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enableClickAudioUrl="button_e",e.disableClickAudioUrl="button_d",e.touchStart=!1,e}return i(e,t),Object.defineProperty(e.prototype,"interactable",{set:function(t){this.getComponent(cc.Button).interactable=t},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this),this.node._touchListener.setSwallowTouches(!1)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this)},e.prototype.onTouchStartHandler=function(){this.touchStart=!0},e.prototype.onTouchEndHandler=function(){this.touchStart&&(this.touchStart=!1,this.getComponent(cc.Button).interactable&&""!==this.enableClickAudioUrl?a.soundMgr.instance.playEffect(this.enableClickAudioUrl):this.getComponent(cc.Button).interactable||""===this.disableClickAudioUrl||a.soundMgr.instance.playEffect(this.disableClickAudioUrl))},r([u],e.prototype,"enableClickAudioUrl",void 0),r([u],e.prototype,"disableClickAudioUrl",void 0),r([c,d(cc.Button),p("\u63d2\u4ef6\u7ec4\u4ef6/customButton\uff08\u97f3\u6548\u6309\u94ae\uff0c\u6ce8\u610f\u653e\u5728\u6309\u94ae\u7ec4\u4ef6\u4e0b\u65b9\uff09")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../sound/soundMgr":"soundMgr"}],baseData:[function(t,e,o){"use strict";cc._RF.push(e,"fd486duorpKxJsojJeU3coT","baseData"),Object.defineProperty(o,"__esModule",{value:!0}),o.baseData=void 0;var n=function(){function t(){this.storageKey="",this.isNewData=!1,this.isNewData=!0,this.storageKey=""}return t.prototype.onInit=function(){},t.prototype.onReadLater=function(){},t.prototype.onAnotherDay=function(){},t.prototype.onUpdate=function(){},t.prototype.needSave=function(){return!0},t.prototype.onShow=function(){},t.prototype.onHide=function(){},t.prototype.formatData=function(){return{}},t.prototype.parseData=function(){},t.prototype.readProperty=function(t,e,o){return!t||!t[e]&&0!==t[e]?o:t[e]},t}();o.baseData=n,cc._RF.pop()},{}],baseDialog:[function(t,e,o){"use strict";cc._RF.push(e,"93e436O6qhFXJuzTARkKMg6","baseDialog");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.DialogEvent=void 0;var a,s=t("../../data/guide/guideTriggle"),c=t("../../db/const/dbConsts"),d=t("../component/eventComponent"),p=t("../sound/soundMgr"),u=t("./dialogMgr");(function(t){t.EXIT="EXIT",t.ENTER_COMPLETE="ENTER_COMPLETE"})(a=o.DialogEvent||(o.DialogEvent={}));var l=cc._decorator,h=l.ccclass,f=l.menu,g=l.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFullScreen=!1,e.dialogName="",e.showProgress=0,e}return i(e,t),e.prototype.onComponentEnable=function(){this.showProgress=0,t.prototype.onComponentEnable.call(this),this.scheduleOnce(function(){s.guideTriggle.instance.testComplete(c.GuideCompleteConditionType.SHOW_VIEW),s.guideTriggle.instance.testTriggle(c.GuideTriggleConditionType.SHOW_VIEW)})},e.prototype.onComponentDisable=function(){s.guideTriggle.instance.testComplete(c.GuideCompleteConditionType.HIDE_VIEW),s.guideTriggle.instance.testTriggle(c.GuideTriggleConditionType.HIDE_VIEW),t.prototype.onComponentDisable.call(this)},e.prototype.showAnimationFinishCallBack=function(){this.showProgress=1,this.runHandler(a.ENTER_COMPLETE)},e.prototype.initWithParams=function(){},e.prototype.showAnimation=function(t){var e=this,o=this.node.getChildByName("node");o?(o.scale=.8,o.opacity=150,cc.tween(o).to(.2,{opacity:255,scale:1},{easing:"backOut"}).call(function(){t&&t(),e.showAnimationFinishCallBack()}).start()):console.error("show dialog animation child name is node dont exsit")},e.prototype.closeAnimation=function(t){t&&t()},e.prototype.btnCloseClick=function(){p.soundMgr.instance.playEffect("IE002",!1),this.runHandler(a.EXIT),u.dialogMgr.instance.close(this.dialogName,!0)},r([g],e.prototype,"isFullScreen",void 0),r([h,f("\u7ec4\u4ef6\u57fa\u7c7b/baseDialog (\u5bf9\u8bdd\u6846\u57fa\u7c7b)")],e)}(d.eventComponent);o.default=y,cc._RF.pop()},{"../../data/guide/guideTriggle":"guideTriggle","../../db/const/dbConsts":"dbConsts","../component/eventComponent":"eventComponent","../sound/soundMgr":"soundMgr","./dialogMgr":"dialogMgr"}],catData:[function(t,e,o){"use strict";cc._RF.push(e,"5a9b7RRV5lGJbQiUiX2n3QP","catData"),Object.defineProperty(o,"__esModule",{value:!0}),o.catData=void 0;var n=t("../../db/db"),i=t("../../plugin/notice/noticeConstants"),r=t("../../plugin/notice/noticeMgr"),a=t("./catSubPartData"),s=function(){function t(){this.groupMap={},this.subPartMap={},this.subPartIdIndex=0}return t.prototype.init=function(){for(var t in this.subPartIdIndex=0,this.subPartMap={},this.groupMap={},n.db.game.partGroup)this.groupMap[t]=[];for(var e=0;e<n.db.game.common.initParts.length;e++)this.addPart(n.db.game.common.initParts[e])},t.prototype.replaceWithData=function(t){this.removeAll();var e=JSON.parse(t);this.groupMap=e.groupMap,this.subPartMap=e.subPartMap,this.subPartIdIndex=e.subPartIdIndex,r.noticeMgr.instance.emit(i.NEName.REFRESH_CAT_VIEW)},t.prototype.findLinkSubParts=function(t){var e=this.subPartMap[t];if(!e)return[];for(var o=n.db.game.part[e.partId],i=this.groupMap[o.groupId],r=0;r<i.length;r++)if(-1!==i[r].indexOf(t))return i[r];return[]},t.prototype.addPart=function(t){var e=n.db.game.part[t];this.groupMap[e.groupId].length>=e.maxCount&&this.removePart(e.groupId,0);var o=[];this.groupMap[e.groupId].push(o);for(var i=0;i<e.resources.length;i++){var r=this.addSubPart(t,e.resources[i]);o.push(r.id)}},t.prototype.removeAll=function(){for(var t in this.groupMap)this.removeGroup(t)},t.prototype.removeGroup=function(t){if(this.groupMap[t])for(var e=this.groupMap[t].length-1;e>=0;e--){var o=this.groupMap[t][e];o.length>0&&!n.db.game.part[this.subPartMap[o[0]].partId].crashEnable||this.removePart(t,e)}},t.prototype.addSubPart=function(t,e){var o=new a.catSubPartData;o.id="part_"+this.subPartIdIndex++,o.partId=t,o.nodeUrl=e[0],o.resUrl=e[1];var n=e[2].split(",");return o.position=cc.v2(parseFloat(n[0]),parseFloat(n[1])),o.dragEnable=e[3],this.subPartMap[o.id]=o,r.noticeMgr.instance.emit(i.NEName.ADD_CAT_SUB_PART,{id:o.id}),o},t.prototype.removePart=function(t,e){if(this.groupMap[t]&&!(e>=this.groupMap[t].length)){for(var o=this.groupMap[t][e],n=0;n<o.length;n++)this.removeSubPart(o[n]);this.groupMap[t].splice(e,1)}},t.prototype.removeSubPart=function(t){this.subPartMap[t]&&(r.noticeMgr.instance.emit(i.NEName.REMOVE_CAT_SUB_PART,{id:this.subPartMap[t].id}),delete this.subPartMap[t])},t.prototype.format=function(){var t={};return t.groupMap=this.groupMap,t.subPartMap=this.subPartMap,t.subPartIdIndex=this.subPartIdIndex,JSON.stringify(t)},t.instance=new t,t}();o.catData=s,cc._RF.pop()},{"../../db/db":"db","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","./catSubPartData":"catSubPartData"}],catSubPartData:[function(t,e,o){"use strict";cc._RF.push(e,"38cb4M7IbZKzKzRD9e96Czh","catSubPartData"),Object.defineProperty(o,"__esModule",{value:!0}),o.catSubPartData=void 0;o.catSubPartData=function(){this.id="",this.partId="",this.nodeUrl="",this.resUrl="",this.position=null,this.dragEnable=!1},cc._RF.pop()},{}],cdData:[function(t,e,o){"use strict";var n;cc._RF.push(e,"9e577+t4jFMwoEQ+TD76Bbw","cdData"),Object.defineProperty(o,"__esModule",{value:!0}),o.cdData=o.CDState=void 0,function(t){t[t.NONE=-1]="NONE",t[t.RUNNING=0]="RUNNING",t[t.STOPED=1]="STOPED"}(n=o.CDState||(o.CDState={}));var i=function(){function t(){this.state=n.NONE,this.beginTime=0,this.endTime=0,this.cdTime=0,this.cdTotalTime=0,this.endHandler=null}return t.prototype.init=function(t){this.endHandler=t},t.prototype.readLayer=function(){this.state===n.RUNNING&&this.cdTime<=0&&this.end()},t.prototype.begin=function(t){this.state=n.RUNNING,this.beginTime=Date.now(),this.cdTotalTime=1e3*t,this.endTime=this.beginTime+this.cdTotalTime,this.cdTime=this.cdTotalTime},t.prototype.end=function(){this.state=n.STOPED,this.beginTime=0,this.cdTotalTime=0,this.endTime=0,this.cdTime=0,this.endHandler&&this.endHandler()},t.prototype.update=function(t){this.state!==n.STOPED&&(this.cdTime-=1e3*t,this.cdTime<=0&&this.end())},t.prototype.formatData=function(){var t={};return t.state=this.state,t.beginTime=this.beginTime,t.endTime=this.endTime,t},t.prototype.parseData=function(t){t&&(this.state=t.state,this.state!==n.STOPED&&(this.beginTime=t.beginTime,this.endTime=t.endTime,this.cdTotalTime=this.endTime-this.beginTime,this.cdTime=this.endTime-Date.now()))},t}();o.cdData=i,cc._RF.pop()},{}],cdTimeLabel:[function(t,e,o){"use strict";cc._RF.push(e,"05560N0JkNEdZh8yciyxnt4","cdTimeLabel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.CDTimeLabelState=o.CDTimeLabelEvent=void 0;var a,s,c=t("./eventComponent"),d=cc._decorator,p=d.ccclass,u=d.requireComponent,l=d.property;(function(t){t.UPDATE="UPDATE",t.END="END"})(a=o.CDTimeLabelEvent||(o.CDTimeLabelEvent={})),function(t){t[t.NONE=-1]="NONE",t[t.RUNNING=0]="RUNNING",t[t.END=1]="END"}(s=o.CDTimeLabelState||(o.CDTimeLabelState={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatStr="",e.interval=60,e.state=s.NONE,e.endTime=0,e.cdTime=0,e.totalTime=0,e}return i(e,t),e.prototype.begin=function(t){this.endTime=Date.now()+1e3*t,this.cdTime=1e3*t,this.totalTime=this.cdTime,this.state=s.RUNNING,this.schedule(this.updateCD,this.interval),this.scheduleOnce(this.updateCD)},e.prototype.end=function(){this.state=s.END,this.unschedule(this.updateCD)},e.prototype.updateCD=function(t){this.cdTime-=1e3*t,this.node.getComponent(cc.Label).string=this.formatTime(this.cdTime),this.cdTime<=0&&(this.end(),this.cdTime=0,this.runHandler(a.END)),this.runHandler(a.UPDATE,{cdTime:this.cdTime,totalTime:this.totalTime})},e.prototype.formatTime=function(t){var e,o=Math.floor(t/864e5),n=Math.floor(t%864e5/36e5),i=Math.floor(t%36e5/6e4),r=Math.floor(t%6e4/1e3),a={"D+":o.toString(),"H+":n.toString(),"M+":i.toString(),"S+":r.toString()},s=this.formatStr;for(var c in a)(e=new RegExp("("+c+")").exec(this.formatStr))&&(s=s.replace(e[1],1==e[1].length?a[c]:a[c].padStart(e[1].length,"0")));return s},r([l({tooltip:"DD HH MM SS"})],e.prototype,"formatStr",void 0),r([l],e.prototype,"interval",void 0),r([p,u(cc.Label)],e)}(c.eventComponent);o.default=h,cc._RF.pop()},{"./eventComponent":"eventComponent"}],commonData:[function(t,e,o){"use strict";cc._RF.push(e,"78fafXuz0tPdaoyhQrddtZP","commonData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.commonData=void 0;var r=function(t){function e(){var e=t.call(this)||this;return e.storageKey="common",e}return i(e,t),e.prototype.onInit=function(){},e.prototype.onAnotherDay=function(){},e.prototype.formatData=function(){return{}},e.prototype.parseData=function(){},e}(t("../core/baseData").baseData);o.commonData=r,cc._RF.pop()},{"../core/baseData":"baseData"}],conditionBase:[function(t,e,o){"use strict";cc._RF.push(e,"e385cC9w+VC4qxGs5qImdSj","conditionBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.conditionBase=void 0;var n=function(){function t(){this.type=-1,this.progress=0,this.completeProgress=0}return t.prototype.initTask=function(t){this.progress=0,this.completeProgress=t[0]},t.prototype.setProgress=function(t){this.progress=t},t.prototype.modifyConditionValue=function(t){this.progress+=t[0]},t.prototype.getProgress=function(){return this.progress},t.prototype.getCompleteProgress=function(){return this.completeProgress},t.prototype.finish=function(){return this.getProgress()>=this.getCompleteProgress()},t.prototype.clear=function(){this.progress=0},t.prototype.formatData=function(){var t={};return t.progress=this.progress,t},t.prototype.parseData=function(t){this.progress=t.progress},t}();o.conditionBase=n,cc._RF.pop()},{}],conditionConst:[function(t,e,o){"use strict";cc._RF.push(e,"99b18caYU5KE7h7bJ54Bkkm","conditionConst"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConditionType=void 0,function(t){t[t.NONE=-1]="NONE"}(o.ConditionType||(o.ConditionType={})),cc._RF.pop()},{}],conditionManager:[function(t,e,o){"use strict";cc._RF.push(e,"3531aIPTMVCqrWZiuP/xmuH","conditionManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.condtionManager=void 0;var r=t("../core/baseData"),a=t("./condition"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.conditions=[],e}return i(e,t),e.prototype.initWithDB=function(t){this.conditions=[];for(var e=0;e<t.length;e++){var o=t[e],n=new a.condition.instance.classMap[o.type];n.initTask(o.params),this.conditions[e]=n}},e.prototype.getProgress=function(){for(var t=[],e=0;e<this.conditions.length;e++)t.push([this.conditions[e].getProgress(),this.conditions[e].getCompleteProgress()]);return t},e.prototype.finish=function(){for(var t=0;t<this.conditions.length;t++)if(!this.conditions[t].finish())return!1;return!0},e.prototype.formatData=function(){for(var t={conditions:[]},e=0;e<this.conditions.length;e++)t.conditions.push(this.conditions[e].formatData());return t},e.prototype.parseData=function(t){for(var e=0;e<this.conditions.length;e++)this.conditions[e].parseData(t.conditions[e])},e}(r.baseData);o.condtionManager=s,cc._RF.pop()},{"../core/baseData":"baseData","./condition":"condition"}],condition:[function(t,e,o){"use strict";cc._RF.push(e,"1e95bQYKWNAe5964/bghjo6","condition"),Object.defineProperty(o,"__esModule",{value:!0}),o.condition=void 0;var n=t("../data"),i=function(){function t(){this.classMap={}}return t.prototype.init=function(){},t.prototype.getDescribe=function(){return""},t.prototype.getTurnData=function(){return null},t.prototype.modifyCondtionValue=function(t,e){n.data.instance.dailyTask.modifyCondtionValue(t,e),n.data.instance.achivTask.modifyCondtionValue(t,e)},Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t,this._instance.init()),this._instance},enumerable:!1,configurable:!0}),t._instance=null,t}();o.condition=i,cc._RF.pop()},{"../data":"data"}],dailyData:[function(t,e,o){"use strict";cc._RF.push(e,"fe78ckYHCVIv6Tu8CL7imcV","dailyData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dailyData=void 0;var r=t("../../../db/db"),a=t("../../../plugin/notice/noticeConstants"),s=t("../../../plugin/notice/noticeMgr"),c=t("../../condition/condition"),d=t("../../const/dataConsts"),p=t("../../core/baseData"),u=t("../../data"),l=t("./giftPackData"),h=!0,f=function(t){function e(){var e=t.call(this)||this;return e.data={},e.gpack=null,e.storageKey="dailyTask",h&&(e.gpack=new l.giftPackData),e}return i(e,t),e.prototype.onReadLater=function(){this.isNewData&&this.initTask()},e.prototype.onAnotherDay=function(){this.initTask()},e.prototype.initTask=function(){for(var t in this.data={},r.db.game.dailyTask){var e=r.db.game.dailyTask[t].condition;c.condition.instance.classMap[e.type]?(this.data[t]={condition:new c.condition.instance.classMap[e.type],state:d.TaskState.INCOMPLETE},this.data[t].condition.initTask(e.params),this.data[t].state=this.data[t].condition.finish()?d.TaskState.COMPLETE:d.TaskState.INCOMPLETE):console.error("\u6bcf\u65e5\u4efb\u52a1\u6761\u4ef6\u6ca1\u6709\u5173\u8054\u8868 -> "+e.type)}h&&this.gpack.init(r.db.game.dailyGPack)},e.prototype.modifyCondtionValue=function(t,e){for(var o in this.data)this.data[o].state!==d.TaskState.OVER&&this.data[o].condition.type===t&&(this.data[o].condition.modifyConditionValue(e),this.data[o].condition.finish()&&this.data[o].state===d.TaskState.INCOMPLETE?(this.data[o].state=d.TaskState.COMPLETE,s.noticeMgr.instance.emit(a.NEName.DAILY_TASK_STATE_UPDATE,{id:o})):this.data[o].condition.finish()||this.data[o].state!==d.TaskState.COMPLETE||(this.data[o].state=d.TaskState.INCOMPLETE,s.noticeMgr.instance.emit(a.NEName.DAILY_TASK_STATE_UPDATE,{id:o})))},e.prototype.getProgress=function(t){return[this.data[t].condition.getProgress(),this.data[t].condition.getCompleteProgress()]},e.prototype.receive=function(t,e){this.data[t].state===d.TaskState.COMPLETE&&(this.data[t].state=d.TaskState.OVER,h&&this.gpack.addPoint(r.db.game.dailyTask[t].point),u.data.instance.inven.addItems(r.db.game.dailyTask[t].rewards,e),s.noticeMgr.instance.emit(a.NEName.DAILY_TASK_RECEIVED,{id:t,multi:e}))},e.prototype.formatData=function(){var t={data:{}};for(var e in this.data)t.data[e]={},t.data[e].state=this.data[e].state,t.data[e].condition=this.data[e].condition.formatData();return h&&(t.gpack=this.gpack.formatData()),t},e.prototype.parseData=function(t){this.initTask();var e=this.readProperty(t,"data",{});for(var o in e)this.data[o].state=e[o].state,this.data[o].condition.parseData(e[o].condition);h&&this.gpack.parseData(this.readProperty(t,"gpack",null))},e}(p.baseData);o.dailyData=f,cc._RF.pop()},{"../../../db/db":"db","../../../plugin/notice/noticeConstants":"noticeConstants","../../../plugin/notice/noticeMgr":"noticeMgr","../../condition/condition":"condition","../../const/dataConsts":"dataConsts","../../core/baseData":"baseData","../../data":"data","./giftPackData":"giftPackData"}],dataConsts:[function(t,e,o){"use strict";cc._RF.push(e,"4e70eEb2rVBP6EokJcLY56M","dataConsts"),Object.defineProperty(o,"__esModule",{value:!0}),o.TaskState=o.TaskGiftState=void 0,function(t){t[t.NONE=-1]="NONE",t[t.INCOMPLETE=0]="INCOMPLETE",t[t.COMPLETE=1]="COMPLETE",t[t.OVER=2]="OVER"}(o.TaskGiftState||(o.TaskGiftState={})),function(t){t[t.NONE=-1]="NONE",t[t.INCOMPLETE=0]="INCOMPLETE",t[t.COMPLETE=1]="COMPLETE",t[t.OVER=2]="OVER"}(o.TaskState||(o.TaskState={})),cc._RF.pop()},{}],dataLogic:[function(t,e,o){"use strict";cc._RF.push(e,"fac61NJQV9FT7tIHE7pGc52","dataLogic"),Object.defineProperty(o,"__esModule",{value:!0}),o.dataLogic=void 0;var n=t("../../../../const/consts"),i=t("../../plugin/notice/noticeConstants"),r=t("../../plugin/notice/noticeMgr"),a=t("../../plugin/utils/utilStorage"),s=t("../../plugin/utils/utilTime"),c=function(){function t(){this.dataMap={},this.saveNextFrame=!1,this.storageSync=!1,this.runTime=0,this.playTime=0,this.saveCDTime=0,this.lastSaveTime=0,this.dayCD=0,this.firstGame=!1,this.firstDay=!1}return t.prototype.initData=function(){},t.prototype.firstGameLogic=function(){},t.prototype.readStorageComplete=function(){},t.prototype.init=function(){this.lastSaveTime=0,this.initData(),this.callDataMethod("onInit")},t.prototype.update=function(t){if(this.runTime+=t,this.playTime+=t,this.callDataMethod("onUpdate",t),this.dayCD-=1e3*t,this.dayCD<=0){var e=Date.now();this.dayCD=s.utilTime.nextDayMs(e),this.callDataMethod("onAnotherDay"),r.noticeMgr.instance.emit(i.NEName.ENTER_NEW_DAY),this.saveNextFrame=!0}this.saveNextFrame&&(this.storageSync=!1,this.saveNextFrame=!1,this.save()),n.consts.USING_REMOTE_STORAGE&&(this.saveCDTime+=t,this.saveCDTime>60&&!this.storageSync&&(this.storageSync=!0,this.saveCDTime-=60,this.save(!0)))},t.prototype.addData=function(t){""===t.storageKey||this.dataMap[t.storageKey]?console.error("storageKey\u672a\u8bbe\u7f6e\uff0c\u6dfb\u52a0\u6570\u636e\u9519\u8bef...",t):this.dataMap[t.storageKey]=t},t.prototype.onShow=function(){this.callDataMethod("onShow")},t.prototype.onHide=function(){this.callDataMethod("onHide")},t.prototype.save=function(t){void 0===t&&(t=!1);var e={};for(var o in this.lastSaveTime=Date.now(),e.saveTime=this.lastSaveTime,this.dataMap)this.dataMap[o].needSave()&&(e[this.dataMap[o].storageKey]=this.dataMap[o].formatData());console.log("\u5b58\u50a8\u6570\u636e\uff1a",e),a.utilStorage.instance.save("__DATA_HC__",e,t)},t.prototype.read=function(t,e){var o=this;a.utilStorage.instance.read("__DATA_HC__",t,function(t){console.log("\u5b58\u6863\u6570\u636e\uff1a",t),t&&o.parseStorageData(t),o.readStorageComplete(),t||(o.firstGame=!0,o.firstGameLogic());var n=Date.now();o.dayCD=s.utilTime.nextDayMs(n),o.callDataMethod("onReadLater"),s.utilTime.isSameDay(n,o.lastSaveTime)||(o.firstGame&&(o.firstDay=!0),o.callDataMethod("onAnotherDay")),cc.director.getScheduler().enableForTarget(o),cc.director.getScheduler().schedule(o.update,o,1/60),console.log("\u8bfb\u53d6\u5b58\u6863\u7ed3\u675f"),e&&e()})},t.prototype.parseStorageData=function(t){if(t)for(var e in this.playTime=t.playTime||0,this.lastSaveTime=t.saveTime||0,this.dataMap)t[this.dataMap[e].storageKey]&&(this.dataMap[e].isNewData=!1,this.dataMap[e].parseData(t[this.dataMap[e].storageKey]))},t.prototype.clearStorage=function(){cc.sys.localStorage.removeItem("__DATA_HC__")},t.prototype.callDataMethod=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var n in this.dataMap)this.dataMap[n][t]&&(1===e.length?this.dataMap[n][t](e[0]):this.dataMap[n][t](e))},t}();o.dataLogic=c,cc._RF.pop()},{"../../../../const/consts":void 0,"../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../../plugin/utils/utilStorage":"utilStorage","../../plugin/utils/utilTime":"utilTime"}],data:[function(t,e,o){"use strict";cc._RF.push(e,"8afdaD20+1K6KAAWcjvHgQz","data");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.data=void 0;var r=t("./core/dataLogic"),a=t("./game/commonData"),s=t("./game/funcData"),c=t("./game/invenData"),d=t("./game/partData"),p=t("./game/photoData"),u=t("./game/signInData"),l=t("./game/suitData"),h=t("./game/task/achivData"),f=t("./game/task/dailyData"),g=t("./guide/guideData"),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.common=null,e.dailyTask=null,e.achivTask=null,e.inven=null,e.func=null,e.guide=null,e.part=null,e.suit=null,e.photo=null,e.signIn=null,e.firstGame=!1,e}return i(e,t),e.prototype.initData=function(){this.common=new a.commonData,this.addData(this.common),this.dailyTask=new f.dailyData,this.addData(this.dailyTask),this.achivTask=new h.achivData,this.addData(this.achivTask),this.inven=new c.invenData,this.addData(this.inven),this.func=new s.funcData,this.addData(this.func),this.guide=new g.guideData,this.addData(this.guide),this.part=new d.partData,this.addData(this.part),this.suit=new l.suitData,this.addData(this.suit),this.photo=new p.photoData,this.addData(this.photo),this.signIn=new u.signInData,this.addData(this.signIn)},e.prototype.firstGameLogic=function(){this.firstGame=!0},e.prototype.readStorageComplete=function(){},Object.defineProperty(e,"instance",{get:function(){return this.sInstance||(this.sInstance=new e,this.sInstance.init()),this.sInstance},enumerable:!1,configurable:!0}),e.sInstance=null,e}(r.dataLogic);o.data=y,cc._RF.pop()},{"./core/dataLogic":"dataLogic","./game/commonData":"commonData","./game/funcData":"funcData","./game/invenData":"invenData","./game/partData":"partData","./game/photoData":"photoData","./game/signInData":"signInData","./game/suitData":"suitData","./game/task/achivData":"achivData","./game/task/dailyData":"dailyData","./guide/guideData":"guideData"}],dbBaseData:[function(t,e,o){"use strict";cc._RF.push(e,"ebcb31gAStHBqqgxYqPAjIb","dbBaseData"),Object.defineProperty(o,"__esModule",{value:!0}),o.dbBaseData=void 0;var n=function(){function t(){}return t.prototype.load=function(t){for(var e in t)this[e]=t[e]},t}();o.dbBaseData=n,cc._RF.pop()},{}],dbConsts:[function(t,e,o){"use strict";cc._RF.push(e,"9efafexgS1GUJp0TABc6Qxm","dbConsts"),Object.defineProperty(o,"__esModule",{value:!0}),o.PartUnlockType=o.PartActionType=o.TurnType=o.GuideCompleteActionType=o.GuideTriggleActionType=o.GuideCompleteConditionType=o.GuideTriggleConditionType=o.ItemType=o.TaskType=void 0,function(t){t[t.NONE=-1]="NONE",t[t.DAILY=0]="DAILY",t[t.ACHIV=1]="ACHIV"}(o.TaskType||(o.TaskType={})),function(t){t[t.NONE=-1]="NONE"}(o.ItemType||(o.ItemType={})),function(t){t[t.APPOINT_KEY=0]="APPOINT_KEY",t[t.SHOW_VIEW=1]="SHOW_VIEW",t[t.HIDE_VIEW=2]="HIDE_VIEW",t[t.GUIDE_COMPLETE=3]="GUIDE_COMPLETE"}(o.GuideTriggleConditionType||(o.GuideTriggleConditionType={})),function(t){t[t.APPOINT_KEY=0]="APPOINT_KEY",t[t.SHOW_VIEW=1]="SHOW_VIEW",t[t.HIDE_VIEW=2]="HIDE_VIEW",t[t.ANY_TOUCH=3]="ANY_TOUCH",t[t.RECT_TOUCH=4]="RECT_TOUCH",t[t.DRAG_END=5]="DRAG_END"}(o.GuideCompleteConditionType||(o.GuideCompleteConditionType={})),function(t){t[t.NONE=-1]="NONE",t[t.CAMERA_MOVE=0]="CAMERA_MOVE",t[t.FINGER_CLICK=1]="FINGER_CLICK",t[t.FINGER_MOVE=2]="FINGER_MOVE",t[t.WAIT=3]="WAIT",t[t.NODE_PROPERTY=4]="NODE_PROPERTY",t[t.NOTICE=5]="NOTICE",t[t.AUTO_COMPLETE=6]="AUTO_COMPLETE"}(o.GuideTriggleActionType||(o.GuideTriggleActionType={})),function(t){t[t.NONE=-1]="NONE",t[t.NOTICE=0]="NOTICE"}(o.GuideCompleteActionType||(o.GuideCompleteActionType={})),function(t){t[t.NONE=-1]="NONE",t[t.DIALOG=0]="DIALOG"}(o.TurnType||(o.TurnType={})),function(t){t[t.NONE=-1]="NONE",t[t.DIALOG=0]="DIALOG",t[t.EXCHANGE=1]="EXCHANGE"}(o.PartActionType||(o.PartActionType={})),function(t){t[t.NONE=-1]="NONE",t[t.DEFAULT=0]="DEFAULT",t[t.VIDEO=1]="VIDEO",t[t.SUIT=2]="SUIT",t[t.OTHER=3]="OTHER"}(o.PartUnlockType||(o.PartUnlockType={})),cc._RF.pop()},{}],dbGameAchivTask:[function(t,e,o){"use strict";cc._RF.push(e,"2ab55csq4tBeKf5sH/Dv2Re","dbGameAchivTask");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameAchivTask=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.name="",e.describe="",e.condition=null,e.rewards=null,e.turnData=null,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameAchivTask=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameCommon:[function(t,e,o){"use strict";cc._RF.push(e,"a73b8zMmFdLb5G+1UK/j+fq","dbGameCommon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameCommon=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.coinId="",e.initParts=null,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameCommon=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameDailyTask:[function(t,e,o){"use strict";cc._RF.push(e,"6b5a2uz6BxEM5ZzyzeYC2Zp","dbGameDailyTask");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameDailyTask=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.name="",e.describe="",e.condition=null,e.rewards=null,e.point=0,e.turnData=null,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameDailyTask=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameFunc:[function(t,e,o){"use strict";cc._RF.push(e,"93283KQ/q1FUKiMjJsAxO/t","dbGameFunc");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameFunc=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.unlockConditions=null,e.describe="",e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameFunc=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameGiftPack:[function(t,e,o){"use strict";cc._RF.push(e,"33457HWQ+RFgbKfHgeYvAPe","dbGameGiftPack");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameGiftPack=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.name="",e.point=0,e.rewards=null,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameGiftPack=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameGuide:[function(t,e,o){"use strict";cc._RF.push(e,"18454GQg5hNuoY5t0yhuNzR","dbGameGuide");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameGuide=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.groupId="",e.talkData=null,e.triggleConditions=null,e.completeConditions=null,e.prevIds=null,e.backIds=null,e.scene="",e.viewId="",e.isForce=!1,e.blackCover=!1,e.groupComplete=!1,e.triggleActionList=null,e.completeActionList=null,e.fingerData=null,e.textPosition=null,e.dialogPosition=null,e.roleData=null,e.lockFuncs=null,e.unlockStorage=!1,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameGuide=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameItem:[function(t,e,o){"use strict";cc._RF.push(e,"37e01j2ZbBN0LOk6jTFkEfS","dbGameItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameItem=void 0;var r=t("../const/dbConsts"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.name="",e.type=r.ItemType.NONE,e.iconPath="",e.describe="",e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameItem=a,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData","../const/dbConsts":"dbConsts"}],dbGamePartGroup:[function(t,e,o){"use strict";cc._RF.push(e,"f5907xx5OpBOLP56HQTZbFQ","dbGamePartGroup");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGamePartGroup=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.checkMarkRes="",e.backGroundRes="",e.describe="",e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGamePartGroup=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGamePart:[function(t,e,o){"use strict";cc._RF.push(e,"936c6AzLWND0KrjnD4HqTIc","dbGamePart");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGamePart=void 0;var r=t("../base/dbBaseData"),a=t("../const/dbConsts"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.groupId="",e.iconRes="",e.weight=0,e.unlockType=a.PartUnlockType.NONE,e.actionType=a.PartActionType.NONE,e.maxCount=0,e.crashEnable=!1,e.dragGroup=null,e.bundleName="",e.resources=null,e}return i(e,t),e}(r.dbBaseData);o.dbGamePart=s,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData","../const/dbConsts":"dbConsts"}],dbGameSignIn:[function(t,e,o){"use strict";cc._RF.push(e,"73e99N8MtpDuqAR0YU8dSJM","dbGameSignIn");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameSignIn=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.index=0,e.rewards=null,e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameSignIn=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameSuit:[function(t,e,o){"use strict";cc._RF.push(e,"592aa+14VhG36hmnp+lNJ8O","dbGameSuit");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameSuit=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.videoTiems=0,e.res="",e.parts=null,e.describe="",e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameSuit=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGameUtils:[function(t,e,o){"use strict";cc._RF.push(e,"2a442gUnL9B/rVEikP7IPzS","dbGameUtils");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameUtils=o.dbGameUtilSignIn=o.dbGameUtilAchivTask=o.dbGameUtilGuide=void 0;var r=t("../base/dbUtilBase"),a=t("../db"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data={},e.triggleTypeMap={},e.completeTypeMap={},e}return i(e,t),e.prototype.init=function(){for(var t in a.db.game.guide){var e=a.db.game.guide[t];this.data[e.groupId]||(this.data[e.groupId]=[]),this.data[e.groupId].push(t);for(var o=0;o<e.triggleConditions.length;o++)for(var n=e.triggleConditions[o],i=0;i<n.length;i++)this.triggleTypeMap[n[i].type]||(this.triggleTypeMap[n[i].type]=[]),this.triggleTypeMap[n[i].type].push(t);for(o=0;o<e.completeConditions.length;o++)for(n=e.completeConditions[o],i=0;i<n.length;i++)this.completeTypeMap[n[i].type]||(this.completeTypeMap[n[i].type]=[]),this.completeTypeMap[n[i].type].push(t)}},e}(r.dbUtilBase);o.dbGameUtilGuide=s;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data={},e}return i(e,t),e.prototype.init=function(){for(var t in a.db.game.achivTask){var e=a.db.game.achivTask[t];this.data[e.condition.type]||(this.data[e.condition.type]=[]),this.data[e.condition.type].push(e)}},e}(r.dbUtilBase);o.dbGameUtilAchivTask=c;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.indexMap={},e}return i(e,t),e.prototype.init=function(){for(var t in a.db.game.signIn)this.indexMap[a.db.game.signIn[t].index]=a.db.game.signIn[t]},e.prototype.getDB=function(t){return t%=Object.keys(a.db.game.signIn).length,this.indexMap[t]},e}(r.dbUtilBase);o.dbGameUtilSignIn=d;var p=function(){function t(){}return t.init=function(){this.guide.init(),this.achivTask.init(),this.signIn.init()},t.guide=new s,t.achivTask=new c,t.signIn=new d,t}();o.dbGameUtils=p,cc._RF.pop()},{"../base/dbUtilBase":"dbUtilBase","../db":"db"}],dbGameView:[function(t,e,o){"use strict";cc._RF.push(e,"9e22eyqvUpL66TahF77ke6z","dbGameView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.dbGameView=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id="",e.name="",e.describe="",e}return i(e,t),e}(t("../base/dbBaseData").dbBaseData);o.dbGameView=r,cc._RF.pop()},{"../base/dbBaseData":"dbBaseData"}],dbGame:[function(t,e,o){"use strict";cc._RF.push(e,"ed18c0qKLRJNZAGOqID7WFu","dbGame"),Object.defineProperty(o,"__esModule",{value:!0}),o.dbGame=void 0;var n=t("./dbGameAchivTask"),i=t("./dbGameCommon"),r=t("./dbGameDailyTask"),a=t("./dbGameFunc"),s=t("./dbGameGiftPack"),c=t("./dbGamePartGroup"),d=t("./dbGameGuide"),p=t("./dbGameItem"),u=t("./dbGamePart"),l=t("./dbGameUtils"),h=t("./dbGameView"),f=t("./dbGameSuit"),g=t("./dbGameSignIn"),y=function(){function t(){this.isLoaded=!1,this.common=new i.dbGameCommon,this.dailyTask={},this.dailyGPack={},this.achivTask={},this.item={},this.view={},this.guide={},this.func={},this.partGroup={},this.part={},this.suit={},this.signIn=[]}return t.prototype.loadObject=function(t,e){t.load(e)},t.prototype.loadList=function(t,e,o){for(var n=0;n<o.length;n++){var i=new t;i.load(o[n]),e[i.id]=i}},t.prototype.loadArray=function(t,e,o){for(var n=0;n<o.length;n++){var i=new t;i.load(o[n]),e.push(i)}},t.prototype.load=function(t){this.isLoaded||(this.isLoaded=!0,this.loadObject(this.common,t.common.data),this.loadList(r.dbGameDailyTask,this.dailyTask,t.dailyTask.data),this.loadList(s.dbGameGiftPack,this.dailyGPack,t.dailyGPack.data),this.loadList(n.dbGameAchivTask,this.achivTask,t.achivTask.data),this.loadList(p.dbGameItem,this.item,t.item.data),this.loadList(h.dbGameView,this.view,t.view.data),this.loadList(d.dbGameGuide,this.guide,t.guide.data),this.loadList(a.dbGameFunc,this.func,t.func.data),this.loadList(c.dbGamePartGroup,this.partGroup,t.partGroup.data),this.loadList(u.dbGamePart,this.part,t.part.data),this.loadList(f.dbGameSuit,this.suit,t.suit.data),this.loadArray(g.dbGameSignIn,this.signIn,t.signIn.data),l.dbGameUtils.init())},t}();o.dbGame=y,cc._RF.pop()},{"./dbGameAchivTask":"dbGameAchivTask","./dbGameCommon":"dbGameCommon","./dbGameDailyTask":"dbGameDailyTask","./dbGameFunc":"dbGameFunc","./dbGameGiftPack":"dbGameGiftPack","./dbGameGuide":"dbGameGuide","./dbGameItem":"dbGameItem","./dbGamePart":"dbGamePart","./dbGamePartGroup":"dbGamePartGroup","./dbGameSignIn":"dbGameSignIn","./dbGameSuit":"dbGameSuit","./dbGameUtils":"dbGameUtils","./dbGameView":"dbGameView"}],dbUtilBase:[function(t,e,o){"use strict";cc._RF.push(e,"88ec24Sd/xOdbwQPgbhCWvf","dbUtilBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.dbUtilBase=void 0;var n=function(){function t(){}return t.prototype.init=function(){},t}();o.dbUtilBase=n,cc._RF.pop()},{}],db:[function(t,e,o){"use strict";cc._RF.push(e,"01846F0j+9Ifqkuzvyt3m8M","db"),Object.defineProperty(o,"__esModule",{value:!0}),o.db=void 0;var n=t("./game/dbGame"),i=function(){function t(){}return t.game=new n.dbGame,t}();o.db=i,cc._RF.pop()},{"./game/dbGame":"dbGame"}],dialogDB:[function(t,e,o){"use strict";cc._RF.push(e,"26bc3bJ9T5GK6EF6cp1SEBR","dialogDB"),Object.defineProperty(o,"__esModule",{value:!0}),o.dialogDB=void 0;var n=function(){function t(){this.data={}}return t.prototype.load=function(t){for(var e=0;e<t.data.length;e++){var o=t.data[e].name,n=t.data[e].url,i=t.data[e].comName,r=t.data[e].preload;this.data[o]={name:o,url:n,componentName:i,preload:r}}},t.instance=new t,t}();o.dialogDB=n,cc._RF.pop()},{}],dialogMgr:[function(t,e,o){"use strict";cc._RF.push(e,"6047aNcmKlOwL9I1Xqbbb9F","dialogMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.dialogMgr=void 0;var n=t("./dialogDB"),i=function(){function t(){this.dialogCache={},this.showDialogMap={},this.loadingDialogMap={},this.dialogZIndexMap={},this.closingDialogMap={},this.dialogStack=[],this.curDialog="",this.zIndexCounter=0,this.bundle=null}return t.prototype.preload=function(){for(var t in n.dialogDB.instance.data){var e=n.dialogDB.instance.data[t];e.preload&&this.bundle.preload(e.url,cc.Prefab)}},t.prototype.insertStack=function(t,e){this.dialogZIndexMap[t]=e;for(var o=!1,n=0;n<this.dialogStack.length;n++)if(e<=this.dialogZIndexMap[this.dialogStack[n]]){o=!0,this.dialogStack.splice(n,0,t);break}o||(this.dialogStack.push(t),this.curDialog=t)},t.prototype.removeFromStack=function(t){var e=this.dialogStack.indexOf(t);if(-1!==e&&this.dialogStack.splice(e,1),void 0!==this.dialogZIndexMap[t]&&delete this.dialogZIndexMap[t],0===this.dialogStack.length)return this.curDialog="",void(this.zIndexCounter=0);this.curDialog=this.dialogStack[this.dialogStack.length-1]},t.prototype.hideBottom=function(){for(var t=0;t<this.dialogStack.length-1;t++){var e=this.dialogStack[t];this.showDialogMap[e]?this.showDialogMap[e].node.opacity=0:this.loadingDialogMap[e]=!1}},t.prototype.showBottom=function(){for(var t=this.dialogStack.length-1;t>=0;t--){var e=this.showDialogMap[this.dialogStack[t]];if(e?e.node.opacity=255:this.loadingDialogMap[this.dialogStack[t]]=!0,e.isFullScreen)break}},t.prototype.addDialog=function(t,e,o,n){var i=this;void 0===e&&(e=null),e&&t.initWithParams(e),this.showDialogMap[t.dialogName]=t,cc.director.getScene().getChildByName("Canvas").addChild(t.node,n),o?t.showAnimation(function(){t.isFullScreen&&i.hideBottom()}):(t.isFullScreen&&this.hideBottom(),t.showAnimationFinishCallBack())},t.prototype.init=function(t,e){this.bundle=t,e&&this.preload()},t.prototype.isTopAndComplete=function(t){return this.curDialog===t&&!!this.showDialogMap[t]},t.prototype.isEmpty=function(){return 0===Object.keys(this.dialogZIndexMap).length},t.prototype.show=function(t,e,o,i,r){var a=this;if(void 0===e&&(e=null),void 0===o&&(o=!0),void 0===i&&(i=!0),void 0===r&&(r=0),void 0===this.closingDialogMap[t]&&(0===r&&(r=this.zIndexCounter++),i&&this.insertStack(t,r),void 0===this.loadingDialogMap[t])){var s=this.dialogCache[t];if(s)return delete this.dialogCache[t],void this.addDialog(s,e,o,r);this.loadingDialogMap[t]=!0;var c=n.dialogDB.instance.data[t];this.bundle.load(c.url,cc.Prefab,function(n,i){if(n)console.error(n);else if(void 0!==a.loadingDialogMap[t]){var s=cc.instantiate(i).getComponent(c.componentName);s.dialogName=t,a.addDialog(s,e,o,r),s.node.opacity=a.loadingDialogMap[t]?255:0,delete a.loadingDialogMap[t]}})}},t.prototype.close=function(t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=!1);var i=this.showDialogMap[t];i&&(i.node.opacity=255,this.removeFromStack(t),i.isFullScreen&&this.showBottom(),e?(this.closingDialogMap[t]=!0,i.closeAnimation(function(){o?i.node.destroy():(n.dialogCache[t]=n.showDialogMap[t],i.node.removeFromParent()),delete n.closingDialogMap[t]})):o?i.node.destroy():(this.dialogCache[t]=this.showDialogMap[t],i.node.removeFromParent()),delete this.showDialogMap[t])},t.prototype.closeAll=function(t){this.loadingDialogMap={};for(var e=this.dialogStack.length-1;e>=0;e--){var o=this.dialogStack[e];t&&-1!==t.indexOf(o)||(this.showDialogMap[o]?this.close(o):this.dialogStack.splice(e,1))}},t.instance=new t,t}();o.dialogMgr=i,cc._RF.pop()},{"./dialogDB":"dialogDB"}],eventComponent:[function(t,e,o){"use strict";cc._RF.push(e,"74bcd9QYDZPdJJeW6X+mBoP","eventComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.eventComponent=void 0;var a=cc._decorator,s=a.ccclass,c=a.menu,d=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clearHandler=!0,e.eventHandlers={},e}return i(e,t),e.prototype.onEnable=function(){this.onComponentEnable()},e.prototype.onDisable=function(){this.clearHandler&&(this.eventHandlers={}),this.onComponentDisable()},e.prototype.onComponentEnable=function(){},e.prototype.onComponentDisable=function(){},e.prototype.addHandler=function(t,e,o){void 0===o&&(o=null),e&&(this.eventHandlers[t]={handler:e,target:o})},e.prototype.removeHandler=function(t){this.eventHandlers[t]&&delete this.eventHandlers[t]},e.prototype.getHandler=function(t){return this.eventHandlers[t]},e.prototype.runHandler=function(t,e){if(!this.eventHandlers[t])return null;var o=this.eventHandlers[t].handler,n=this.eventHandlers[t].target;return n?o.call(n,e):o(e)},r([d({tooltip:"\u8282\u70b9\u5173\u95ed\u7684\u65f6\u5019\u662f\u5426\u91ca\u653e\u4e8b\u4ef6\uff0c\u9ed8\u8ba4\u91ca\u653e"})],e.prototype,"clearHandler",void 0),r([s,c("\u7ec4\u4ef6\u57fa\u7c7b/eventComponent (\u4e8b\u4ef6\u7ec4\u4ef6)")],e)}(cc.Component);o.eventComponent=p,cc._RF.pop()},{}],fightData:[function(t,e,o){"use strict";cc._RF.push(e,"16edbDm/qhBTb0sVerWBqmh","fightData"),Object.defineProperty(o,"__esModule",{value:!0}),o.fightData=void 0;var n=function(){function t(){}return t.instance=new t,t}();o.fightData=n,cc._RF.pop()},{}],frameComponent:[function(t,e,o){"use strict";cc._RF.push(e,"118fbC3XFtMqr2VBCPfoPdP","frameComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.frameComponent=void 0;var a=cc._decorator,s=a.ccclass,c=a.menu,d=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.frames=[],e.curIndex=-1,e}return i(e,t),e.prototype.setFrameIndex=function(t){t<0||t>=this.frames.length?this.sprite.spriteFrame=null:t!==this.curIndex&&(this.curIndex=t,this.sprite.spriteFrame=this.frames[t])},e.prototype.showRandomFrame=function(){var t=Math.floor(Math.random()*this.frames.length);this.setFrameIndex(t)},r([d({tooltip:"\u5f85\u5207\u6362\u7eb9\u7406\u7684CCSprite\u7ec4\u4ef6",type:cc.Sprite})],e.prototype,"sprite",void 0),r([d({tooltip:"\u7eb9\u7406\u5217\u8868",type:cc.SpriteFrame})],e.prototype,"frames",void 0),r([s,c("\u63d2\u4ef6\u7ec4\u4ef6/frameComponent (\u5e27\u5e8f\u5217\u7ec4\u4ef6)")],e)}(cc.Component);o.frameComponent=p,cc._RF.pop()},{}],frameData:[function(t,e,o){"use strict";cc._RF.push(e,"17f43VEmj5OspPTHOd4ehsX","frameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.frameData=void 0;o.frameData=function(){this.index=0,this.url="",this.angle=0,this.offsetX=0,this.offsetY=0,this.scaleX=0,this.scaleY=0,this.isKey=!1,this.playTimes=0,this.duration=0,this.collideRect=[],this.params=[]},cc._RF.pop()},{}],funcData:[function(t,e,o){"use strict";cc._RF.push(e,"a7c7f16Y+9N/6XAgBRDSBtM","funcData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.funcData=void 0;var r=t("../../db/db"),a=function(t){function e(){var e=t.call(this)||this;return e.unlockIds=[],e.funcLockTimes={},e.storageKey="func",e}return i(e,t),e.prototype.onInit=function(){for(var t in r.db.game.func)0===r.db.game.func[t].unlockConditions.length&&this.unlockIds.push(t),this.funcLockTimes[t]=0},e.prototype.lock=function(t){for(var e=0;e<t.length;e++)this.funcLockTimes[t[e]]+=1},e.prototype.unlock=function(t){for(var e=0;e<t.length;e++)this.funcLockTimes[t[e]]-=1},e.prototype.isLock=function(t){return-1===this.unlockIds.indexOf(t)||this.funcLockTimes[t]&&this.funcLockTimes[t]>0},e.prototype.formatData=function(){var t={};return t.unlockIds=this.unlockIds,t},e.prototype.parseData=function(t){this.unlockIds=this.readProperty(t,"unlockIds",[])},e}(t("../core/baseData").baseData);o.funcData=a,cc._RF.pop()},{"../../db/db":"db","../core/baseData":"baseData"}],giftPackData:[function(t,e,o){"use strict";cc._RF.push(e,"8ad34e7PmVCSI3oehU4OSat","giftPackData"),Object.defineProperty(o,"__esModule",{value:!0}),o.giftPackData=void 0;var n=t("../../../plugin/notice/noticeConstants"),i=t("../../../plugin/notice/noticeMgr"),r=t("../../const/dataConsts"),a=t("../../data"),s=function(){function t(){this.point=0,this.data={},this.database=null}return t.prototype.init=function(t){for(var e in this.point=0,t)this.data[e]=r.TaskState.INCOMPLETE;this.database=t},t.prototype.addPoint=function(t){this.point+=t,this.updateState()},t.prototype.updateState=function(){for(var t in this.database)this.data[t]!==r.TaskState.OVER&&this.data[t]!==r.TaskState.COMPLETE&&this.point>=this.database[t].point&&(this.data[t]=r.TaskState.COMPLETE,i.noticeMgr.instance.emit(n.NEName.DAILY_TASK_GP_COMPLETE,{id:t}))},t.prototype.receive=function(t,e){void 0===e&&(e=1),this.data[t]===r.TaskState.COMPLETE&&(a.data.instance.inven.addItems(this.database[t].rewards,e),this.data[t]=r.TaskState.OVER,i.noticeMgr.instance.emit(n.NEName.DAILY_TASK_GP_RECEIVED,{id:t,multi:e}))},t.prototype.formatData=function(){var t={};return t.point=this.point,t.data=this.data,t},t.prototype.parseData=function(t){if(t&&(this.point=t.point||0,t.data))for(var e in this.data)this.data[e]=t.data[e]},t}();o.giftPackData=s,cc._RF.pop()},{"../../../plugin/notice/noticeConstants":"noticeConstants","../../../plugin/notice/noticeMgr":"noticeMgr","../../const/dataConsts":"dataConsts","../../data":"data"}],guideAnyTouchCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"92b68F4YxxGa4JBq9SOXAQe","guideAnyTouchCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideAnyTouchCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(){return!0},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideAnyTouchCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideAppointKeyCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"ce4d69Tu5hJpIg+une+GIbH","guideAppointKeyCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideAppointKeyCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(t,e){return t[0]===e[0]},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideAppointKeyCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideAppointKeyTriggleHandler:[function(t,e,o){"use strict";cc._RF.push(e,"abdc8jEUc1AiooBMAHUGyIR","guideAppointKeyTriggleHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideAppointKeyTriggleHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(t,e){return t[0]===e[0]},e}(t("./guideBaseTriggleHandler").guideBaseTriggleHandler);o.guideAppointKeyTriggleHandler=r,cc._RF.pop()},{"./guideBaseTriggleHandler":"guideBaseTriggleHandler"}],guideBaseCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"8d7c4bA7IpLuaVjpse2+RSu","guideBaseCompleteHandler"),Object.defineProperty(o,"__esModule",{value:!0}),o.guideBaseCompleteHandler=void 0;var n=function(){function t(){}return t.prototype.test=function(){return!0},t}();o.guideBaseCompleteHandler=n,cc._RF.pop()},{}],guideBaseTriggleHandler:[function(t,e,o){"use strict";cc._RF.push(e,"08f4c/DaD9BJ7s/jrzSnCON","guideBaseTriggleHandler"),Object.defineProperty(o,"__esModule",{value:!0}),o.guideBaseTriggleHandler=void 0;var n=function(){function t(){}return t.prototype.test=function(){return!0},t}();o.guideBaseTriggleHandler=n,cc._RF.pop()},{}],guideCompleteTriggleHandler:[function(t,e,o){"use strict";cc._RF.push(e,"127687ePhVEEJ+DjT171Kyr","guideCompleteTriggleHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideCompleteTriggleHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(t("./guideBaseTriggleHandler").guideBaseTriggleHandler);o.guideCompleteTriggleHandler=r,cc._RF.pop()},{"./guideBaseTriggleHandler":"guideBaseTriggleHandler"}],guideController:[function(t,e,o){"use strict";cc._RF.push(e,"448deuH2V1J74MyqY0B9pKM","guideController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../data/data"),s=t("../../../data/guide/guideTriggle"),c=t("../../../db/const/dbConsts"),d=t("../../../db/db"),p=t("../../../db/game/dbGameUtils"),u=t("../../../plugin/notice/noticeConstants"),l=t("../../../plugin/notice/noticeMgr"),h=t("../../../plugin/utils/utilBundle"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rootNode=null,e.fingerNode=null,e.touchMaskNode=null,e.blackMaskNode=null,e.msgNode=null,e.boardNode=null,e.headSprite=null,e.nameLabel=null,e.msgLabel=null,e.fullTouchNode=null,e.triggleActionPlayHandler={},e.completeActionPlayHandler={},e.actionIndex=0,e.fingerMoveBegan=!1,e.triggleActionFinish=!1,e.touchEventRigist=!1,e}return i(e,t),e.prototype.onLoad=function(){this.triggleActionPlayHandler[c.GuideTriggleActionType.FINGER_CLICK]=this.fingerClickTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.FINGER_MOVE]=this.fingerMoveTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.CAMERA_MOVE]=this.cameraMoveTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.WAIT]=this.waitTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.NODE_PROPERTY]=this.nodePropertyTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.NOTICE]=this.noticeTriggleActionPlay.bind(this),this.triggleActionPlayHandler[c.GuideTriggleActionType.AUTO_COMPLETE]=this.autoCompleteActionPlay.bind(this),this.completeActionPlayHandler[c.GuideCompleteActionType.NOTICE]=this.noticeCompleteActionPlay.bind(this)},e.prototype.start=function(){cc.game.addPersistRootNode(this.node)},e.prototype.onEnable=function(){l.noticeMgr.instance.on(u.NEName.GUIDE_TRIGGLE,this.onGuideTriggleHandler,this),l.noticeMgr.instance.on(u.NEName.GUIDE_COMPLETE,this.onGuideCompleteHandler,this),this.rootNode.active=!1},e.prototype.onDisable=function(){this.unregistTouchEvent(),l.noticeMgr.instance.off(u.NEName.GUIDE_TRIGGLE,this.onGuideTriggleHandler,this),l.noticeMgr.instance.off(u.NEName.GUIDE_COMPLETE,this.onGuideCompleteHandler,this)},e.prototype.registTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelHandler,this),this.node._touchListener.setSwallowTouches(!1)},e.prototype.unregistTouchEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoveHandler,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelHandler,this)},e.prototype.onTouchStartHandler=function(t){if(""!==a.data.instance.guide.curId){var e=d.db.game.guide[a.data.instance.guide.curId].triggleActionList[this.actionIndex];if(e&&e.type===c.GuideTriggleActionType.FINGER_MOVE){var o=this.findNode(e.value[0]),n=o.convertToNodeSpaceAR(t.getLocation());this.fingerMoveBegan=!1,cc.rect(-o.width*o.anchorX,-o.height*o.anchorY,o.width,o.height).contains(n)?this.fingerMoveBegan=!0:t.stopPropagation()}}},e.prototype.onTouchMoveHandler=function(){},e.prototype.onTouchEndHandler=function(t){if(""!==a.data.instance.guide.curId){var e=d.db.game.guide[a.data.instance.guide.curId].triggleActionList[this.actionIndex];if(e&&e.type===c.GuideTriggleActionType.FINGER_MOVE&&this.fingerMoveBegan){var o=this.findNode(e.value[1]),n=o.convertToNodeSpaceAR(t.getLocation());cc.rect(-o.width*o.anchorX,-o.height*o.anchorY,o.width,o.height).contains(n)&&s.guideTriggle.instance.testComplete(c.GuideCompleteConditionType.DRAG_END)}}},e.prototype.onTouchCancelHandler=function(){},e.prototype.onGuideTriggleHandler=function(){this.rootNode.active=!0,this.actionIndex=0,this.playTriggleAction(this.actionIndex)},e.prototype.onGuideCompleteHandler=function(t){this.touchEventRigist&&(this.touchEventRigist=!1,this.unregistTouchEvent()),this.actionIndex=0,this.playCompleteAction(t.id,this.actionIndex)},e.prototype.playTriggleAction=function(t){var e=this;if(this.touchEventRigist=!1,this.triggleActionFinish=!1,this.fingerNode.opacity=255,this.fingerNode.active=!1,this.touchMaskNode.active=!1,this.blackMaskNode.active=!1,this.boardNode.active=!1,this.msgNode.active=!1,this.fullTouchNode.active=!1,""!==a.data.instance.guide.curId){var o=d.db.game.guide[a.data.instance.guide.curId],n=p.dbGameUtils.guide.completeTypeMap[c.GuideCompleteConditionType.ANY_TOUCH];if(n&&-1!==n.indexOf(o.id)&&(this.fullTouchNode.active=!0),!(t>=o.triggleActionList.length)){var i=o.triggleActionList[t];i.type===c.GuideTriggleActionType.FINGER_MOVE&&-1===i.duration&&(this.touchEventRigist=!0,this.registTouchEvent()),this.triggleActionPlayHandler[i.type].call(this,i),-1!==i.duration?this.scheduleOnce(function(){e.actionIndex+=1,e.actionIndex>=o.triggleActionList.length||e.playTriggleAction(e.actionIndex)},i.duration):this.triggleActionFinish=!0}}},e.prototype.fingerClickTriggleActionPlay=function(t){var e=this,o=d.db.game.guide[a.data.instance.guide.curId];o.talkData.length>0&&(this.msgNode.active=!0,""!==o.talkData[0]&&h.utilBundle.instance.loadBundleRes("fight",cc.SpriteFrame,"textures/card/Play_CardCh"+o.talkData[0]).then(function(t){e.headSprite.spriteFrame=t}),this.nameLabel.string=o.talkData[1],this.msgLabel.string=o.talkData[2],this.msgLabel.node.setPosition(cc.v2(o.textPosition[0],o.textPosition[1])),this.msgNode.getComponent(cc.Widget).bottom=o.dialogPosition[1],this.msgNode.getComponent(cc.Widget).updateAlignment(),this.msgLabel.node.parent.opacity=0,this.msgLabel.node.parent.runAction(cc.sequence(cc.delayTime(.2),cc.fadeIn(.5))),this.msgNode.getChildByName("role").setPosition(cc.v2(o.roleData.position[0],o.roleData.position[1])),this.msgNode.getChildByName("role").scaleX=o.roleData.scale[0]*Math.abs(this.msgNode.getChildByName("role").scaleX),this.msgNode.getChildByName("role").scaleY*=o.roleData.scale[1]);var n=this.findNode(t.value[0]),i=n.parent.convertToWorldSpaceAR(n.position),r=this.rootNode.convertToNodeSpaceAR(i),s=cc.Camera.findCamera(n);if(r=r.sub(s.node.position).mul(s.zoomRatio).add(cc.v3((.5-n.anchorX)*n.width*s.zoomRatio,(.5-n.anchorY)*n.height*s.zoomRatio)),o.blackCover){var c=(n.width+14)*s.zoomRatio/350,p=(n.height+14)*s.zoomRatio/158;this.blackMaskNode.active=!0,this.blackMaskNode.stopAllActions(),this.blackMaskNode.width=447,this.blackMaskNode.height=256,this.blackMaskNode.position=r,this.blackMaskNode.setScale(6*c,6*p),this.blackMaskNode.runAction(cc.scaleTo(.7,c,p).easing(cc.easeOut(1.5)))}if(o.isForce){var u=n.getContentSize().width*s.zoomRatio,l=n.getContentSize().height*s.zoomRatio;this.touchMaskNode.active=!0,this.touchMaskNode.position=r,this.touchMaskNode.setContentSize(cc.size(u,l))}this.fingerNode.stopAllActions(),this.fingerNode.getChildByName("move").active=!1,o.fingerData.show&&(this.fingerNode.scaleX=Math.abs(this.fingerNode.scaleX),this.fingerNode.active=!0,this.fingerNode.getChildByName("click").active=!0,this.fingerNode.getChildByName("click").getComponent(sp.Skeleton).setAnimation(0,"animation",!0),this.fingerNode.setPosition(r.add(cc.v3(o.fingerData.offset[0],o.fingerData.offset[1],0))))},e.prototype.fingerMoveTriggleActionPlay=function(t){var e=this,o=d.db.game.guide[a.data.instance.guide.curId];o.talkData.length>0&&(this.msgNode.active=!0,""!==o.talkData[0]&&h.utilBundle.instance.loadBundleRes("fight",cc.SpriteFrame,"textures/card/Play_CardCh"+o.talkData[0]).then(function(t){e.headSprite.spriteFrame=t}),this.nameLabel.string=o.talkData[1],this.msgLabel.string=o.talkData[2],this.msgLabel.node.setPosition(cc.v2(o.textPosition[0],o.textPosition[1])),this.msgNode.getComponent(cc.Widget).bottom=o.dialogPosition[1],this.msgLabel.node.parent.opacity=0,this.msgLabel.node.parent.runAction(cc.sequence(cc.delayTime(.2),cc.fadeIn(.5))),this.msgNode.getChildByName("role").setPosition(cc.v2(o.roleData.position[0],o.roleData.position[1])),this.msgNode.getChildByName("role").scaleX=o.roleData.scale[0]*Math.abs(this.msgNode.getChildByName("role").scaleX),this.msgNode.getChildByName("role").scaleY*=o.roleData.scale[1]);var n=this.findNode(t.value[0]),i=this.findNode(t.value[1]),r=n.parent.convertToWorldSpaceAR(n.position),s=this.rootNode.convertToNodeSpaceAR(r),c=i.parent.convertToWorldSpaceAR(i.position),p=this.rootNode.convertToNodeSpaceAR(c),u=cc.Camera.findCamera(n);if(s=s.sub(u.node.position).mul(u.zoomRatio).add(cc.v3((.5-n.anchorX)*n.width*u.zoomRatio,(.5-n.anchorY)*n.height*u.zoomRatio)),p=p.sub(u.node.position).mul(u.zoomRatio).add(cc.v3((.5-i.anchorX)*i.width*u.zoomRatio,(.5-i.anchorY)*i.height*u.zoomRatio)),o.blackCover){this.blackMaskNode.active=!0,this.blackMaskNode.stopAllActions(),this.blackMaskNode.position=s.add(p).div(2),this.blackMaskNode.opacity=0;var l=((n.width+i.width)/2+Math.abs(n.x-i.x))/350,f=((n.height+i.height)/2+Math.abs(n.y-i.y))/158;this.blackMaskNode.setScale(4*l,4*f),this.blackMaskNode.runAction(cc.spawn(cc.fadeIn(.2),cc.scaleTo(.7,l,f).easing(cc.easeOut(1.5))))}this.fingerNode.position=s.add(cc.v3(o.fingerData.offset[0],o.fingerData.offset[1],0)),this.fingerNode.stopAllActions(),this.fingerNode.getChildByName("click").active=!1,this.fingerNode.getChildByName("move").active=!1,o.fingerData.show&&(this.fingerNode.active=!0,this.fingerNode.getChildByName("move").active=!0,this.fingerNode.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.fingerNode.scaleX=Math.abs(e.fingerNode.scaleX),e.fingerNode.scaleY=Math.abs(e.fingerNode.scaleY),e.fingerNode.opacity=255,e.fingerNode.position=s.add(cc.v3(o.fingerData.offset[0],o.fingerData.offset[1],0))}),cc.scaleTo(.2,.8,.8),cc.moveTo(.6,cc.v2(p.add(cc.v3(o.fingerData.offset[0],o.fingerData.offset[1],0)))),cc.fadeOut(.1)))))},e.prototype.cameraMoveTriggleActionPlay=function(){},e.prototype.waitTriggleActionPlay=function(){this.touchMaskNode.active=!0,this.touchMaskNode.width=0,this.touchMaskNode.height=0},e.prototype.nodePropertyTriggleActionPlay=function(t){this.findNode(t.value[0])[t.value[1]]=t.value[2]},e.prototype.noticeTriggleActionPlay=function(t){a.data.instance.guide.guideNotice(t.value[0],t.value[1]),l.noticeMgr.instance.emit(t.value[0],{params:t.value[1]})},e.prototype.autoCompleteActionPlay=function(){s.guideTriggle.instance.complete()},e.prototype.playCompleteAction=function(t){var e=d.db.game.guide[t];if(this.actionIndex>=e.completeActionList.length)this.rootNode.active=!1;else{var o=e.completeActionList[this.actionIndex];this.completeActionPlayHandler[o.type].call(this,o),this.actionIndex+=1,this.playCompleteAction(t,this.actionIndex)}},e.prototype.noticeCompleteActionPlay=function(t){a.data.instance.guide.guideNotice(t.value[0],t.value[1]),l.noticeMgr.instance.emit(t.value[0],{params:t.value[1]})},e.prototype.findNode=function(t){for(var e=t.split(">"),o=cc.find(e[0].trim()),n=1;n<e.length;n++){var i=e[n].trim();if(!(o=this.subFindNode(o,i))){console.error("\u6ca1\u6709\u627e\u5230\u6307\u5b9a\u8282\u70b9",t);break}}return o},e.prototype.subFindNode=function(t,e){var o=cc.find(e,t);if(!o)for(var n=0;n<t.children.length&&!(o=this.subFindNode(t.children[n],e));n++);return o},e.prototype.playSizeAction=function(t,e,o,n,i){var r=i,a=n*e,s=n*o;t.width=a,t.height=s;var c=(a-e)/i,d=(s-o)/i;t.getComponent(cc.Component).unscheduleAllCallbacks(),t.getComponent(cc.Component).schedule(function(e){var o=e;(r-=e)<=0&&(o+=r,t.getComponent(cc.Component).unscheduleAllCallbacks()),t.width-=c*o,t.height-=d*o})},e.prototype.fullTouchClick=function(){this.triggleActionFinish&&s.guideTriggle.instance.testComplete(c.GuideCompleteConditionType.ANY_TOUCH)},e.prototype.btnJumpClick=function(){a.data.instance.guide.jump(),this.rootNode.active=!1},r([y(cc.Node)],e.prototype,"rootNode",void 0),r([y(cc.Node)],e.prototype,"fingerNode",void 0),r([y(cc.Node)],e.prototype,"touchMaskNode",void 0),r([y(cc.Node)],e.prototype,"blackMaskNode",void 0),r([y(cc.Node)],e.prototype,"msgNode",void 0),r([y(cc.Node)],e.prototype,"boardNode",void 0),r([y(cc.Sprite)],e.prototype,"headSprite",void 0),r([y(cc.Label)],e.prototype,"nameLabel",void 0),r([y(cc.Label)],e.prototype,"msgLabel",void 0),r([y(cc.Node)],e.prototype,"fullTouchNode",void 0),r([g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../data/data":"data","../../../data/guide/guideTriggle":"guideTriggle","../../../db/const/dbConsts":"dbConsts","../../../db/db":"db","../../../db/game/dbGameUtils":"dbGameUtils","../../../plugin/notice/noticeConstants":"noticeConstants","../../../plugin/notice/noticeMgr":"noticeMgr","../../../plugin/utils/utilBundle":"utilBundle"}],guideData:[function(t,e,o){"use strict";cc._RF.push(e,"5f75dyvgV1No7O6wWA+u78B","guideData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideData=void 0;var r=t("../../db/db"),a=t("../../db/game/dbGameUtils"),s=t("../core/baseData"),c=t("../data"),d=function(t){function e(){var e=t.call(this)||this;return e.curId="",e.completeIds=[],e.saveIds=[],e.techViewGuide=!1,e.storageKey="guide",e}return i(e,t),e.prototype.onInit=function(){this.curId="",this.completeIds=[],this.saveIds=[]},e.prototype.guideNotice=function(){},e.prototype.addId=function(t){this.completeIds.push(t),r.db.game.guide[t].groupComplete&&(this.saveIds=this.saveIds.concat(this.completeIds),this.completeIds=[],c.data.instance.saveNextFrame=!0)},e.prototype.jump=function(){if(""!==this.curId){for(var t=r.db.game.guide[this.curId],e=a.dbGameUtils.guide.data[t.groupId],o=0;o<e.length;o++)-1===this.saveIds.indexOf(e[o])&&this.saveIds.push(e[o]);this.saveIds=this.saveIds.concat(this.completeIds),this.completeIds=[],c.data.instance.saveNextFrame=!0}},e.prototype.guideCompleted=function(t){return-1!==this.completeIds.indexOf(t)||-1!==this.saveIds.indexOf(t)},e.prototype.isRunning=function(){return""!==this.curId},e.prototype.isFinish=function(){return this.guideCompleted("10100370")},e.prototype.formatData=function(){var t={};return t.curId=this.curId,t.saveIds=this.saveIds,t.techViewGuide=this.techViewGuide,t},e.prototype.parseData=function(t){this.curId=this.readProperty(t,"curId",""),this.saveIds=this.readProperty(t,"saveIds",[]),this.techViewGuide=this.readProperty(t,"techViewGuide",!1)},e}(s.baseData);o.guideData=d,cc._RF.pop()},{"../../db/db":"db","../../db/game/dbGameUtils":"dbGameUtils","../core/baseData":"baseData","../data":"data"}],guideDragEndCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"94b14C+KJRI1pAhRiSgPjie","guideDragEndCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideDragEndCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(){return!0},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideDragEndCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideHideViewCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"e2151ihrQVOQbjsJQK+bV3u","guideHideViewCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideHideViewCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(){return!0},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideHideViewCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideHideViewTriggleHandler:[function(t,e,o){"use strict";cc._RF.push(e,"8af81V3jxxCDbRYfLbkKfaJ","guideHideViewTriggleHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideHideViewTriggleHandler=void 0;var r=t("../../../db/db"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(t,e){return 0===e.length||r.db.game.view[e[0]].name===t[0]},e}(t("./guideBaseTriggleHandler").guideBaseTriggleHandler);o.guideHideViewTriggleHandler=a,cc._RF.pop()},{"../../../db/db":"db","./guideBaseTriggleHandler":"guideBaseTriggleHandler"}],guideRectTouchCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"a1ceeDdfNdEGoxpyol9pJoQ","guideRectTouchCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideRectTouchCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(){return!0},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideRectTouchCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideShowViewCompleteHandler:[function(t,e,o){"use strict";cc._RF.push(e,"2db9fEIXUdBoItJAs/11OLt","guideShowViewCompleteHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideShowViewCompleteHandler=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(){return!0},e}(t("./guideBaseCompleteHandler").guideBaseCompleteHandler);o.guideShowViewCompleteHandler=r,cc._RF.pop()},{"./guideBaseCompleteHandler":"guideBaseCompleteHandler"}],guideShowViewTriggleHandler:[function(t,e,o){"use strict";cc._RF.push(e,"335c4P2oLBE5YZZJZmonItz","guideShowViewTriggleHandler");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.guideShowViewTriggleHandler=void 0;var r=t("../../../db/db"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.test=function(t,e){return 0===e.length||r.db.game.view[e[0]].name===t[0]},e}(t("./guideBaseTriggleHandler").guideBaseTriggleHandler);o.guideShowViewTriggleHandler=a,cc._RF.pop()},{"../../../db/db":"db","./guideBaseTriggleHandler":"guideBaseTriggleHandler"}],guideTriggle:[function(t,e,o){"use strict";cc._RF.push(e,"abadayu8tBHX7j2dL09+DO1","guideTriggle"),Object.defineProperty(o,"__esModule",{value:!0}),o.guideTriggle=void 0;var n=t("../../db/db"),i=t("../../db/game/dbGameUtils"),r=t("../../plugin/dialog/dialogMgr"),a=t("../../plugin/notice/noticeMgr"),s=t("../data"),c=t("./complete/guideAnyTouchCompleteHandler"),d=t("./complete/guideDragEndCompleteHandler"),p=t("./complete/guideHideViewCompleteHandler"),u=t("./complete/guideRectTouchCompleteHandler"),l=t("./complete/guideShowViewCompleteHandler"),h=t("./triggle/guideCompleteTriggleHandler"),f=t("./triggle/guideAppointKeyTriggleHandler"),g=t("./triggle/guideHideViewTriggleHandler"),y=t("./triggle/guideShowViewTriggleHandler"),m=t("./complete/guideAppointKeyCompleteHandler"),_=t("../../db/const/dbConsts"),v=t("../../plugin/notice/noticeConstants"),b=function(){function t(){this.triggleTestHandlerMap={},this.triggleParamMap={},this.completeTestHandlerMap={},this.completeParams={},this.keyMap={},this.anyClickEvent=!1}return t.prototype.init=function(){this.triggleTestHandlerMap[_.GuideTriggleConditionType.APPOINT_KEY]=new f.guideAppointKeyTriggleHandler,this.triggleTestHandlerMap[_.GuideTriggleConditionType.SHOW_VIEW]=new y.guideShowViewTriggleHandler,this.triggleTestHandlerMap[_.GuideTriggleConditionType.HIDE_VIEW]=new g.guideHideViewTriggleHandler,this.triggleTestHandlerMap[_.GuideTriggleConditionType.GUIDE_COMPLETE]=new h.guideCompleteTriggleHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.APPOINT_KEY]=new m.guideAppointKeyCompleteHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.SHOW_VIEW]=new l.guideShowViewCompleteHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.HIDE_VIEW]=new p.guideHideViewCompleteHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.ANY_TOUCH]=new c.guideAnyTouchCompleteHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.RECT_TOUCH]=new u.guideRectTouchCompleteHandler,this.completeTestHandlerMap[_.GuideCompleteConditionType.DRAG_END]=new d.guideDragEndCompleteHandler},t.prototype.testScene=function(t){return cc.director.getScene().name===t},t.prototype.testView=function(t){if("any"===t)return!0;if("none"===t)return!!r.dialogMgr.instance.isEmpty();var e=n.db.game.view[t];return!!r.dialogMgr.instance.isTopAndComplete(e.name)},t.prototype.testPrevIds=function(t){if(0===t.length)return!0;for(var e=0;e<t.length;e++)if(-1!==s.data.instance.guide.completeIds.indexOf(t[e]))return!0;return!1},t.prototype.testBackIds=function(t){for(var e=0;e<t.length;e++)if(-1!==s.data.instance.guide.completeIds.indexOf(t[e]))return!1;return!0},t.prototype.testTriggle=function(t,e){if(""===s.data.instance.guide.curId){e||(e=[]);var o=i.dbGameUtils.guide.triggleTypeMap[t];if(o)for(var r=0;r<o.length;r++){var a=o[r];if(!s.data.instance.guide.guideCompleted(a)){var c=n.db.game.guide[a];if(this.testScene(c.scene)&&this.testView(c.viewId)&&this.testPrevIds(c.prevIds)&&this.testBackIds(c.backIds)){for(var d=!0,p=0;p<c.triggleConditions.length;p++){d=!0;for(var u=0;u<c.triggleConditions[p].length;u++){var l=[];if(t===c.triggleConditions[p][u].type&&(l=l.concat(e)),this.triggleParamMap[t]&&(l=this.triggleParamMap[t]()),!this.triggleTestHandlerMap[c.triggleConditions[p][u].type].test(l,c.triggleConditions[p][u].value)){d=!1;break}}if(d)break}if(d){this.triggle(a);break}}}}}},t.prototype.triggle=function(t){s.data.instance.guide.curId=t,s.data.instance.func.lock(n.db.game.guide[t].lockFuncs),a.noticeMgr.instance.emit(v.NEName.GUIDE_LOCK_FUNC,{params:n.db.game.guide[t].lockFuncs}),a.noticeMgr.instance.emit(v.NEName.GUIDE_TRIGGLE)},t.prototype.testComplete=function(t,e){if(""!==s.data.instance.guide.curId){var o=n.db.game.guide[s.data.instance.guide.curId];e||(e=[]),t===_.GuideCompleteConditionType.ANY_TOUCH&&(this.anyClickEvent=!0);var r=i.dbGameUtils.guide.completeTypeMap[t];if(r&&-1!==r.indexOf(s.data.instance.guide.curId)){for(var a=!0,c=0;c<o.completeConditions.length;c++){a=!0;for(var d=0;d<o.completeConditions[c].length;d++){var p=[];if(t===o.completeConditions[c][d].type&&(p=p.concat(e)),this.completeParams[t]&&(p=this.completeParams[t]()),!this.completeTestHandlerMap[o.completeConditions[c][d].type].test(p,o.completeConditions[c][d].value)){a=!1;break}}if(a)break}a&&this.complete()}}},t.prototype.complete=function(){s.data.instance.func.unlock(n.db.game.guide[s.data.instance.guide.curId].lockFuncs);var e=s.data.instance.guide.curId;s.data.instance.guide.curId="",s.data.instance.guide.addId(e),a.noticeMgr.instance.emit(v.NEName.GUIDE_COMPLETE,{id:e}),t.instance.testTriggle(_.GuideTriggleConditionType.GUIDE_COMPLETE,[e])},t.instance=new t,t}();o.guideTriggle=b,cc._RF.pop()},{"../../db/const/dbConsts":"dbConsts","../../db/db":"db","../../db/game/dbGameUtils":"dbGameUtils","../../plugin/dialog/dialogMgr":"dialogMgr","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../data":"data","./complete/guideAnyTouchCompleteHandler":"guideAnyTouchCompleteHandler","./complete/guideAppointKeyCompleteHandler":"guideAppointKeyCompleteHandler","./complete/guideDragEndCompleteHandler":"guideDragEndCompleteHandler","./complete/guideHideViewCompleteHandler":"guideHideViewCompleteHandler","./complete/guideRectTouchCompleteHandler":"guideRectTouchCompleteHandler","./complete/guideShowViewCompleteHandler":"guideShowViewCompleteHandler","./triggle/guideAppointKeyTriggleHandler":"guideAppointKeyTriggleHandler","./triggle/guideCompleteTriggleHandler":"guideCompleteTriggleHandler","./triggle/guideHideViewTriggleHandler":"guideHideViewTriggleHandler","./triggle/guideShowViewTriggleHandler":"guideShowViewTriggleHandler"}],hookTouchNode:[function(t,e,o){"use strict";cc._RF.push(e,"feb05o9H7pFnag5Hudb0E3k","hookTouchNode");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clickEvents=[],e.touchStart=!1,e}return i(e,t),e.prototype.onLoad=function(){this.node.width=cc.winSize.width,this.node.height=cc.winSize.height},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this),this.node._touchListener.setSwallowTouches(!1)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStartHandler,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEndHandler,this)},e.prototype.onTouchStartHandler=function(){this.touchStart=!0},e.prototype.onTouchEndHandler=function(){if(this.touchStart){this.touchStart=!1;for(var t=0;t<this.clickEvents.length;t++)this.clickEvents[t].emit([this])}},r([c(cc.Component.EventHandler)],e.prototype,"clickEvents",void 0),r([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],httpRequestBase:[function(t,e,o){"use strict";cc._RF.push(e,"65e47aOfvNFILndxWJXyXob","httpRequestBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.httpRequestBase=void 0;var n=function(){function t(){}return t.prototype.login=function(){},t.prototype.getFriendList=function(){},t.prototype.saveData=function(){},t.prototype.readData=function(){},t}();o.httpRequestBase=n,cc._RF.pop()},{}],httpRequestYt:[function(t,e,o){"use strict";cc._RF.push(e,"2e50fS3nEZP7K2hq2dOvozF","httpRequestYt");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.httpRequestYt=void 0;var r=t("./netHttp"),a=t("../../data/pluginUserData"),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.login=function(t,e){var o=cc.sys.localStorage.getItem("__GAME_USER_ID__"),n=cc.sys.localStorage.getItem("__GAME_OPEN_ID__");if(o&&n)return a.pluginUserData.instance.userId=o,a.pluginUserData.instance.openId=n,void(e&&e());var i=t.inviteCode?"&bindcode="+t.inviteCode:"",s=t.jsCode?"&jsCode="+t.jsCode:"",c=t.anonymousCode?"&anonymous="+t.anonymousCode:"";r.netHttp.get("?channel_id=0&game_id=0"+s+c+i,function(t){var o=JSON.parse(t);console.log("\u767b\u5f55\u8fd4\u56de"+t),200===o.code?(a.pluginUserData.instance.userId=o.data.sharecode,a.pluginUserData.instance.openId=o.data.openid,console.log("openId -> "+a.pluginUserData.instance.openId+", gameId -> "+a.pluginUserData.instance.userId),cc.sys.localStorage.setItem("__GAME_USER_ID__",a.pluginUserData.instance.userId),cc.sys.localStorage.setItem("__GAME_OPEN_ID__",a.pluginUserData.instance.openId),e(o.data)):e()})},e.prototype.getFriendList=function(t){r.netHttp.get("?play_id="+a.pluginUserData.instance.userId,function(e){console.log("\u83b7\u53d6\u597d\u53cb\u5217\u8868\u8fd4\u56de",e);var o=JSON.parse(e);200===o.code&&t&&t(o.data)})},e.prototype.saveData=function(t,e){r.netHttp.post("","play_id="+a.pluginUserData.instance.userId+"&key="+t+"&value="+e,function(t){console.log("\u5b58\u50a8\u6570\u636e\u8fd4\u56de -> ",t)})},e.prototype.readData=function(t,e){r.netHttp.get("?play_id="+a.pluginUserData.instance.userId+"&key="+t,function(o){console.log("\u8bfb\u53d6\u6570\u636e\u8fd4\u56de -> ",a.pluginUserData.instance.userId,t,o);var n=JSON.parse(o);200===n.code?(console.log(n.data),e(JSON.parse(n.data.valuecode))):e(null)})},e}(t("./httpRequestBase").httpRequestBase);o.httpRequestYt=s,cc._RF.pop()},{"../../data/pluginUserData":"pluginUserData","./httpRequestBase":"httpRequestBase","./netHttp":"netHttp"}],httpRequest:[function(t,e,o){"use strict";cc._RF.push(e,"7d65fnDVUBHhbwKd8cstkuk","httpRequest"),Object.defineProperty(o,"__esModule",{value:!0}),o.httpRequest=void 0;var n=t("../../../../../const/consts"),i=t("./httpRequestYt"),r=function(){function t(){this.hr=null}return t.prototype.login=function(t,e){this.hr.login(t,e)},t.prototype.getFriendList=function(t){this.hr.getFriendList(t)},t.prototype.saveData=function(t,e){this.hr.saveData(t,e)},t.prototype.readData=function(t,e){this.hr.readData(t,e)},t.prototype.bind=function(){switch(n.consts.HTTP_PLATFORM){case n.HttpRequestPlatform.YT:this.hr=new i.httpRequestYt}},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.bind()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.httpRequest=r,cc._RF.pop()},{"../../../../../const/consts":void 0,"./httpRequestYt":"httpRequestYt"}],invenData:[function(t,e,o){"use strict";cc._RF.push(e,"dedd2h+EJ9G5qeWmEVWoGtx","invenData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.invenData=void 0;var r=t("../../db/db"),a=t("../../plugin/notice/noticeConstants"),s=t("../../plugin/notice/noticeMgr"),c=t("../core/baseData"),d=t("../data"),p=function(t){function e(){var e=t.call(this)||this;return e.data={},e.propertyModifyNotice={},e.storageKey="inven",e}return i(e,t),e.prototype.onInit=function(){this.propertyModifyNotice[r.db.game.common.coinId]=a.NEName.UPDATE_COIN},e.prototype.onReadLater=function(){},Object.defineProperty(e.prototype,"coin",{get:function(){return this.getItemCount(r.db.game.common.coinId)},enumerable:!1,configurable:!0}),e.prototype.addItem=function(t,e){this.data[t]||(this.data[t]=0),this.data[t]+=e,r.db.game.item[t].type,this.propertyModifyNotice[t]&&s.noticeMgr.instance.emit(this.propertyModifyNotice[t]),d.data.instance.saveNextFrame=!0},e.prototype.subItem=function(t,e){!this.data[t]||this.data[t]<e||(this.data[t]-=e,r.db.game.item[t].type,this.propertyModifyNotice[t]&&s.noticeMgr.instance.emit(this.propertyModifyNotice[t]),d.data.instance.saveNextFrame=!0)},e.prototype.addItems=function(t,e){if(void 0===e&&(e=1),t instanceof Array)for(var o=0;o<t.length;o++)this.addItem(t[o][0],t[o][1]*e);else for(var n in t)this.addItem(n,t[n]*e)},e.prototype.subItems=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.subItem(t[e][0],t[e][1]);else for(var o in t)this.subItem(o,t[o])},e.prototype.getItemCount=function(t){return this.data[t]?this.data[t]:0},e.prototype.match=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++){var o=t[e][0],n=t[e][1];if(this.getItemCount(o)<n)return!1}else for(var i in t)if(this.getItemCount(i)<t[i])return!1;return!0},e.prototype.formatData=function(){var t={};return t.data=this.data,t},e.prototype.parseData=function(t){this.data=this.readProperty(t,"data",{})},e}(c.baseData);o.invenData=p,cc._RF.pop()},{"../../db/db":"db","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../core/baseData":"baseData","../data":"data"}],netHttp:[function(t,e,o){"use strict";cc._RF.push(e,"b3140hQsKBBxplQEf86EPfP","netHttp");var n,i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.netHttp=o.HttpMethod=void 0,function(t){t.GET="GET",t.POST="POST"}(n=o.HttpMethod||(o.HttpMethod={}));var a=function(){function t(){}return t.get=function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){var t=o.responseText;e&&e(t)}},o.open(n.GET,t,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate"),o.timeout=5e3,o.send()},t.asyncGet=function(e){return i(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(o){t.get(e,function(t){o(t)})})]})})},t.post=function(t,e,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState&&i.status>=200&&i.status<300){var t=i.responseText;o&&o(t)}else o&&o("")},i.open(n.POST,t,!0),cc.sys.isNative&&i.setRequestHeader("Accept-Encoding","gzip,deflate"),i.timeout=5e3,i.send(e)},t.asyncPost=function(e,o){return i(this,void 0,Promise,function(){return r(this,function(){return[2,new Promise(function(n){t.post(e,o,function(t){n(t)})})]})})},t}();o.netHttp=a,cc._RF.pop()},{}],noticeConstants:[function(t,e,o){"use strict";cc._RF.push(e,"dd11aZL5MBIv5M0nvG/Rqly","noticeConstants"),Object.defineProperty(o,"__esModule",{value:!0}),o.NEName=void 0,function(t){t.NONE="NONE",t.SHOW="SHOW",t.HIDE="HIDE",t.SHOW_TOAST="SHOW_TOAST",t.SHOW_MSG="SHOW_MSG",t.SHOW_REWARD="SHOW_REWARD",t.ENTER_NEW_DAY="ENTER_NEW_DAY",t.GUIDE_TRIGGLE="GUIDE_TRIGGLE",t.GUIDE_COMPLETE="GUIDE_COMPLETE",t.DAILY_TASK_STATE_UPDATE="DAILY_TASK_STATE_UPDATE",t.DAILY_TASK_RECEIVED="DAILY_TASK_RECEIVED",t.DAILY_TASK_GP_COMPLETE="DAILY_TASK_GP_COMPLETE",t.DAILY_TASK_GP_RECEIVED="DAILY_TASK_GP_RECEIVED",t.ACHIV_TASK_STATE_UPDATE="ACHIV_TASK_STATE_UPDATE",t.ACHIV_TASK_RECEIVED="ACHIV_TASK_RECEIVED",t.UPDATE_COIN="UPDATE_COIN",t.UPDATE_GEM="UPDATE_GEM",t.SET_CAT_PART="SET_CAT_PART",t.CLEAR_CAT_GROUP="CLEAR_CAT_GROUP",t.ADD_CAT_SUB_PART="ADD_CAT_SUB_PART",t.REMOVE_CAT_SUB_PART="REMOVE_CAT_SUB_PART",t.UPDATE_SIDEBAR_STATE="UPDATE_SIDEBAR_STATE",t.SHOW_PHOTO="SHOW_PHOTO",t.VIEW_CAT="VIEW_CAT",t.SUIT_GET="SUIT_GET",t.REFRESH_CAT_VIEW="REFRESH_CAT_VIEW",t.UPDATE_PART_ITEM="UPDATE_PART_ITEM",t.UPDATE_SIGNIN="UPDATE_SIGNIN",t.SHOW_SIGNIN_REWARD="SHOW_SIGNIN_REWARD"}(o.NEName||(o.NEName={})),cc._RF.pop()},{}],noticeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"07c66JSlAJLlK4X/dmpBidj","noticeMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.noticeMgr=void 0;var n=function(){function t(){this.eventMap={}}return t.prototype.on=function(t,e,o){this.eventMap[t]||(this.eventMap[t]=[]),this.eventMap[t].push({callback:e,target:o})},t.prototype.emit=function(t,e){void 0===e&&(e=null);var o=this.eventMap[t];if(o)for(var n=0;n<o.length;n++){var i=o[n];i&&i.callback.call(i.target,e)}},t.prototype.off=function(t,e,o){var n=this.eventMap[t];if(n)for(var i=0;i<n.length;i++){var r=n[i];if(r&&r.callback===e&&r.target===o){n[i]=void 0;break}}},t.prototype.offByName=function(t){this.eventMap[t]=void 0},t.instance=new t,t}();o.noticeMgr=n,cc._RF.pop()},{}],partData:[function(t,e,o){"use strict";cc._RF.push(e,"30b764/zLhA9I7IIpgxUOtW","partData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.partData=void 0;var r=t("../../db/const/dbConsts"),a=t("../../db/db"),s=t("../../plugin/notice/noticeConstants"),c=t("../../plugin/notice/noticeMgr"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ids=[],e}return i(e,t),e.prototype.onInit=function(){},e.prototype.onReadLater=function(){if(0===this.ids.length)for(var t in a.db.game.part)a.db.game.part[t].unlockType===r.PartUnlockType.DEFAULT&&this.ids.push(t)},e.prototype.unlockPart=function(t){-1===this.ids.indexOf(t)&&(this.ids.push(t),c.noticeMgr.instance.emit(s.NEName.UPDATE_PART_ITEM,{id:t}))},e.prototype.unlockParts=function(t){for(var e=0;e<t.length;e++)this.unlockPart(t[e])},e.prototype.isUnlock=function(t){return-1!==this.ids.indexOf(t)},e.prototype.formatData=function(){var t={};return t.ids=this.ids,t},e.prototype.parseData=function(t){this.ids=t.ids},e}(t("../core/baseData").baseData);o.partData=d,cc._RF.pop()},{"../../db/const/dbConsts":"dbConsts","../../db/db":"db","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../core/baseData":"baseData"}],photoData:[function(t,e,o){"use strict";cc._RF.push(e,"a872d3a5QJJ06MQ8R2c62FN","photoData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.photoData=void 0;var r=t("../core/baseData"),a=t("../data"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data={},e.idIndex=0,e}return i(e,t),e.prototype.addPhoto=function(t){var e="photo_"+this.idIndex++;this.data[e]=t,a.data.instance.saveNextFrame=!0},e.prototype.removePhoto=function(t){this.data[t]&&delete this.data[t]},e.prototype.formatData=function(){var t={};return t.data=this.data,t.idIndex=this.idIndex,t},e.prototype.parseData=function(t){this.data=t.data,this.idIndex=t.idIndex},e}(r.baseData);o.photoData=s,cc._RF.pop()},{"../core/baseData":"baseData","../data":"data"}],platformAndroid:[function(t,e,o){"use strict";cc._RF.push(e,"3eaa4+YP+FAxLvu/yEMdYfA","platformAndroid");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformAndroid=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.login=function(){},e}(t("./platformNative").platformNative);o.platformAndroid=r,cc._RF.pop()},{"./platformNative":"platformNative"}],platformBase:[function(t,e,o){"use strict";cc._RF.push(e,"85cb8LlTMdJg7pghCT8YOTd","platformBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.platformBase=void 0;var n=function(){function t(){}return t.prototype.init=function(){},t.prototype.login=function(t){t&&t()},t.prototype.getVersion=function(){return"1.0.0"},t.prototype.getDBVersion=function(){return"1.0.0"},t.prototype.getFrameRate=function(){return 60},t.prototype.checkUpdate=function(t){t&&t(!1)},t.prototype.getSetting=function(t){t&&t({})},t.prototype.getUserInfo=function(t){t&&t({})},t.prototype.authorize=function(t,e){e&&e(1)},t.prototype.openSetting=function(t){t&&t({})},t.prototype.getLaunchParam=function(){return""},t.prototype.showToast=function(){},t.prototype.share=function(){},t.prototype.shake=function(t,e){void 0===e&&(e="light")},t.prototype.getLaunchOptions=function(){},t.prototype.screenShotOpen=function(){return!1},t.prototype.screenShot=function(){},t.prototype.end=function(){cc.game.end()},t.prototype.installShortcut=function(){},t}();o.platformBase=n,cc._RF.pop()},{}],platformIos:[function(t,e,o){"use strict";cc._RF.push(e,"1a360dWy2VNqrDsOmSHenRL","platformIos");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformIos=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.login=function(){},e}(t("./platformNative").platformNative);o.platformIos=r,cc._RF.pop()},{"./platformNative":"platformNative"}],platformNative:[function(t,e,o){"use strict";cc._RF.push(e,"cd616LewGxFYoE0tinWjoCT","platformNative");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformNative=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.login=function(){},e.prototype.getSetting=function(){},e.prototype.getUserInfo=function(){},e.prototype.authorize=function(){},e.prototype.openSetting=function(){},e.prototype.getLaunchParam=function(){return""},e.prototype.showToast=function(){},e.prototype.share=function(){},e.prototype.shake=function(t,e){void 0===e&&(e="light")},e.prototype.getLaunchOptions=function(){},e.prototype.screenShot=function(){},e.prototype.end=function(){cc.game.end()},e}(t("./platformBase").platformBase);o.platformNative=r,cc._RF.pop()},{"./platformBase":"platformBase"}],platformOppo:[function(t,e,o){"use strict";cc._RF.push(e,"7e5f2LJ3DdFYJv7oKIBImrv","platformOppo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformOppo=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.installShortcut=function(t){qg.hasShortcutInstalled({success:function(e){0==e?qg.installShortcut({success:function(){t&&t(!0)},fail:function(){t&&t(!1)},complete:function(){}}):t&&t(!1)},fail:function(){t&&t(!1)},complete:function(){}})},e}(t("./platformBase").platformBase);o.platformOppo=r,cc._RF.pop()},{"./platformBase":"platformBase"}],platformTT:[function(t,e,o){"use strict";cc._RF.push(e,"67116wwnCRLdr2RN1DOOv6g","platformTT");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformTT=void 0;var r=t("../net/http/httpRequest"),a=t("../share/shareMgr"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.advertMap={},e}return i(e,t),e.prototype.init=function(){tt.showShareMenu({}),tt.onShareAppMessage(function(){var t=a.shareMgr.instance.getShareInfo([]);return{imageUrl:t.imageUrl,title:t.title}})},e.prototype.login=function(t){var e=this;tt.login({success:function(o){o.code?r.httpRequest.instance.login({code:o.code,anonymousCode:o.anonymousCode,inviteCode:e.getLaunchParam("InviteCode")},t):console.log("tt.login error")}})},e.prototype.getVersion=function(){return"1.0.0"},e.prototype.getSetting=function(t){tt.getSetting({success:function(e){t(e.authSetting)}})},e.prototype.getUserInfo=function(t){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),tt.getUserInfo({success:function(e){console.log("\u7528\u6237\u4fe1\u606f\u6210\u529f",e),t(e.userInfo)},fail:function(t){console.log("\u7528\u6237\u4fe1\u606f\u5931\u8d25",t)},complete:function(t){console.log("\u7528\u6237\u4fe1\u606f\u7ed3\u675f",t)}})},e.prototype.authorize=function(t,e){tt.authorize({scope:t.scope,success:function(t){console.log("auth success",t),e(1)},fail:function(t){console.log("auth fail",t),e(0)}})},e.prototype.openSetting=function(t){tt.openSetting({success:t})},e.prototype.getLaunchParam=function(t){return tt.getLaunchOptionsSync().query[t]},e.prototype.showToast=function(t){tt.showToast({title:t,icon:"none",duration:2e3})},e.prototype.share=function(t){var e=a.shareMgr.instance.getShareInfo([]);tt.shareAppMessage({imageUrl:e.imageUrl,title:e.title,query:t?t.query:null,channel:t&&t.channel?t.channel:"",extra:{videoPath:t.videoPath}})},e.prototype.shake=function(t,e){switch(void 0===e&&(e=""),t){case 0:tt.vibrateShort({});break;case 1:tt.vibrateLong({})}},e.prototype.getLaunchOptions=function(){return tt.getLaunchOptionsSync()},e.prototype.screenShotOpen=function(){return!0},e.prototype.screenShot=function(t){cc.game.canvas.toTempFilePath({success:function(e){t(e.tempFilePath)}})},e.prototype.end=function(){tt.exitMiniProgram({})},e}(t("./platformBase").platformBase);o.platformTT=s,cc._RF.pop()},{"../net/http/httpRequest":"httpRequest","../share/shareMgr":"shareMgr","./platformBase":"platformBase"}],platformVivo:[function(t,e,o){"use strict";cc._RF.push(e,"46f2b0MrcdFNriEYR3Tj5AU","platformVivo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformVivo=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.getVersion=function(){return"1.0.0"},e.prototype.installShortcut=function(t){qg.hasShortcutInstalled({success:function(e){0==e?qg.installShortcut({success:function(){t&&t(!0)},fail:function(){t&&t(!1)},complete:function(){}}):t&&t(!1)},fail:function(){t&&t(!1)},complete:function(){}})},e}(t("./platformBase").platformBase);o.platformVivo=r,cc._RF.pop()},{"./platformBase":"platformBase"}],platformWeb:[function(t,e,o){"use strict";cc._RF.push(e,"743dfJdUTFLOYTcVoSfVSuD","platformWeb");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformWeb=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.init=function(){},e.prototype.login=function(t){t&&t()},e.prototype.getVersion=function(){return"1.0.0"},e.prototype.getSetting=function(){},e.prototype.getUserInfo=function(){},e.prototype.authorize=function(){},e.prototype.openSetting=function(){},e.prototype.getLaunchParam=function(){return""},e.prototype.showToast=function(){},e.prototype.share=function(){},e.prototype.shake=function(t,e){void 0===e&&(e="light")},e.prototype.getLaunchOptions=function(){},e.prototype.screenShot=function(){},e.prototype.end=function(){cc.game.end()},e.prototype.installShortcut=function(t){t&&t(!0)},e}(t("./platformBase").platformBase);o.platformWeb=r,cc._RF.pop()},{"./platformBase":"platformBase"}],platformWx:[function(t,e,o){"use strict";cc._RF.push(e,"3ac0ei0HpNKiLvOT3rtpFf2","platformWx");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.platformWx=void 0;var r=t("../net/http/httpRequest"),a=t("../share/shareMgr"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.advertMap={},e.loginBtn=null,e}return i(e,t),e.prototype.init=function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){var t=a.shareMgr.instance.getShareInfo([]);return{imageUrl:t.imageUrl,title:t.title}}),wx.onShareTimeline(function(){var t=a.shareMgr.instance.getShareInfo([]);return{imageUrl:t.imageUrl,title:t.title}})},e.prototype.login=function(t){var e=this;wx.login({success:function(o){o.code?r.httpRequest.instance.login({jsCode:o.code,inviteCode:e.getLaunchParam("InviteCode")},t):console.log("\u5fae\u4fe1\u767b\u5f55\u5931\u8d25\uff0c\u6ca1\u6709CODE\u503c")}})},e.prototype.getVersion=function(){return"1.0.0"},e.prototype.checkUpdate=function(t){var e=wx.getUpdateManager();e.onCheckForUpdate(function(o){console.log("\u5fae\u4fe1\u66f4\u65b0\u68c0\u6d4b",o.hasUpdate),o.hasUpdate&&(e.onUpdateReady(function(){wx.showModal({title:"\u66f4\u65b0\u63d0\u793a",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u51c6\u5907\u597d\uff0c\u662f\u5426\u91cd\u542f\u5e94\u7528\uff1f",success:function(t){t.confirm&&e.applyUpdate()}})}),e.onUpdateFailed(function(){wx.showModal({title:"\u5df2\u7ecf\u6709\u65b0\u7248\u672c\u4e86\u54df~",content:"\u65b0\u7248\u672c\u5df2\u7ecf\u4e0a\u7ebf\u5566~\uff0c\u8bf7\u60a8\u5220\u9664\u5f53\u524d\u5c0f\u7a0b\u5e8f\uff0c\u91cd\u65b0\u641c\u7d22\u6253\u5f00\u54df~"})})),t&&t(o.hasUpdate)})},e.prototype.getSetting=function(t){wx.getSetting({success:function(e){t(e.authSetting)}})},e.prototype.getUserInfo=function(t){console.log("\u83b7\u53d6\u7528\u6237\u4fe1\u606f"),wx.getUserInfo({success:function(e){console.log("\u7528\u6237\u4fe1\u606f\u6210\u529f",e),t(e.userInfo)},fail:function(t){console.log("\u7528\u6237\u4fe1\u606f\u5931\u8d25",t)},complete:function(t){console.log("\u7528\u6237\u4fe1\u606f\u7ed3\u675f",t)}})},e.prototype.authorize=function(t){var e=this;if("scope.userInfo"===t.scope){this.loginBtn&&(this.loginBtn.hide(),this.loginBtn.destroy(),this.loginBtn=null);var o=wx.getSystemInfoSync(),n=o.pixelRatio*o.windowWidth,i=o.pixelRatio*o.windowHeight/cc.winSize.height,r=(n-i*cc.winSize.width)/2,a=t.size.width,s=t.size.height,c=(cc.winSize.width/2+t.position.x-a/2)*i+r,d=(cc.winSize.height/2-t.position.y-s/2)*i;this.loginBtn=wx.createUserInfoButton({withCredentials:!1,type:"text",text:"\u6388\u6743\u767b\u5f55",style:{backgroundColor:"#36b321",borderColor:"#00000000",borderRadius:4,borderWidth:0,color:"#ffffff",fontSize:10,height:s/o.pixelRatio*i,left:c/o.pixelRatio,lineHeight:30,textAlign:"center",top:d/o.pixelRatio,width:a/o.pixelRatio*i}}),this.loginBtn.onTap(function(t){t.userInfo&&(e.loginBtn.hide(),e.loginBtn.destroy())})}},e.prototype.openSetting=function(t){wx.openSetting({success:t})},e.prototype.getLaunchParam=function(t){return wx.getLaunchOptionsSync().query[t]},e.prototype.showToast=function(t){wx.showToast({title:t,icon:"none",duration:2e3})},e.prototype.share=function(t){var e=a.shareMgr.instance.getShareInfo([]);wx.shareAppMessage({imageUrl:e.imageUrl,title:e.title,query:t?t.query:null})},e.prototype.shake=function(t,e){switch(void 0===e&&(e="light"),t){case 0:wx.vibrateShort({type:e});break;case 1:wx.vibrateLong({})}},e.prototype.getLaunchOptions=function(){return wx.getLaunchOptionsSync()},e.prototype.screenShotOpen=function(){return!1},e.prototype.screenShot=function(t){cc.game.canvas.toTempFilePath({success:function(e){t(e.tempFilePath)}})},e.prototype.end=function(){wx.exitMiniProgram({})},e}(t("./platformBase").platformBase);o.platformWx=s,cc._RF.pop()},{"../net/http/httpRequest":"httpRequest","../share/shareMgr":"shareMgr","./platformBase":"platformBase"}],platform:[function(t,e,o){"use strict";cc._RF.push(e,"39334O/mBlG5rmheGI3KnF6","platform");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.platform=void 0;var r=t("../notice/noticeConstants"),a=t("../notice/noticeMgr"),s=t("./platformAndroid"),c=t("./platformIos"),d=t("./platformWeb"),p=t("./platformWx"),u=t("../../../../const/consts"),l=t("./platformOppo"),h=t("../advert/advert"),f=t("./platformVivo"),g=t("../../prefab/toast/xToast"),y=function(){function t(){this.ip=null,this.shakeState=1}return t.prototype.init=function(){this.ip.init(),h.advert.instance.init(),console.log("\u5e73\u53f0\u521d\u59cb\u5316"),cc.game.on(cc.game.EVENT_SHOW,function(t){console.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0\uff0c\u6570\u636e"+JSON.stringify(t)),cc.game.resume(),a.noticeMgr.instance.emit(r.NEName.SHOW,t)}),cc.game.on(cc.game.EVENT_HIDE,function(t){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),cc.game.pause(),a.noticeMgr.instance.emit(r.NEName.HIDE,t)})},t.prototype.login=function(t){this.ip.login(function(){t&&t()})},t.prototype.asyncLogin=function(){return n(this,void 0,void 0,function(){var t=this;return i(this,function(){return[2,new Promise(function(e){t.login(function(){e()})})]})})},t.prototype.getVersion=function(){return this.ip.getVersion()},t.prototype.getDBVersion=function(){return this.ip.getDBVersion()},t.prototype.getFrameRate=function(){return this.ip.getFrameRate()},t.prototype.checkUpdate=function(t){this.ip.checkUpdate(t)},t.prototype.checkUpdateSync=function(){return n(this,void 0,void 0,function(){var t=this;return i(this,function(){return[2,new Promise(function(e){t.checkUpdate(function(t){e(t)})})]})})},t.prototype.getSetting=function(t){this.ip.getSetting(t)},t.prototype.getUserInfo=function(t){this.ip.getUserInfo(t)},t.prototype.authorize=function(t,e){this.ip.authorize(t,e)},t.prototype.openSetting=function(t){this.ip.openSetting(t)},t.prototype.showToast=function(t,e){void 0===e&&(e=!1),e?this.ip.showToast(t):g.xToast.instance.show(t)},t.prototype.share=function(t){void 0===t&&(t=null),this.ip.share(t)},t.prototype.shake=function(t,e){void 0===e&&(e="light"),0!==this.shakeState&&this.ip.shake(t,e)},t.prototype.getLaunchOptions=function(){return this.ip.getLaunchOptions()},t.prototype.screenShotOpen=function(){return this.ip.screenShotOpen()},t.prototype.screenShot=function(t){this.ip.screenShot(t)},t.prototype.end=function(){this.ip.end()},t.prototype.installShortcut=function(t){this.ip.installShortcut(t)},t.prototype.bind=function(){switch(u.consts.PLATFORM){case u.PlatformType.WECHAT_GAME:this.ip=new p.platformWx;break;case u.PlatformType.ANDROID:this.ip=new s.platformAndroid;break;case u.PlatformType.IPHONE:this.ip=new c.platformIos;break;case u.PlatformType.DESKTOP_BROWSER:case u.PlatformType.MOBILE_BROWSER:this.ip=new d.platformWeb;break;case u.PlatformType.OPPO:this.ip=new l.platformOppo;break;case u.PlatformType.VIVO:this.ip=new f.platformVivo}},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.bind()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.platform=y,cc._RF.pop()},{"../../../../const/consts":void 0,"../../prefab/toast/xToast":"xToast","../advert/advert":"advert","../notice/noticeConstants":"noticeConstants","../notice/noticeMgr":"noticeMgr","./platformAndroid":"platformAndroid","./platformIos":"platformIos","./platformOppo":"platformOppo","./platformVivo":"platformVivo","./platformWeb":"platformWeb","./platformWx":"platformWx"}],pluginUserData:[function(t,e,o){"use strict";cc._RF.push(e,"3f6b3Y3095LM5CGltYmFG1O","pluginUserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.pluginUserData=void 0;var n=function(){function t(){this.userId=0,this.openId=void 0,this.mgobeId=void 0,this.avatarUrl="",this.nickName="",this.isAuth=!1}return t.instance=new t,t}();o.pluginUserData=n,cc._RF.pop()},{}],recorderBase:[function(t,e,o){"use strict";var n;cc._RF.push(e,"60f56GX1AZOdL+10kvc6HTO","recorderBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.recorderBase=o.RecorderState=void 0,function(t){t[t.NONE=-1]="NONE",t[t.STARTING=0]="STARTING",t[t.STARTED=1]="STARTED",t[t.PAUSING=2]="PAUSING",t[t.PAUSED=3]="PAUSED",t[t.RESUMING=4]="RESUMING",t[t.STOPING=5]="STOPING",t[t.STOPED=6]="STOPED"}(n=o.RecorderState||(o.RecorderState={}));var i=function(){function t(){this.state=n.NONE,this.validTimeRange=[],this.videoPath=""}return t.prototype.init=function(){},t.prototype.isOpen=function(){return!1},t.prototype.getValidTimeRange=function(){return this.validTimeRange},t.prototype.getState=function(){return this.state},t.prototype.getVideoPath=function(){return this.videoPath},t.prototype.start=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.stop=function(){},t}();o.recorderBase=i,cc._RF.pop()},{}],recorderComponent:[function(t,e,o){"use strict";cc._RF.push(e,"34161EBizNPUoA0x0jr01lf","recorderComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../recorder/recorder"),s=t("../recorder/recorderBase"),c=cc._decorator,d=c.ccclass,p=c.menu,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registerRootNode=!0,e.dragEnable=!0,e.timeLabel=null,e.beginSprite=null,e.stopSprite=null,e.nodeMove=!1,e.recorderTime=0,e}return i(e,t),e.prototype.onLoad=function(){if(a.recorder.instance.init(),a.recorder.instance.isOpen()){if(this.registerRootNode&&cc.game.addPersistRootNode(this.node),0===this.node.width||0===this.node.height){var t=this.beginSprite||this.stopSprite;t&&(this.node.width=t.node.width,this.node.height=t.node.height)}this.beginSprite&&(this.beginSprite.node.active=!0),this.stopSprite&&(this.stopSprite.node.active=!1),this.timeLabel&&(this.timeLabel.node.active=!1,this.timeLabel.string="00:00")}else this.node.active=!1},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},e.prototype.update=function(t){if(a.recorder.instance.getState()===s.RecorderState.STARTED){if(this.recorderTime+=t,this.timeLabel){var e=Math.floor(this.recorderTime/60),o=Math.floor(this.recorderTime-60*e);this.timeLabel.string=("0"+e).substr(-2)+":"+("0"+o).substr(-2)}this.recorderTime>=a.recorder.instance.getValidTimeRange()[1]&&(console.log("\u4e3b\u52a8\u505c\u6b62\u5f55\u5c4f",a.recorder.instance.getValidTimeRange()[1]),this.recorderStop())}},e.prototype.onTouchStart=function(){this.nodeMove=!1},e.prototype.onTouchMove=function(t){this.dragEnable&&(t.getLocation().sub(t.getStartLocation()).mag()>5&&(this.nodeMove=!0),this.nodeMove&&this.node.setPosition(t.getLocation()))},e.prototype.onTouchEnd=function(t){if(this.nodeMove){var e=t.getLocation();e=e.clampf(cc.v2(this.node.width/2,this.node.height/2),cc.v2(cc.winSize.width-this.node.width/2,cc.winSize.height-this.node.height/2)),this.node.setPosition(e)}else this.clickEvent()},e.prototype.onTouchCancel=function(t){if(this.nodeMove){var e=t.getLocation();e=e.clampf(cc.v2(this.node.width/2,this.node.height/2),cc.v2(cc.winSize.width-this.node.width/2,cc.winSize.height-this.node.height/2)),this.node.setPosition(e)}},e.prototype.recorderStart=function(){var t=this;a.recorder.instance.start({success:function(){t.beginSprite&&(t.beginSprite.node.active=!1),t.stopSprite&&(t.stopSprite.node.active=!0),t.timeLabel&&(t.timeLabel.node.active=!0,t.timeLabel.string="00:00"),t.recorderTime=0}})},e.prototype.recorderStop=function(){var t=this;console.log("\u505c\u6b62\u5f55\u5c4f",a.recorder.instance.getValidTimeRange()[1]),a.recorder.instance.stop({success:function(e){console.log("\u5f55\u5c4f\u7ed3\u675f\u6210\u529f",e),t.beginSprite&&(t.beginSprite.node.active=!0),t.stopSprite&&(t.stopSprite.node.active=!1),t.timeLabel&&(t.timeLabel.node.active=!1,t.timeLabel.string="00:00")},fail:function(){t.beginSprite&&(t.beginSprite.node.active=!0),t.stopSprite&&(t.stopSprite.node.active=!1),t.timeLabel&&(t.timeLabel.node.active=!1,t.timeLabel.string="00:00")}})},e.prototype.clickEvent=function(){a.recorder.instance.getState()===s.RecorderState.NONE||a.recorder.instance.getState()===s.RecorderState.STOPED?this.recorderStart():a.recorder.instance.getState()===s.RecorderState.STARTED&&this.recorderStop()},r([u({tooltip:"\u662f\u5426\u6ce8\u518c\u4e3a\u5e38\u9a7b\u8282\u70b9\uff0c\u6ce8\u610f\u5e38\u9a7b\u8282\u70b9\u8981\u548cCanvas\u8282\u70b9\u540c\u7ea7"})],e.prototype,"registerRootNode",void 0),r([u({tooltip:"\u662f\u5426\u53ef\u4ee5\u62d6\u52a8"})],e.prototype,"dragEnable",void 0),r([u({type:cc.Label,tooltip:"\u5f55\u5c4f\u65f6\u95f4"})],e.prototype,"timeLabel",void 0),r([u({type:cc.Sprite,tooltip:"\u5f00\u59cb\u56fe\u6807\uff0c\u6ca1\u6709\u5f55\u5c4f\u7684\u65f6\u5019\u663e\u793a"})],e.prototype,"beginSprite",void 0),r([u({type:cc.Sprite,tooltip:"\u7ed3\u675f\u56fe\u6807\uff0c\u6b63\u5728\u5f55\u5c4f\u7684\u65f6\u5019\u663e\u793a"})],e.prototype,"stopSprite",void 0),r([d,p("\u63d2\u4ef6\u7ec4\u4ef6/recorderComponent (\u5f55\u5c4f\u7ec4\u4ef6)")],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../recorder/recorder":"recorder","../recorder/recorderBase":"recorderBase"}],recorderTT:[function(t,e,o){"use strict";cc._RF.push(e,"20a83OLb0JOxqf6/5ZN6u+P","recorderTT");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.recorderTT=void 0;var r=t("./recorderBase"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.recorder=null,e.startSuccessHandler=null,e.startFailHandler=null,e.pauseSuccessHandler=null,e.pauseFailHandler=null,e.resumeSuccessHandler=null,e.resumeFailHandler=null,e.stopSuccessHandler=null,e.stopFailHandler=null,e.beginTime=0,e}return i(e,t),e.prototype.init=function(){var t=this;this.recorder=tt.getGameRecorderManager(),this.recorder.onStart(function(){console.log("\u5f55\u5c4f\u5f00\u59cb"),t.beginTime=Date.now(),t.state=r.RecorderState.STARTED,t.startSuccessHandler&&t.startSuccessHandler()}),this.recorder.onPause(function(){console.log("\u5f55\u5c4f\u6682\u505c"),t.state=r.RecorderState.PAUSED,t.pauseSuccessHandler&&t.pauseSuccessHandler()}),this.recorder.onResume(function(){console.log("\u5f55\u5c4f\u7ee7\u7eed"),t.state=r.RecorderState.STARTED,t.resumeSuccessHandler&&t.resumeSuccessHandler()}),this.recorder.onStop(function(e){if(console.log("\u5f55\u5c4f\u7ed3\u675f"),Date.now()-t.beginTime<1e3*t.getValidTimeRange()[0])return tt.showToast({title:"\u5f55\u5c4f\u5931\u8d25\uff1a\u5f55\u5c4f\u65f6\u957f\u4f4e\u4e8e 3 \u79d2",icon:"none"}),t.state=r.RecorderState.STOPED,void(t.stopFailHandler&&t.stopFailHandler());t.videoPath=e&&e.videoPath?e.videoPath:"",t.state=r.RecorderState.STOPED,t.stopSuccessHandler&&t.stopSuccessHandler(e.videoPath)}),this.recorder.onError(function(e){switch(console.log("\u5f55\u5c4f\u5f02\u5e38",e.errMsg),t.state){case r.RecorderState.STARTING:t.state=r.RecorderState.STOPED,t.startFailHandler&&t.startFailHandler();break;case r.RecorderState.PAUSING:t.state=r.RecorderState.STARTED,t.pauseFailHandler&&t.pauseFailHandler();break;case r.RecorderState.RESUMING:t.state=r.RecorderState.PAUSED,t.resumeFailHandler&&t.resumeFailHandler();break;case r.RecorderState.STOPING:t.state=r.RecorderState.STARTED,t.stopFailHandler&&t.stopFailHandler()}}),this.validTimeRange=[3,300]},e.prototype.isOpen=function(){return!0},e.prototype.start=function(t){if(t||(t={}),!this.recorder||this.state!==r.RecorderState.NONE&&this.state!==r.RecorderState.STOPED)t.fail&&t.fail();else{this.state=r.RecorderState.STARTING,this.startSuccessHandler=t.success,this.startFailHandler=t.fail;var e={};void 0!==t.duration?e.duration=t.duration:e.duration=this.validTimeRange[1],void 0!==t.frameRate&&(e.frameRate=t.frameRate),this.recorder.start(e)}},e.prototype.pause=function(t){t||(t={}),this.recorder&&this.state===r.RecorderState.STARTED?(this.state=r.RecorderState.PAUSING,this.pauseSuccessHandler=t.success,this.pauseFailHandler=t.fail,this.recorder.pause()):t.fail&&t.fail()},e.prototype.resume=function(t){t||(t={}),this.recorder&&this.state===r.RecorderState.PAUSED?(this.state=r.RecorderState.RESUMING,this.resumeSuccessHandler=t.success,this.resumeFailHandler=t.fail,this.recorder.resume()):t.fail&&t.fail()},e.prototype.stop=function(t){t||(t={}),this.recorder&&this.state===r.RecorderState.STARTED?(this.state=r.RecorderState.STOPING,this.stopSuccessHandler=t.success,this.stopFailHandler=t.fail,this.recorder.stop()):t.fail&&t.fail()},e}(r.recorderBase);o.recorderTT=a,cc._RF.pop()},{"./recorderBase":"recorderBase"}],recorder:[function(t,e,o){"use strict";cc._RF.push(e,"18c666fw4FD4p8gMUQmdrYg","recorder"),Object.defineProperty(o,"__esModule",{value:!0}),o.recorder=void 0;var n=t("../../../../const/consts"),i=t("./recorderBase"),r=t("./recorderTT"),a=function(){function t(){this.re=null}return t.prototype.init=function(){this.re&&this.re.init()},t.prototype.isOpen=function(){return this.re&&this.re.isOpen()},t.prototype.getValidTimeRange=function(){return this.re?this.re.getValidTimeRange():[0,0]},t.prototype.getState=function(){return this.re?this.re.getState():i.RecorderState.NONE},t.prototype.getVideoPath=function(){return this.re.getVideoPath()},t.prototype.start=function(t){this.re&&this.re.start(t)},t.prototype.pause=function(t){this.re&&this.re.pause(t)},t.prototype.resume=function(t){this.re&&this.re.resume(t)},t.prototype.stop=function(t){this.re&&this.re.stop(t)},t.prototype.bind=function(){switch(n.consts.PLATFORM){case n.PlatformType.WECHAT_GAME:case n.PlatformType.QQ:case n.PlatformType.OPPO:case n.PlatformType.VIVO:break;case n.PlatformType.TT:this.re=new r.recorderTT}},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.bind()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.recorder=a,cc._RF.pop()},{"../../../../const/consts":void 0,"./recorderBase":"recorderBase","./recorderTT":"recorderTT"}],repeatScrollNode:[function(t,e,o){"use strict";cc._RF.push(e,"33d28m3sXpDuLUXpAACRve9","repeatScrollNode");var n,i,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL"}(i||(i={}));var s=cc._decorator,c=s.ccclass,d=s.menu,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childAnchor=cc.v2(.5,.5),e.direction=i.HORIZONTAL,e.autoScroll=!1,e.autoScrollSpeed=0,e.repeatSpriteFrames=[],e.frameMap={},e}return r(e,t),e.prototype.onLoad=function(){for(var t=0,e=0;;){var o=!1;switch(this.direction){case i.HORIZONTAL:(n=(new cc.Node).addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.RAW,n.type=cc.Sprite.Type.SIMPLE,n.node.setAnchorPoint(this.childAnchor),n.spriteFrame=this.repeatSpriteFrames[e%this.repeatSpriteFrames.length],this.node.addChild(n.node),this.frameMap[this.node.childrenCount-1]=e,e++,n.node.x=t+n.node.width*n.node.anchorX-this.node.width*this.node.anchorX,(t+=n.node.width)>=this.node.width&&(o=!0);break;case i.VERTICAL:var n;(n=(new cc.Node).addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.RAW,n.type=cc.Sprite.Type.SIMPLE,n.node.setAnchorPoint(this.childAnchor),n.spriteFrame=this.repeatSpriteFrames[e%this.repeatSpriteFrames.length],this.node.addChild(n.node),this.frameMap[this.node.childrenCount-1]=e,e++,n.node.y=this.node.height*(1-this.node.anchorY)-t-n.node.height*(1-n.node.anchorY),(t+=n.node.height)>=this.node.height&&(o=!0)}if(o)break}},e.prototype.update=function(){this.autoScroll&&this.scroll(this.autoScrollSpeed)},e.prototype.scroll=function(t){switch(this.direction){case i.HORIZONTAL:t>0?this.scrollRight(Math.abs(t)):this.scrollLeft(Math.abs(t));break;case i.VERTICAL:t>0?this.scrollUp(Math.abs(t)):this.scrollBottom(Math.abs(t))}},e.prototype.scrollRight=function(t){for(var e=[],o=-1,n=0,i=0;i<this.node.childrenCount;i++){(a=this.node.children[i]).x+=t;var r=a.x-a.anchorX*a.width;r>=this.node.width*(1-this.node.anchorX)&&e.push(i),-1===o?(o=i,n=r):n>r&&(o=i,n=r)}for(i=0;i<e.length;i++){var a,s=(this.frameMap[o]-1+this.repeatSpriteFrames.length)%this.repeatSpriteFrames.length;(a=this.node.children[e[i]]).getComponent(cc.Sprite).spriteFrame=this.repeatSpriteFrames[s],a.x=n-a.width*(1-a.anchorX),n-=a.width,o=e[i],this.frameMap[o]=s}for(;n>-this.node.width*this.node.anchorX;){var c=(new cc.Node).addComponent(cc.Sprite);c.sizeMode=cc.Sprite.SizeMode.RAW,c.type=cc.Sprite.Type.SIMPLE,c.node.setAnchorPoint(this.childAnchor),this.node.addChild(c.node),s=(this.frameMap[o]-1+this.repeatSpriteFrames.length)%this.repeatSpriteFrames.length,c.spriteFrame=this.repeatSpriteFrames[s],this.frameMap[this.node.childrenCount-1]=s,c.node.x=n-c.node.width*(1-c.node.anchorX),n-=c.node.width,o=this.node.childrenCount-1,this.frameMap[o]=s}},e.prototype.scrollLeft=function(t){for(var e=[],o=-1,n=0,i=0;i<this.node.childrenCount;i++){(a=this.node.children[i]).x-=t;var r=this.node.children[i].x+(1-this.node.children[i].anchorX)*this.node.children[i].width;r<=-this.node.width*this.node.anchorX&&e.push(i),-1===o?(o=i,n=r):n<r&&(o=i,n=r)}for(i=0;i<e.length;i++){var a,s=(this.frameMap[o]+1)%this.repeatSpriteFrames.length;(a=this.node.children[e[i]]).getComponent(cc.Sprite).spriteFrame=this.repeatSpriteFrames[s],a.x=n+a.width*a.anchorX,n+=a.width,o=e[i],this.frameMap[o]=s}for(;n<this.node.width*(1-this.node.anchorX);){var c=(new cc.Node).addComponent(cc.Sprite);c.sizeMode=cc.Sprite.SizeMode.RAW,c.type=cc.Sprite.Type.SIMPLE,c.node.setAnchorPoint(this.childAnchor),this.node.addChild(c.node),s=(this.frameMap[o]+1)%this.repeatSpriteFrames.length,c.spriteFrame=this.repeatSpriteFrames[s],this.frameMap[this.node.childrenCount-1]=s,c.node.x=n+c.node.width*c.node.anchorX,n+=c.node.width,o=this.node.childrenCount-1,this.frameMap[o]=s}},e.prototype.scrollUp=function(t){for(var e=[],o=-1,n=0,i=0;i<this.node.childrenCount;i++){(a=this.node.children[i]).y+=t;var r=this.node.children[i].y-this.node.children[i].anchorY*this.node.children[i].height;r>=this.node.height*(1-this.node.anchorY)&&e.push(i),-1===o?(o=i,n=r):n>r&&(o=i,n=r)}for(i=0;i<e.length;i++){var a,s=(this.frameMap[o]+1)%this.repeatSpriteFrames.length;(a=this.node.children[e[i]]).getComponent(cc.Sprite).spriteFrame=this.repeatSpriteFrames[s],a.y=n-a.height*(1-a.anchorY),n-=a.height,o=e[i],this.frameMap[o]=s}for(;n>-this.node.height*this.node.anchorY;){var c=(new cc.Node).addComponent(cc.Sprite);c.sizeMode=cc.Sprite.SizeMode.RAW,c.type=cc.Sprite.Type.SIMPLE,c.node.setAnchorPoint(this.childAnchor),this.node.addChild(c.node),s=(this.frameMap[o]+1)%this.repeatSpriteFrames.length,c.spriteFrame=this.repeatSpriteFrames[s],this.frameMap[this.node.childrenCount-1]=s,c.node.y=n-c.node.height*(1-c.node.anchorY),n-=c.node.height,o=this.node.childrenCount-1,this.frameMap[o]=s}},e.prototype.scrollBottom=function(t){for(var e=[],o=-1,n=0,i=0;i<this.node.childrenCount;i++){(a=this.node.children[i]).y-=t;var r=this.node.children[i].y+(1-this.node.children[i].anchorY)*this.node.children[i].height;r<=-this.node.height*this.node.anchorY&&e.push(i),-1===o?(o=i,n=r):n<r&&(o=i,n=r)}for(i=0;i<e.length;i++){var a,s=(this.frameMap[o]-1+this.repeatSpriteFrames.length)%this.repeatSpriteFrames.length;(a=this.node.children[e[i]]).getComponent(cc.Sprite).spriteFrame=this.repeatSpriteFrames[s],a.y=n+a.height*a.anchorY,n+=a.height,o=e[i],this.frameMap[o]=s}for(;n>-this.node.height*this.node.anchorY;){var c=(new cc.Node).addComponent(cc.Sprite);c.sizeMode=cc.Sprite.SizeMode.RAW,c.type=cc.Sprite.Type.SIMPLE,c.node.setAnchorPoint(this.childAnchor),this.node.addChild(c.node),s=(this.frameMap[o]-1+this.repeatSpriteFrames.length)%this.repeatSpriteFrames.length,c.spriteFrame=this.repeatSpriteFrames[s],this.frameMap[this.node.childrenCount-1]=s,c.node.y=n+c.node.height*c.node.anchorY,n+=c.node.height,o=this.node.childrenCount-1,this.frameMap[o]=s}},a([p(cc.Vec2)],e.prototype,"childAnchor",void 0),a([p({type:cc.Enum(i)})],e.prototype,"direction",void 0),a([p],e.prototype,"autoScroll",void 0),a([p({visible:function(){return this.autoScroll}})],e.prototype,"autoScrollSpeed",void 0),a([p(cc.SpriteFrame)],e.prototype,"repeatSpriteFrames",void 0),a([c,d("\u63d2\u4ef6\u7ec4\u4ef6/repeatScrollNode (\u5faa\u73af\u6eda\u52a8\u7ec4\u4ef6-\u80cc\u666f\u5faa\u73af\u5730\u56fe)")],e)}(cc.Component);o.default=u,cc._RF.pop()},{}],scaleScrollComponent:[function(t,e,o){"use strict";cc._RF.push(e,"1e0f7d3Jp5II4Qqmnp9xgYq","scaleScrollComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.ScaleScrollComponentEvent=void 0;var a,s=t("./eventComponent");(function(t){t.CLICK="CLICK",t.CHANGE="CHANGE"})(a=o.ScaleScrollComponentEvent||(o.ScaleScrollComponentEvent={}));var c=cc._decorator,d=c.ccclass,p=c.menu,u=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scale=.6,e.xSpace=200,e.speed=300,e.pages=[],e.selectIndex=0,e.beginTouchStartX=-1,e.touchStartX=-1,e.restoreRunning=!1,e.restoreFunction=null,e}return i(e,t),e.prototype.onComponentEnable=function(){t.prototype.onComponentEnable.call(this),this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),this.calibration()},e.prototype.onComponentDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this),t.prototype.onComponentDisable.call(this)},e.prototype.touchStart=function(t){this.restoreRunning||(this.touchStartX=t.getLocationX(),this.beginTouchStartX=this.touchStartX)},e.prototype.touchMove=function(t){if(-1!==this.touchStartX){var e=t.getLocationX(),o=t.getLocationX()-this.touchStartX;Math.abs(o)<10||(this.touchStartX=e,this.scroll(o))}},e.prototype.touchEnd=function(){-1!==this.touchStartX&&(Math.abs(this.touchStartX-this.beginTouchStartX)<10?this.runHandler(a.CLICK,{index:this.selectIndex}):this.selectIndex=this.calculationCurrentIndex(),this.restorePosition(),this.touchStartX=-1)},e.prototype.touchCancel=function(){-1!==this.touchStartX&&(this.selectIndex=this.calculationCurrentIndex(),this.restorePosition(),this.touchStartX=-1)},e.prototype.calculationCurrentIndex=function(){for(var t=0,e=Number.MAX_SAFE_INTEGER,o=0;o<this.pages.length;o++){var n=Math.abs(this.pages[o].x);e>n&&(e=n,t=o)}return t},e.prototype.scroll=function(t){this.pages[this.selectIndex].x+=t;for(var e=0;e<this.pages.length;e++){var o=this.selectIndex===e?this.pages[this.selectIndex].x:(e-this.selectIndex)*this.xSpace+this.pages[this.selectIndex].x,n=Math.abs(o)/this.xSpace,i=Math.pow(this.scale,n);this.pages[e].x=cc.misc.clampf(o,-this.xSpace,this.xSpace),this.pages[e].scale=cc.misc.clampf(i,this.scale,1),this.pages[e].zIndex=cc.macro.MAX_ZINDEX-Math.abs(Math.ceil(this.pages[e].x))}},e.prototype.selectPage=function(t,e){void 0===e&&(e=!1);var o=this.pages.indexOf(t);-1!==o&&this.setSelectIndex(o,e)},e.prototype.setSelectIndex=function(t,e){void 0===e&&(e=!1),t<0||t>=this.pages.length||(this.selectIndex=t,this.restoreFunction&&this.unschedule(this.restoreFunction),e?this.restorePosition():this.calibration())},e.prototype.calibration=function(){if(!(this.selectIndex>=this.pages.length)){this.pages[this.selectIndex].scale=1,this.pages[this.selectIndex].x=0;for(var t=this.selectIndex-1;t>=0;t--)this.pages[t].scale=this.scale,this.pages[t].x=-this.xSpace;for(t=this.selectIndex+1;t<this.pages.length;t++)this.pages[t].scale=this.scale,this.pages[t].x=this.xSpace}},e.prototype.restorePosition=function(){this.restoreFunction=this.restoreCallBack.bind(this),this.schedule(this.restoreFunction,1/60)},e.prototype.restoreCallBack=function(t){var e=t*this.speed,o=this.pages[this.selectIndex].x-0;if(o>0){if(o>e)return void this.scroll(-e);this.scroll(-o)}else if(o<0){if(Math.abs(o)>e)return void this.scroll(e);this.scroll(o)}this.restoreRunning=!1,this.unschedule(this.restoreFunction),this.restoreFunction=null,this.runHandler(a.CHANGE,{index:this.selectIndex,node:this.pages[this.selectIndex]})},e.prototype.addPage=function(t){this.pages.push(t),this.node.addChild(t),this.calibration()},e.prototype.removeCard=function(t){var e=this.pages.indexOf(t);-1!==e&&(this.pages.splice(e,1),this.node.removeChild(t),this.calibration())},e.prototype.prev=function(){return!(this.selectIndex<=0||(this.setSelectIndex(this.selectIndex-1,!0),0))},e.prototype.next=function(){return!(this.selectIndex>=this.pages.length-1||(this.setSelectIndex(this.selectIndex+1,!0),0))},r([u],e.prototype,"scale",void 0),r([u],e.prototype,"xSpace",void 0),r([u],e.prototype,"speed",void 0),r([d,p("\u63d2\u4ef6\u7ec4\u4ef6/scaleScrollComponent (\u7f29\u653e\u7ffb\u9875\u7ec4\u4ef6-\u53ea\u652f\u6301\u6a2a\u5411\u7ffb\u9875)")],e)}(s.eventComponent);o.default=l,cc._RF.pop()},{"./eventComponent":"eventComponent"}],scrollNumberComponent:[function(t,e,o){"use strict";cc._RF.push(e,"d6200zfioBC76x/jYdDWJiR","scrollNumberComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.requireComponent,d=a.menu,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.curNumber=0,e}return i(e,t),e.prototype.onLoad=function(){this.label=this.node.getComponent(cc.Label),this.curNumber=0,this.label.string="0"},e.prototype.setString=function(t){this.node.getComponent(cc.Label).string=t},e.prototype.setNumber=function(t){this.node.getComponent(cc.Label).string=""+t},e.prototype.setScrollNumber=function(t,e){var o=this,n=(t-this.curNumber)/e;this.unscheduleAllCallbacks(),this.schedule(function(e){o.curNumber+=n*e,o.curNumber>=t&&(o.curNumber=t,o.unscheduleAllCallbacks()),o.setNumber(Math.floor(o.curNumber))})},r([s,c(cc.Label),d("\u63d2\u4ef6\u7ec4\u4ef6/scrollNumberComponent (\u6eda\u52a8\u6570\u5b57\u7ec4\u4ef6)")],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],shareMgr:[function(t,e,o){"use strict";cc._RF.push(e,"18193reqZpOZJp5UD/yZsRK","shareMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.shareMgr=o.shareInfo=void 0;var n=function(){this.id="",this.imageUrl="",this.title=""};o.shareInfo=n;var i=function(){function t(){this.data={}}return t.prototype.init=function(t,e,o){var n=this;t?cc.assetManager.loadRemote(e,function(t,e){t?console.error("\u8f7d\u5165\u8fdc\u7a0b\u5206\u4eab\u6570\u636e\u5931\u8d25",t):(console.log("\u8f7d\u5165\u8fdc\u7a0b\u5206\u4eab\u6570\u636e\u6210\u529f -> ",e),n.loadData(e.json.data))}):o.load(e,cc.JsonAsset,function(t,e){t?console.error("\u8f7d\u5165\u672c\u5730\u5206\u4eab\u6570\u636e\u5931\u8d25",t):(console.log("\u8f7d\u5165\u672c\u5730\u5206\u4eab\u6570\u636e\u6210\u529f -> ",e),n.loadData(e.json.data))})},t.prototype.getShareInfo=function(t){void 0===t&&(t=[]);var e=this.getShareInfoByIds(t);return e?{imageUrl:e.imageUrl,title:e.title}:{imageUrl:"",title:""}},t.prototype.getShareInfoByIds=function(t){if(0===Object(this.data).length)return console.log("\u5206\u4eab\u6570\u636e\u8868\u4e3a\u7a7a"),null;for(var e=t.length-1;e>=0;e--)this.data[t[e]]||t.splice(e,1);return 0===t.length&&(t=Object.keys(this.data)),this.data[t[Math.floor(Math.random()*t.length)]]},t.prototype.loadData=function(t){for(var e=0;e<t.length;e++){var o=new n;o.id=t[e].id,o.imageUrl=t[e].imageUrl,o.title=t[e].title,this.data[o.id]=o}},t.instance=new t,t}();o.shareMgr=i,cc._RF.pop()},{}],signInData:[function(t,e,o){"use strict";cc._RF.push(e,"e90dcpgYC9DS7v+XwpzTjoV","signInData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.signInData=void 0;var r=t("../../db/game/dbGameUtils"),a=t("../../plugin/notice/noticeConstants"),s=t("../../plugin/notice/noticeMgr"),c=t("../core/baseData"),d=t("../data"),p=function(t){function e(){var e=t.call(this)||this;return e.openIndex=0,e.todayIsReceived=!1,e.storageKey="signIn",e}return i(e,t),e.prototype.init=function(){this.todayIsReceived=!0,this.openIndex=0},e.prototype.anotherDay=function(){this.todayIsReceived=!1},e.prototype.receive=function(t,e){if(!this.todayIsReceived){var o=r.dbGameUtils.signIn.getDB(this.openIndex);d.data.instance.part.unlockParts(o.rewards);var n=this.openIndex;this.openIndex++,this.todayIsReceived=!0,d.data.instance.saveNextFrame=!0,s.noticeMgr.instance.emit(a.NEName.SHOW_SIGNIN_REWARD,{index:n,multi:e})}},e.prototype.formatData=function(){var t={};return t.openIndex=this.openIndex,t.todayIsReceived=this.todayIsReceived,t},e.prototype.parseData=function(t){this.openIndex=this.readProperty(t,"openIndex",1),this.todayIsReceived=this.readProperty(t,"todayIsReceived",!1)},e}(c.baseData);o.signInData=p,cc._RF.pop()},{"../../db/game/dbGameUtils":"dbGameUtils","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../core/baseData":"baseData","../data":"data"}],soundMgr:[function(t,e,o){"use strict";cc._RF.push(e,"95cbeYVUpZH5YSfrYg708Wa","soundMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.soundMgr=void 0;var n=function(){function t(){this.audioCache={},this.bundle=null,this.preMusicVolum=0,this.preEffectVolum=0}return t.prototype.init=function(t){this.bundle=t,cc.audioEngine.setMusicVolume(.5),cc.audioEngine.setEffectsVolume(.5)},t.prototype.pause=function(){this.preMusicVolum=cc.audioEngine.getMusicVolume(),this.preEffectVolum=cc.audioEngine.getEffectsVolume(),cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0)},t.prototype.resume=function(){cc.audioEngine.setMusicVolume(this.preMusicVolum),cc.audioEngine.setEffectsVolume(this.preEffectVolum)},t.prototype.pauseMusic=function(){this.preMusicVolum=cc.audioEngine.getMusicVolume(),cc.audioEngine.setMusicVolume(0)},t.prototype.resumeMusic=function(){cc.audioEngine.setMusicVolume(this.preMusicVolum)},t.prototype.pauseEffect=function(){this.preEffectVolum=cc.audioEngine.getEffectsVolume(),cc.audioEngine.setEffectsVolume(0)},t.prototype.resumeEffect=function(){cc.audioEngine.setEffectsVolume(this.preEffectVolum)},t.prototype.playBackGround=function(t,e){var o=this;if(void 0===e&&(e=!0),this.audioCache[t])return cc.audioEngine.stopMusic(),void cc.audioEngine.playMusic(this.audioCache[t],e);this.bundle.load(t,cc.AudioClip,function(n,i){n?console.error("load audio error",t):(o.audioCache[t]=i,cc.audioEngine.stopMusic(),cc.audioEngine.playMusic(o.audioCache[t],e))})},t.prototype.playEffect=function(t,e){var o=this;void 0===e&&(e=!1),this.audioCache[t]?cc.audioEngine.playEffect(this.audioCache[t],e):this.bundle.load(t,cc.AudioClip,function(n,i){n?console.error("load audio error",t):(o.audioCache[t]=i,cc.audioEngine.playEffect(o.audioCache[t],e))})},t.instance=new t,t}();o.soundMgr=n,cc._RF.pop()},{}],statisticsAndroid:[function(t,e,o){"use strict";cc._RF.push(e,"0de10Ige3ZGPoWgc2hxijeH","statisticsAndroid");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.statisticsAndroid=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.customEvent=function(t,e){cc.sys.platform===cc.sys.ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/juliang/juliangJsb","customEvent","(Ljava/lang/String;Ljava/lang/String;)V",t,JSON.stringify(e))},e.instance=new e,e}(t("./statisticsBase").statisticsBase);o.statisticsAndroid=r,cc._RF.pop()},{"./statisticsBase":"statisticsBase"}],statisticsBase:[function(t,e,o){"use strict";cc._RF.push(e,"7239ddEcVZIapE1nUTHTzZG","statisticsBase"),Object.defineProperty(o,"__esModule",{value:!0}),o.statisticsBase=void 0;var n=function(){function t(){}return t.prototype.customEvent=function(){},t}();o.statisticsBase=n,cc._RF.pop()},{}],statisticsWx:[function(t,e,o){"use strict";cc._RF.push(e,"2f377+h0jZEVom2h4kOa6on","statisticsWx");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.statisticsWx=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.customEvent=function(t,e){cc.sys.platform===cc.sys.WECHAT_GAME&&(e.branchDim?wx.reportUserBehaviorBranchAnalytics({branchId:t,branchDim:e.branchDim,eventType:e.eventType}):wx.reportUserBehaviorBranchAnalytics({branchId:t,eventType:e.eventType}))},e}(t("./statisticsBase").statisticsBase);o.statisticsWx=r,cc._RF.pop()},{"./statisticsBase":"statisticsBase"}],statistics:[function(t,e,o){"use strict";cc._RF.push(e,"11afdoVDZRFwoCjC0gQYT3B","statistics"),Object.defineProperty(o,"__esModule",{value:!0}),o.statistics=void 0;var n=t("../../../../const/consts"),i=t("./statisticsAndroid"),r=t("./statisticsWx"),a=function(){function t(){this.statistics=null,this.beginTime=0,this.reportTime=0}return t.prototype.customEvent=function(t,e,o){void 0===o&&(o=n.PlatformType.NONE),o!==n.PlatformType.NONE&&o!==n.consts.PLATFORM||this.statistics&&this.statistics.customEvent(t,e)},t.prototype.bind=function(){switch(n.consts.PLATFORM){case n.PlatformType.WECHAT_GAME:this.statistics=new r.statisticsWx;break;case n.PlatformType.QQ:case n.PlatformType.OPPO:case n.PlatformType.VIVO:case n.PlatformType.TT:break;case n.PlatformType.ANDROID:this.statistics=new i.statisticsAndroid}},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.bind()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.statistics=a,cc._RF.pop()},{"../../../../const/consts":void 0,"./statisticsAndroid":"statisticsAndroid","./statisticsWx":"statisticsWx"}],suitData:[function(t,e,o){"use strict";cc._RF.push(e,"e5ae18AMGNEj4j21sXIGTLp","suitData");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.suitData=void 0;var r=t("../../db/db"),a=t("../../plugin/notice/noticeConstants"),s=t("../../plugin/notice/noticeMgr"),c=t("../core/baseData"),d=t("../data"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ids=[],e.videoTiems={},e}return i(e,t),e.prototype.getVideoTimes=function(t){return this.videoTiems[t]?this.videoTiems[t]:0},e.prototype.addVideoTimes=function(t){this.videoTiems[t]||(this.videoTiems[t]=0),this.videoTiems[t]+=1,this.videoTiems[t]>=r.db.game.suit[t].videoTiems&&(this.ids.push(t),delete this.videoTiems[t],d.data.instance.part.unlockParts(r.db.game.suit[t].parts),s.noticeMgr.instance.emit(a.NEName.SUIT_GET,{id:t}))},e.prototype.owned=function(t){return-1!==this.ids.indexOf(t)},e.prototype.formatData=function(){var t={};return t.ids=this.ids,t.videoTiems=this.videoTiems,t},e.prototype.parseData=function(t){this.ids=t.ids,this.videoTiems=t.videoTiems},e}(c.baseData);o.suitData=p,cc._RF.pop()},{"../../db/db":"db","../../plugin/notice/noticeConstants":"noticeConstants","../../plugin/notice/noticeMgr":"noticeMgr","../core/baseData":"baseData","../data":"data"}],tabComponent:[function(t,e,o){"use strict";cc._RF.push(e,"2f0e7tlqYdLw56nBDueDlL2","tabComponent");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.TabComponentEvent=void 0;var a,s,c=t("./eventComponent");(function(t){t[t.SPRITE=0]="SPRITE",t[t.SCALE=1]="SCALE",t[t.OFFSET=2]="OFFSET"})(a||(a={})),function(t){t.SELECT="SELECT"}(s=o.TabComponentEvent||(o.TabComponentEvent={}));var d=cc._decorator,p=d.ccclass,u=d.menu,l=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewType=a.SPRITE,e.normalSpriteFrame=null,e.selectedSpriteFrame=null,e.buttonScale=0,e.offset=cc.v2(0,0),e.buttonInitPositionMap={},e.buttonInitScaleMap={},e.selectButton=null,e.lockItems=[],e.items=[],e}return i(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.node.childrenCount;t++){var e=this.node.children[t].getComponent(cc.Button);if(e){this.buttonInitPositionMap[e.uuid]=e.node.getPosition(),this.buttonInitScaleMap[e.uuid]=e.node.scale;var o=new cc.Component.EventHandler;o.target=this.node,o.component="tabComponent",o.handler="btnClickEvent",o.customEventData="",e.clickEvents.splice(0,0,o),this.items.push(e)}}},e.prototype.onEnable=function(){this.selectButton?this.selectTarget(this.selectButton):this.selectTarget()},e.prototype.lockTarget=function(t){-1===this.lockItems.indexOf(t)&&this.lockItems.push(t)},e.prototype.unlockTarget=function(t){var e=this.lockItems.indexOf(t);-1!==e&&this.lockItems.splice(e,1)},e.prototype.selectTarget=function(t){if(!t||-1===this.lockItems.indexOf(t)){for(var e=0;e<this.node.childrenCount;e++){var o=this.node.children[e].getComponent(cc.Button);if(o)if(t||(t=o),o===t)switch(this.viewType){case a.SPRITE:o.target.getComponent(cc.Sprite).spriteFrame=this.selectedSpriteFrame;break;case a.SCALE:o.node.stopAllActions(),o.node.runAction(cc.scaleTo(.1,this.buttonScale));break;case a.OFFSET:o.node.stopAllActions(),o.node.runAction(cc.moveTo(.1,cc.v2(o.node.x+this.offset.x,o.node.y+this.offset.y)))}else switch(this.viewType){case a.SPRITE:o.target.getComponent(cc.Sprite).spriteFrame=this.normalSpriteFrame;break;case a.SCALE:o.node.stopAllActions(),o.node.runAction(cc.scaleTo(.1,this.buttonInitScaleMap[o.uuid]));break;case a.OFFSET:o.node.stopAllActions(),o.node.runAction(cc.moveTo(.1,this.buttonInitPositionMap[o.uuid]))}}var n=this.selectButton;this.selectButton=t,this.runHandler(s.SELECT,{lButton:n,cButton:this.selectButton})}},e.prototype.selectTargetByName=function(t){var e=this.node.getChildByName(t);if(e){var o=e.getComponent(cc.Button);o&&this.selectTarget(o)}},e.prototype.selectTargetByIndex=function(t){t<0||t>=this.items.length||this.selectTarget(this.items[t])},e.prototype.btnClickEvent=function(t){var e;(e=t instanceof Array?t[0].target.getComponent(cc.Button):t.target.getComponent(cc.Button))!==this.selectButton&&this.selectTarget(e)},r([l({type:cc.Enum(a)})],e.prototype,"viewType",void 0),r([l({type:cc.SpriteFrame,visible:function(){return this.viewType===a.SPRITE}})],e.prototype,"normalSpriteFrame",void 0),r([l({type:cc.SpriteFrame,visible:function(){return this.viewType===a.SPRITE}})],e.prototype,"selectedSpriteFrame",void 0),r([l({type:cc.Float,visible:function(){return this.viewType===a.SCALE}})],e.prototype,"buttonScale",void 0),r([l({visible:function(){return this.viewType===a.OFFSET}})],e.prototype,"offset",void 0),r([p,u("\u63d2\u4ef6\u7ec4\u4ef6/tabComponent (\u6807\u7b7e\u9875\u7ec4\u4ef6)")],e)}(c.eventComponent);o.default=h,cc._RF.pop()},{"./eventComponent":"eventComponent"}],toast:[function(t,e,o){"use strict";cc._RF.push(e,"5e252Oq8YNMRY2Gq4zzqEeN","toast");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgSprite=null,e.label=null,e.completeCallback=null,e}return i(e,t),e.prototype.setLabel=function(t){this.label.string=t},e.prototype.show=function(){this.node.scaleY=.5,this.node.runAction(cc.sequence(cc.scaleTo(.2,1,1),cc.delayTime(1),cc.callFunc(function(){this.completeCallback&&this.completeCallback(this)},this)))},r([c(cc.Sprite)],e.prototype,"bgSprite",void 0),r([c(cc.Label)],e.prototype,"label",void 0),r([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{}],utilAld:[function(t,e,o){"use strict";cc._RF.push(e,"9d4dfSki9pNDYOgESfdESMe","utilAld"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilALD=void 0;var n=t("../share/shareMgr"),i=function(){function t(){}return t.prototype.onShareAppMessage=function(t){void 0===t&&(t=""),cc.sys.platform===cc.sys.WECHAT_GAME&&(wx.showShareMenu({withShareTicket:!0}),wx.aldOnShareAppMessage(function(){var e=n.shareMgr.instance.getShareInfo([]);return{imageUrl:e.imageUrl,title:e.title,query:t}}))},t.prototype.offShareAppMessage=function(){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.offShareAppMessage()},t.prototype.shareAppMessage=function(t,e,o){void 0===o&&(o=""),cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldShareAppMessage({imageUrl:e,title:t,query:o})},t.prototype.sendEvent=function(t,e){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldSendEvent(t,e)},t.prototype.onStageStart=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldStage.onStart(t)},t.prototype.onStageRunning=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldStage.onRunning(t)},t.prototype.onStageEnd=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.aldStage.onEnd(t)},t.prototype.navigateToMiniProgram=function(t){cc.sys.platform===cc.sys.WECHAT_GAME&&wx.navigateToMiniProgram(t)},t.instance=new t,t}();o.utilALD=i,cc._RF.pop()},{"../share/shareMgr":"shareMgr"}],utilBase64:[function(t,e,o){"use strict";cc._RF.push(e,"81c1cI+yTZByLqEc2IGr3DF","utilBase64"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilBase64=void 0;var n=function(){function t(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return t.prototype.encode=function(t){var e,o,n,i,r,a,s,c="",d=0;for(t=this._utf8_encode(t);d<t.length;)i=(e=t.charCodeAt(d++))>>2,r=(3&e)<<4|(o=t.charCodeAt(d++))>>4,a=(15&o)<<2|(n=t.charCodeAt(d++))>>6,s=63&n,isNaN(o)?a=s=64:isNaN(n)&&(s=64),c=c+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return c},t.prototype.decode=function(t){var e,o,n,i,r,a,s="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)e=this._keyStr.indexOf(t.charAt(c++))<<2|(i=this._keyStr.indexOf(t.charAt(c++)))>>4,o=(15&i)<<4|(r=this._keyStr.indexOf(t.charAt(c++)))>>2,n=(3&r)<<6|(a=this._keyStr.indexOf(t.charAt(c++))),s+=String.fromCharCode(e),64!=r&&(s+=String.fromCharCode(o)),64!=a&&(s+=String.fromCharCode(n));return this._utf8_decode(s)},t.prototype._utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e},t.prototype._utf8_decode=function(t){for(var e="",o=0,n=0,i=0,r=0;o<t.length;)(n=t.charCodeAt(o))<128?(e+=String.fromCharCode(n),o++):n>191&&n<224?(i=t.charCodeAt(o+1),e+=String.fromCharCode((31&n)<<6|63&i),o+=2):(i=t.charCodeAt(o+1),r=t.charCodeAt(o+2),e+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&r),o+=3);return e},t.instance=new t,t}();o.utilBase64=n,cc._RF.pop()},{}],utilBundle:[function(t,e,o){"use strict";cc._RF.push(e,"59245/qLzZIerFzqcqdi+J+","utilBundle");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.utilBundle=void 0;var r=function(){function t(){this.resCache={}}return t.prototype.getRes=function(t,e){return this.resCache[t]?this.resCache[t][e]:null},t.prototype.deleteRes=function(t,e){delete this.resCache[t]&&this.resCache[t][e]&&delete this.resCache[t][e],cc.assetManager.getBundle(t).release(e)},t.prototype.loadBundle=function(t){return n(this,void 0,void 0,function(){return i(this,function(){return console.log("\u5f00\u59cb\u52a0\u8f7d\u5305 -> ",t),[2,new Promise(function(e){cc.assetManager.loadBundle(t,null,function(o,n){console.log("\u7ed3\u675f\u52a0\u8f7d\u5305 -> ",t),e(n)})})]})})},t.prototype.loadBundleRes=function(t,e,o){return n(this,void 0,void 0,function(){var n,r=this;return i(this,function(i){switch(i.label){case 0:return console.log("\u5f00\u59cb\u52a0\u8f7d\u8d44\u6e90",o),n=t,"string"!=typeof t?[3,2]:[4,cc.assetManager.getBundle(t)];case 1:n=i.sent(),i.label=2;case 2:return[2,new Promise(function(t){n.load(o,e,function(e,i){e&&console.log(e),console.log("\u7ed3\u675f\u52a0\u8f7d\u8d44\u6e90",o),r.resCache[n.name]||(r.resCache[n.name]={}),r.resCache[n.name][o]=i,t(i)})})]}})})},t.instance=new t,t}();o.utilBundle=r,cc._RF.pop()},{}],utilGame:[function(t,e,o){"use strict";cc._RF.push(e,"fffdc3PgfxKsaIu0+OnkesO","utilGame"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilGame=void 0;var n=function(){function t(){}return t.prototype.grayNode=function(t,e,o){var n=t.getComponent(cc.Sprite);if(n&&(e?n.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")):n.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite"))),o)for(var i=0;i<t.childrenCount;i++)this.grayNode(t.children[i],e,o)},t.prototype.loadResourceSpriteFrame=function(t,e,o,n){if(void 0===n&&(n=null),""!==e&&e){var i;i=""===t?cc.resources:cc.assetManager.getBundle(t);var r=function(t){t.load(e,cc.SpriteFrame,function(t,e){t?console.log(t):(o.spriteFrame=e,n&&n())})};i?r(i):cc.assetManager.loadBundle(t,null,function(t,e){r(e)})}else o.spriteFrame=null},t.prototype.loadRemoteSpriteFrame=function(t,e){""!==t&&t?cc.loader.load({url:t,type:"png"},function(t,o){t?console.log(t):e.spriteFrame=new cc.SpriteFrame(o)}):e.spriteFrame=null},t.prototype.methodTest=function(t,e,o,n){e()?o(t):n(t)},t.prototype.findNode=function(t){for(var e=t.split(">"),o=cc.find(e[0].trim()),n=1;n<e.length;n++){var i=e[n].trim();if(!(o=this.subFindNode(o,i))){console.error("\u6ca1\u6709\u627e\u5230\u6307\u5b9a\u8282\u70b9",t);break}}return o},t.prototype.subFindNode=function(t,e){var o=cc.find(e,t);if(!o)for(var n=0;n<t.children.length&&!(o=this.subFindNode(t.children[n],e));n++);return o},t.instance=new t,t}();o.utilGame=n,cc._RF.pop()},{}],utilLog:[function(t,e,o){"use strict";var n;cc._RF.push(e,"ace1e0Gbo1Nt6NNv0GqbrBO","utilLog"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilLog=void 0,function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.ERROR=2]="ERROR",t[t.CLOSE=3]="CLOSE"}(n||(n={}));var i=function(){function t(){}return t.debug=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.level>n.DEBUG||console.debug(t,e)},t.info=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.level>n.INFO||console.info(t,e)},t.error=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];this.level>n.ERROR||console.error(t,e)},t.level=n.DEBUG,t}();o.utilLog=i,cc._RF.pop()},{}],utilMap:[function(t,e,o){"use strict";cc._RF.push(e,"1b58flzXK9Bv6XJsvgNs9QQ","utilMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilMap=void 0;var n=function(){function t(){}return t.setMapValue=function(t,e,o,n){for(var i=t,r=null,a=0;a<e.length;a++)i[r=e[a]]||(a<e.length-1?i[r]={}:i[r]=o),a<e.length-1&&(i=i[r]);i[r]=n},t.addMapValue=function(t,e,o,n){for(var i=t,r=null,a=0;a<e.length;a++)i[r=e[a]]||(a<e.length-1?i[r]={}:i[r]=o),a<e.length-1&&(i=i[r]);i[r]+=n},t.subMapValue=function(t,e,o,n){for(var i=t,r=null,a=0;a<e.length;a++)i[r=e[a]]||(a<e.length-1?i[r]={}:i[r]=o),a<e.length-1&&(i=i[r]);i[r]-=n},t.getMapValue=function(t,e,o){for(var n=t,i=0;i<e.length;i++)if(!(n=n[e[i]]))return o;return n},t}();o.utilMap=n,cc._RF.pop()},{}],utilMath:[function(t,e,o){"use strict";cc._RF.push(e,"7ea06Bm2/ZNk7wMGSwbHNWU","utilMath"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilMath=void 0;var n=function(){function t(){}return t.clamp=function(t,e,o){return Math.max(Math.min(t,o),e)},t.random=function(t,e){return t=t||0,e=e||1e10,Math.floor(Math.random()*(e-t))+t},t.toFix=function(t,e,o){void 0===o&&(o=!1);var n=Math.abs(t).toString(),i=n.split(".");if(1===i.length||i[1].length<=e)return n;for(var r=0,a="",s=0;s<i[1].length&&(a+=i[1][s],o&&"0"===i[1][s]||(r+=1)!==e);s++);return i[0]+"."+a},t.vecArrive=function(t,e,o){var n=e.sub(t),i=e.sub(o);return n.x*i.x<=0&&n.y*i.y<=0},t}();o.utilMath=n,cc._RF.pop()},{}],utilRandom:[function(t,e,o){"use strict";cc._RF.push(e,"020ebOqlsxOw51mfycjywDA","utilRandom"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilRandom=void 0;var n=function(){function t(){}return t.triggle=function(t){return 100*Math.random()<t},t.getRandomValue=function(t,e){if(0===t&&0===e)return 0;if(t>e){var o=t;t=e,e=o}return Math.floor(1e6*Math.random())%(e-t+1)+t},t.getRandomFloatValue=function(t,e){if(0===t&&0===e)return 0;if(t>e){var o=t;t=e,e=o}return Math.random()*(e-t)+t},t.triggleIndex=function(t){for(var e=100*Math.random(),o=0;o<t.length;o++){if(e<t[o])return o;e-=t[o]}return-1},t.cutNumber=function(e,o){e<o&&(o=e);for(var n=[],i=0,r=0;r<o;r++){var a=0;if(r===o-1)a=e-i;else{var s=e-i-(o-1);a=t.getRandomValue(1,s)}i+=a,n.push(a)}return n},t.getRandomItems=function(t,e){e>t.length&&(e=t.length);for(var o=e/t.length,n=[],i=0;i<t.length&&((Math.random()<o||n.length+(t.length-i)===e)&&n.push(t[i]),n.length!==e);i++);return n},t}();o.utilRandom=n,cc._RF.pop()},{}],utilStorage:[function(t,e,o){"use strict";cc._RF.push(e,"9cde6ipMP9PW6cYu45jN88W","utilStorage"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilStorage=void 0;var n=t("../data/pluginUserData"),i=t("../net/http/httpRequest"),r=function(){function t(){}return t.prototype.save=function(t,e,o){e.__STORAGE_TIME__||(e.__STORAGE_TIME__=Date.now()),0!==n.pluginUserData.instance.userId&&o?i.httpRequest.instance.saveData(t,JSON.stringify(e)):cc.sys.localStorage.setItem(t,JSON.stringify(e))},t.prototype.read=function(t,e,o){var r=cc.sys.localStorage.getItem(t),a=0,s=null;if(r&&""!==r&&(s=JSON.parse(r),a=s.__STORAGE_TIME__||0),0===n.pluginUserData.instance.userId||!e)return console.log("\u8bfb\u53d6\u5b58\u6863\u8fd4\u56de\u6570\u636e\u4e3a\u672c\u5730\u6570\u636e"),void(o&&o(s));var c=0;i.httpRequest.instance.readData(t,function(t){t&&(c=t.__STORAGE_TIME__||0),a<c?(console.log("\u6570\u636e\u6bd4\u5bf9\u7ed3\u679c\uff1a\u7f51\u7edc\u6570\u636e\u4e3a\u6700\u65b0\u6570\u636e"),o&&o(t)):(console.log("\u6570\u636e\u6bd4\u5bf9\u7ed3\u679c\uff1a\u672c\u5730\u6570\u636e\u4e3a\u6700\u65b0\u6570\u636e"),o&&o(s))})},t.instance=new t,t}();o.utilStorage=r,cc._RF.pop()},{"../data/pluginUserData":"pluginUserData","../net/http/httpRequest":"httpRequest"}],utilString:[function(t,e,o){"use strict";cc._RF.push(e,"bec4cTqgnJJ2qUolghgJPSb","utilString"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilString=void 0;var n=function(){function t(){}return t.insertCharToString=function(t,e,o){for(var n="",i=0,r=0;r<t.length;r++)i===e?(n+=o+t[r],i=0):n+=t[r],i+=1;return n},t.convertNumberToStringFormat=function(t,e,o){for(var n=Math.abs(t).toString(),i="",r=n.length-1;r>=0;r--){i=n[r]+i;var a=n.length-r-1;a%e==e-1&&a!==n.length-1&&(i=o+i)}return t<0?"-"+i:i},t.convertNumberTo10000=function(t){return t>1e8||t<-1e8?Math.floor(t/1e8)+"\u4ebf":t>1e4||t<-1e4?Math.floor(t/1e4)+"\u4e07":t.toString()},t.getRandomString=function(t,e){e||(e="1234567890abcdefghijklmnopqrstuvwxyz");for(var o="",n=0;n<t;n++)o+=e[Math.floor(Math.random()*e.length)];return o},t.isNumber=function(t){return/^\d+$/.test(t)},t}();o.utilString=n,cc._RF.pop()},{}],utilSubContext:[function(t,e,o){"use strict";var n,i;cc._RF.push(e,"8596d/NRe5JO4Ls0xufZeWu","utilSubContext"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilSubContext=o.SubContextKey=o.SubContextEventName=void 0,function(t){t.EN_SHOW_LEVEL_RANK="EN_SHOW_LEVEL_RANK",t.EN_HIDE_LEVEL_RANK="EN_HIDE_LEVEL_RANK",t.EN_SHOW_ACHIEVEMENT_RANK="EN_SHOW_ACHIEVEMENT_RANK",t.EN_HIDE_ACHIEVEMENT_RANK="EN_HIDE_ACHIEVEMENT_RANK",t.EN_SHOW_CAPITAL_RANK="EN_SHOW_CAPITAL_RANK",t.EN_HIDE_CAPITAL_RANK="EN_HIDE_CAPITAL_RANK",t.EN_SHOW_RACE_RANK="EN_SHOW_RACE_RANK",t.EN_HIDE_RACE_RANK="EN_HIDE_RACE_RANK",t.EN_SHOW_RACE_RESULT_RANK="EN_SHOW_RACE_RESULT_RANK",t.EN_HIDE_RACE_RESULT_RANK="EN_HIDE_RACE_RESULT_RANK",t.EN_SHOW_MAIN_USER_INFO="EN_SHOW_MAIN_USER_INFO",t.EN_HIDE_MAIN_USER_INFO="EN_HIDE_MAIN_USER_INFO",t.EN_SHOW_USER_INFO="EN_SHOW_USER_INFO",t.EN_HIDE_USER_INFO="EN_HIDE_USER_INFO",t.EN_SHOW_INVITE_INFO="EN_SHOW_INVITE_INFO",t.EN_HIDE_INVITE_INFO="EN_HIDE_INVITE_INFO",t.EN_UPLOAD_LEVEL="EN_UPLOAD_LEVEL",t.EN_UPLOAD_ACHIEVEMENT="EN_UPLOAD_ACHIEVEMENT",t.EN_UPLOAD_CAPITAL="EN_UPLOAD_CAPITAL",t.EN_UPLOAD_RACE="EN_UPLOAD_RACE"}(n=o.SubContextEventName||(o.SubContextEventName={})),function(t){t.SCK_LEVEL_RANK="SCK_LEVEL_RANK",t.SCK_ACHIEVEMENT_RANK="SCK_ACHIEVEMENT_RANK",t.SCK_CAPITAL_RANK="SCK_CAPITAL_RANK",t.SCK_RACE_RANK="SCK_RACE_RANK",t.SCK_RACE_RESULT_RANK="SCK_RACE_RESULT_RANK",t.SCK_MAIN_USER_INFO="SCK_MAIN_USER_INFO",t.SCK_USER_INFO="SCK_USER_INFO",t.SCK_INVITE_INFO="SCK_INVITE_INFO",t.SCK_UPLOAD_LEVEL="SCK_UPLOAD_LEVEL",t.SCK_UPLOAD_ACHIEVEMENT="SCK_UPLOAD_ACHIEVEMENT",t.SCK_UPLOAD_CAPITAL="SCK_UPLOAD_CAPITAL",t.SCK_UPLOAD_RACE="SCK_UPLOAD_RACE"}(i=o.SubContextKey||(o.SubContextKey={}));var r=function(){function t(){this.eventMap={},this.scNodeMap={}}return t.prototype.registerSubContext=function(t,e){this.scNodeMap[t]=e},t.prototype.unRegisterSubContext=function(t){this.scNodeMap[t]&&delete this.scNodeMap[t]},t.prototype.show=function(t){for(var e in this.scNodeMap)this.scNodeMap[e].active=!1;this.scNodeMap[t]&&(this.scNodeMap[t].active=!0),this.eventMap[t].show},t.prototype.hide=function(t){this.eventMap[t].hide&&this.scNodeMap[t]&&(this.scNodeMap[t].active=!1)},t.prototype.update=function(t){this.eventMap[t].update},t.prototype.init=function(){this.eventMap[i.SCK_LEVEL_RANK]={},this.eventMap[i.SCK_LEVEL_RANK].show=n.EN_SHOW_LEVEL_RANK,this.eventMap[i.SCK_LEVEL_RANK].hide=n.EN_HIDE_LEVEL_RANK,this.eventMap[i.SCK_ACHIEVEMENT_RANK]={},this.eventMap[i.SCK_ACHIEVEMENT_RANK].show=n.EN_SHOW_ACHIEVEMENT_RANK,this.eventMap[i.SCK_ACHIEVEMENT_RANK].hide=n.EN_HIDE_ACHIEVEMENT_RANK,this.eventMap[i.SCK_CAPITAL_RANK]={},this.eventMap[i.SCK_CAPITAL_RANK].show=n.EN_SHOW_CAPITAL_RANK,this.eventMap[i.SCK_CAPITAL_RANK].hide=n.EN_HIDE_CAPITAL_RANK,this.eventMap[i.SCK_RACE_RANK]={},this.eventMap[i.SCK_RACE_RANK].show=n.EN_SHOW_RACE_RANK,this.eventMap[i.SCK_RACE_RANK].hide=n.EN_HIDE_RACE_RANK,this.eventMap[i.SCK_RACE_RESULT_RANK]={},this.eventMap[i.SCK_RACE_RESULT_RANK].show=n.EN_SHOW_RACE_RESULT_RANK,this.eventMap[i.SCK_RACE_RESULT_RANK].hide=n.EN_HIDE_RACE_RESULT_RANK,this.eventMap[i.SCK_MAIN_USER_INFO]={},this.eventMap[i.SCK_MAIN_USER_INFO].show=n.EN_SHOW_MAIN_USER_INFO,this.eventMap[i.SCK_MAIN_USER_INFO].hide=n.EN_HIDE_MAIN_USER_INFO,this.eventMap[i.SCK_USER_INFO]={},this.eventMap[i.SCK_USER_INFO].show=n.EN_SHOW_USER_INFO,this.eventMap[i.SCK_USER_INFO].hide=n.EN_HIDE_USER_INFO,this.eventMap[i.SCK_INVITE_INFO]={},this.eventMap[i.SCK_INVITE_INFO].show=n.EN_SHOW_INVITE_INFO,this.eventMap[i.SCK_INVITE_INFO].hide=n.EN_HIDE_INVITE_INFO,this.eventMap[i.SCK_UPLOAD_LEVEL]={},this.eventMap[i.SCK_UPLOAD_LEVEL].update=n.EN_UPLOAD_LEVEL,this.eventMap[i.SCK_UPLOAD_ACHIEVEMENT]={},this.eventMap[i.SCK_UPLOAD_ACHIEVEMENT].update=n.EN_UPLOAD_ACHIEVEMENT,this.eventMap[i.SCK_UPLOAD_CAPITAL]={},this.eventMap[i.SCK_UPLOAD_CAPITAL].update=n.EN_UPLOAD_CAPITAL,this.eventMap[i.SCK_UPLOAD_RACE]={},this.eventMap[i.SCK_UPLOAD_RACE].update=n.EN_UPLOAD_RACE},t.updateUserData=function(t,e,o){return cc.sys.platform!==cc.sys.WECHAT_GAME?Promise.resolve():t&&e?new Promise(function(n,i){e.uuid=""+Math.random(),e.timestamp=cc.sys.now(),o&&(e.wxgame={score:e[o],update_time:e.timestamp}),wx.setUserCloudStorage({KVDataList:[{key:t,value:JSON.stringify(e)}],success:function(t){console.log("\u4e0a\u4f20\u6392\u884c\u699c\u6210\u529f.",t),n(t)},fail:function(t){console.log("\u4e0a\u4f20\u6392\u884c\u699c\u5931\u8d25.",t),i(t)}})}):void 0},Object.defineProperty(t,"instance",{get:function(){return this.sInstance||(this.sInstance=new t,this.sInstance.init()),this.sInstance},enumerable:!1,configurable:!0}),t.sInstance=null,t}();o.utilSubContext=r,cc._RF.pop()},{}],utilTime:[function(t,e,o){"use strict";var n;cc._RF.push(e,"77127phWZ1NAbdc7t0JTxcH","utilTime"),Object.defineProperty(o,"__esModule",{value:!0}),o.utilTime=o.TimeFormatLevel=void 0,function(t){t[t.MSEC=0]="MSEC",t[t.SEC=1]="SEC",t[t.MIN=2]="MIN",t[t.HOUR=3]="HOUR",t[t.DAY=4]="DAY",t[t.MONTH=5]="MONTH",t[t.YEAR=6]="YEAR"}(n=o.TimeFormatLevel||(o.TimeFormatLevel={}));var i=function(){function t(){}return t.isSameDay=function(t,e){var o=new Date(t),n=new Date(e);return o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDay()===n.getDay()},t.format=function(t,e,o,n){for(var i=new Date(t),r=[i.getMilliseconds(),i.getSeconds(),i.getMinutes(),i.getHours(),i.getDay(),i.getMonth(),i.getFullYear()],a="",s=e;s>=o;s--)a+=("0"+r[s]).substr(-2),a+=s>=n.length?"":n[s];return a},t.formatCD=function(t,e,o,i){var r=[];switch(e){case n.MSEC:r.push(t);break;case n.SEC:r.push(Math.floor(t%1e3)),r.push(Math.floor(t/1e3));break;case n.MIN:r.push(Math.floor(t%1e3)),r.push(Math.floor(t%6e4/1e3)),r.push(Math.floor(t/6e4));break;case n.HOUR:r.push(Math.floor(t%1e3)),r.push(Math.floor(t%6e4/1e3)),r.push(Math.floor(t%36e5/6e4)),r.push(Math.floor(t/36e5));break;case n.DAY:r.push(Math.floor(t%1e3)),r.push(Math.floor(t%6e4/1e3)),r.push(Math.floor(t%36e5/6e4)),r.push(Math.floor(t%864e5/36e5)),r.push(Math.floor(t/864e5));break;case n.MONTH:r.push(Math.floor(t%1e3)),r.push(Math.floor(t%6e4/1e3)),r.push(Math.floor(t%36e5/6e4)),r.push(Math.floor(t%864e5/36e5)),r.push(Math.floor(t%2592e6/864e5)),r.push(Math.floor(t/2592e6));break;case n.YEAR:r.push(Math.floor(t%1e3)),r.push(Math.floor(t%6e4/1e3)),r.push(Math.floor(t%36e5/6e4)),r.push(Math.floor(t%864e5/36e5)),r.push(Math.floor(t%2592e6/864e5)),r.push(Math.floor(t%94608e7/2592e6)),r.push(Math.floor(t/94608e7))}for(var a="",s=e;s>=o;s--)s===e&&r[s]>10?a+=r[s]:a+=("0"+r[s]).substr(-2),a+=e-s>=i.length?"":i[e-s];return a},t.intervalDays=function(t,e){var o=new Date(t),n=36e5*o.getHours()+6e4*o.getMinutes()+1e3*o.getSeconds()+o.getMilliseconds(),i=new Date(e),r=36e5*i.getHours()+6e4*i.getMinutes()+1e3*i.getSeconds()+i.getMilliseconds();return Math.abs(Math.ceil((e-r)/864e5)-Math.ceil((t-n)/864e5))},t.nextDayMs=function(t){return 864e5-(t-864e5*Math.floor(t/864e5))},t.getToDayBeginTime=function(){return new Date((new Date).setHours(0,0,0,0)).getTime()},t}();o.utilTime=i,cc._RF.pop()},{}],verifyLabel:[function(t,e,o){"use strict";cc._RF.push(e,"e2367YAvkNLBK3O0LhMWnUT","verifyLabel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,c=a.requireComponent,d=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.verity=function(t,e){this.node.stopAllActions(),t<e?(this.node.color=cc.color(255,255,255),this.node.runAction(cc.sequence(cc.tintTo(.2,255,0,0),cc.tintTo(.2,255,255,255)))):(this.node.color=cc.color(255,255,255),this.node.runAction(cc.sequence(cc.tintTo(.2,0,255,0),cc.tintTo(.2,255,255,255))))},r([s,c(cc.Label)],e)}(cc.Component));o.default=d,cc._RF.pop()},{}],xToast:[function(t,e,o){"use strict";cc._RF.push(e,"f46f2z1y99FoL8NAikIVerj","xToast");var n=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(e){r(e)}}function s(t){try{c(n.throw(t))}catch(e){r(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}c((n=n.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(s){r=[6,s],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.xToast=void 0;var r=function(){function t(){this.prefab=null,this.toastCache=[]}return t.prototype.load=function(t){var e=this;cc.assetManager.getBundle("framework").load("prefab/toast/toast",cc.Prefab,function(o,n){o?console.error("\u52a0\u8f7dToast\u9884\u5236\u5931\u8d25",o.message):(e.prefab=n,t&&t())})},t.prototype.asyncLoad=function(){return n(this,void 0,void 0,function(){var t=this;return i(this,function(){return[2,new Promise(function(e){t.load(function(){e()})})]})})},t.prototype.show=function(t){var e=null;(e=this.toastCache.length>0?this.toastCache.pop():cc.instantiate(this.prefab).getComponent("toast")).setLabel(t),e.show(),e.completeCallback=function(t){this.toastCache.push(t),t.node.removeFromParent()}.bind(this),cc.director.getScene().getChildByName("Canvas").addChild(e.node,cc.macro.MAX_ZINDEX)},t.instance=new t,t}();o.xToast=r,cc._RF.pop()},{}]},{},["catData","catSubPartData","condition","conditionBase","conditionConst","conditionManager","dataConsts","baseData","dataLogic","data","cdData","commonData","funcData","invenData","partData","photoData","signInData","suitData","achivData","dailyData","giftPackData","guideAnyTouchCompleteHandler","guideAppointKeyCompleteHandler","guideBaseCompleteHandler","guideDragEndCompleteHandler","guideHideViewCompleteHandler","guideRectTouchCompleteHandler","guideShowViewCompleteHandler","guideData","guideTriggle","guideAppointKeyTriggleHandler","guideBaseTriggleHandler","guideCompleteTriggleHandler","guideHideViewTriggleHandler","guideShowViewTriggleHandler","dbBaseData","dbUtilBase","dbConsts","db","dbGame","dbGameAchivTask","dbGameCommon","dbGameDailyTask","dbGameFunc","dbGameGiftPack","dbGameGuide","dbGameItem","dbGamePart","dbGamePartGroup","dbGameSignIn","dbGameSuit","dbGameUtils","dbGameView","fightData","advert","advertBase","advertConstants","advertOppo","advertQQ","advertTT","advertVivo","advertWeb","advertWx","advertOppoCustomComponent","advertVivoCustomComponent","advertWxBannerComponent","advertWxCustomComponent","actionData","animate","animationData","animationLoader","frameData","audioButton","cdTimeLabel","eventComponent","frameComponent","hookTouchNode","recorderComponent","repeatScrollNode","scaleScrollComponent","scrollNumberComponent","tabComponent","verifyLabel","pluginUserData","baseDialog","dialogDB","dialogMgr","httpRequest","httpRequestBase","httpRequestYt","netHttp","noticeConstants","noticeMgr","IPlatform","platform","platformAndroid","platformBase","platformIos","platformNative","platformOppo","platformTT","platformVivo","platformWeb","platformWx","recorder","recorderBase","recorderTT","shareMgr","soundMgr","statistics","statisticsAndroid","statisticsBase","statisticsWx","utilAld","utilBase64","utilBundle","utilGame","utilLog","utilMap","utilMath","utilRandom","utilStorage","utilString","utilSubContext","utilTime","GuideCompleteButton","GuideCompleteTouch","guideController","toast","xToast","UIBackGround"]);